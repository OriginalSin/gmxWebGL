{"version":3,"file":"gmxWebGL.js","sources":["../src/ImageCanvas.js","../src/webgl/Framebuffer.js","../src/ajax.js","../src/math.js","../src/LonLat.js","../src/mercator.js","../src/math/Vec4.js","../src/math/Mat3.js","../src/math/Mat4.js","../src/math/Quat.js","../src/math/Vec3.js","../src/math/Vec2.js","../src/utils/shared.js","../src/Events.js","../src/astro/jd.js","../src/Clock.js","../src/webgl/ProgramController.js","../src/Stack.js","../src/webgl/Handler.js","../src/webgl/types.js","../src/webgl/callbacks.js","../src/cons.js","../src/webgl/Program.js","../src/Rectangle.js","../src/QueueArray.js","../src/utils/ImagesCacheManager.js","../src/utils/TextureAtlas.js"],"sourcesContent":["/**\n * @module og/ImageCanvas\n */\n\n'use strict';\n\n/**\n * Usefull class for working with JS canvas object.\n * @class\n * @param {number} [width] - Canvas width. Default 256.\n * @param {number} [height] - Canvas height. Default 256.\n */\nclass ImageCanvas {\n    constructor(width, height) {\n        /**\n         * Canvas object.\n         * @protected\n         * @type {Object}\n         */\n        this._canvas = document.createElement(\"canvas\");\n        this._canvas.width = width || 256;\n        this._canvas.height = height || 256;\n\n        /**\n         * Canvas context.\n         * @protected\n         * @type {Object}\n         */\n        this._context = this._canvas.getContext('2d');\n    }\n\n    /**\n     * Returns canvas object.\n     * @public\n     * @returns {Object}\n     */\n    getCanvas() {\n        return this._canvas;\n    }\n\n    /**\n     * Returns canvas context pointer.\n     * @public\n     * @returns {Object}\n     */\n    getContext() {\n        return this._context;\n    }\n\n    /**\n     * Fills canvas RGBA with zeroes.\n     * @public\n     */\n    fillEmpty() {\n        var imgd = this._context.getImageData(0, 0, this._canvas.width, this._canvas.height);\n        var pixels = imgd.data;\n        for (var i = 0, n = pixels.length; i < n; i += 4) {\n            pixels[i] = pixels[i + 1] = pixels[i + 2] = pixels[i + 3] = 0;\n        }\n        this._context.putImageData(imgd, 0, 0);\n    }\n\n    /**\n     * Gets canvas pixels RGBA data.\n     * @public\n     * @returns {Array.<number>}\n     */\n    getData() {\n        var imgd = this._context.getImageData(0, 0, this._canvas.width, this._canvas.height);\n        return imgd.data;\n    }\n\n    /**\n     * Fill the canvas by color.\n     * @public\n     * @param {string} color - CSS string color.\n     */\n    fillColor(color) {\n        this._context.fillStyle = color;\n        this._context.fillRect(0, 0, this._canvas.width, this._canvas.height);\n    };\n\n    /**\n     * Sets RGBA pixel data.\n     * @public\n     * @param {Array.<number>} data - Array RGBA data.\n     */\n    setData(data) {\n        var imageData = this._context.createImageData(this._canvas.width, this._canvas.height);\n        imageData.data.set(data);\n        this._context.putImageData(imageData, 0, 0);\n    }\n\n    /**\n     * Resize canvas.\n     * @public\n     * @param {number} width - Width.\n     * @param {number} height - Height.\n     */\n    resize(width, height) {\n        this._canvas.width = width;\n        this._canvas.height = height;\n        this._context = this._canvas.getContext('2d');\n    }\n\n    /**\n     * Draw an image on the canvas.\n     * @public\n     * @param {Image} img - Draw image.\n     * @param {number} [x] - Left top image corner X coordinate on the canvas.\n     * @param {number} [y] - Left top image corner Y coordinate on the canvas.\n     * @param {number} [width] - Image width slice. Image width is default.\n     * @param {number} [height] - Image height slice. Image height is default.\n     */\n    drawImage(img, x, y, width, height) {\n        this._context = this._canvas.getContext('2d');\n        this._context.drawImage(img, x || 0, y || 0, width || img.width, height || img.height);\n    }\n\n    /**\n     * Converts canvas to JS image object.\n     * @public\n     * @returns {Image}\n     */\n    getImage() {\n        var img = new Image();\n        img.width = this.getWidth();\n        img.height = this.getHeight();\n        img.src = this._canvas.toDataURL(\"image/png\");\n        return img;\n    }\n\n    /**\n     * Get measured text width.\n     * @public\n     * @param {string} text - Measured text.\n     * @returns {number}\n     */\n    getTextWidth(text) {\n        var metrics = this._context.measureText(text);\n        return Math.round(metrics.width);\n    }\n\n    /**\n     * Draw a text on the canvas.\n     * @public\n     * @param {string} text - Text.\n     * @param {number} [x] - Canvas X - coordinate. 0 - default.\n     * @param {number} [y] - Canvas Y - coordinate. 0 - default.\n     * @param {string} [font] - Font style. 'normal 14px Verdana' - is default.\n     * @param {string} [color] - Css font color.\n     */\n    drawText(text, x, y, font, color) {\n        this._context.fillStyle = color || 'black';\n        this._context.font = font || 'normal 14px Verdana';\n        this._context.fillText(text, x || 0, y || 14);\n    }\n\n    /**\n     * Gets canvas width.\n     * @public\n     * @returns {number}\n     */\n    getWidth() {\n        return this._canvas.width;\n    }\n\n    /**\n     * Gets canvas height.\n     * @public\n     * @returns {number}\n     */\n    getHeight() {\n        return this._canvas.height;\n    }\n\n    /**\n     * Load image to canvas.\n     * @public\n     * @param {string} url - Image url.\n     * @pararm {imageCallback} [callback] - Image onload callback.\n     */\n    load(url, callback) {\n        var img = new Image();\n        var that = this;\n        img.onload = function () {\n            that.resize(img.width, img.height);\n            that._context.drawImage(img, 0, 0, img.width, img.height);\n            callback && callback(img);\n        }\n        img.src = url;\n    }\n\n    /**\n     * Open canvas image in the new window.\n     * @public\n     */\n    openImage() {\n        var img = this.getImage();\n        var dataUrl = img.src;\n        var windowContent = '<!DOCTYPE html>';\n        windowContent += '<html>'\n        windowContent += '<head><title>Print</title></head>';\n        windowContent += '<body>'\n        windowContent += '<img src=\"' + dataUrl + '\">';\n        windowContent += '</body>';\n        windowContent += '</html>';\n        var printWin = window.open('', '', 'width=' + img.width + 'px ,height=' + img.height + 'px');\n        printWin.document.open();\n        printWin.document.write(windowContent);\n        printWin.document.close();\n        printWin.focus();\n    }\n\n\n    destroy() {\n        this._canvas.width = 1;\n        this._canvas.height = 1;\n        this._canvas = null;\n        this._context = null;\n    }\n};\n\nexport { ImageCanvas };","/**\n * @module og/webgl/Framebuffer\n */\n\n'use strict';\n\nimport { ImageCanvas } from '../ImageCanvas.js';\n\n/**\n * Class represents framebuffer.\n * @class\n * @param {og.webgl.Handler} handler - WebGL handler.\n * @param {Object} [options] - Framebuffer options:\n * @param {number} [options.width] - Framebuffer width. Default is handler canvas width.\n * @param {number} [options.height] - Framebuffer height. Default is handler canvas height.\n * @param {number} [options.size] - Color attachment size.\n * @param {String} [options.internalFormat=\"RGBA\"] - Specifies the color components in the texture.\n * @param {String} [options.format=\"RGBA\"] - Specifies the format of the texel data.\n * @param {String} [options.type=\"UNSIGNED_BYTE\"] - Specifies the data type of the texel data.\n * @param {String} [options.depthComponent=\"DEPTH_COMPONENT16\"] - Specifies depth buffer size.\n * @param {Boolean} [options.useDepth] - Using depth buffer during the rendering.\n */\nconst Framebuffer = function (handler, options) {\n\n    options = options || {};\n\n    /**\n     * WebGL handler.\n     * @public\n     * @type {og.webgl.Handler}\n     */\n    this.handler = handler;\n\n    /**\n     * Framebuffer object.\n     * @private\n     * @type {Object}\n     */\n    this._fbo = null;\n\n    this._isBare = options.isBare || false;\n\n    /**\n     * Renderbuffer object.\n     * @private\n     * @type {Object}\n     */\n    this._depthRenderbuffer = null;\n\n    this._filter = options.filter || \"NEAREST\";\n\n    this._internalFormat = options.internalFormat || \"RGBA\";\n\n    this._format = options.format || \"RGBA\";\n\n    this._type = options.type || \"UNSIGNED_BYTE\";\n\n    /**\n     * Framebuffer width.\n     * @private\n     * @type {number}\n     */\n    this._width = options.width || handler.canvas.width;\n\n    /**\n     * Framebuffer width.\n     * @private\n     * @type {number}\n     */\n    this._height = options.height || handler.canvas.height;\n\n    this._depthComponent = options.depthComponent != undefined ? options.depthComponent : \"DEPTH_COMPONENT16\";\n\n    this._useDepth = options.useDepth != undefined ? options.useDepth : true;\n\n    /**\n     * Framebuffer activity. \n     * @private\n     * @type {boolean}\n     */\n    this._active = false;\n\n    this._size = options.size || 1;\n\n    /**\n     * Framebuffer texture.\n     * @public\n     * @type {number}\n     */\n    this.textures = options.textures || new Array(this._size);\n};\n\nFramebuffer.prototype.destroy = function () {\n    var gl = this.handler.gl;\n\n    for (var i = 0; i < this.textures.length; i++) {\n        gl.deleteTexture(this.textures[i]);\n    }\n    this.textures = new Array(this._size);\n\n    gl.deleteFramebuffer(this._fbo);\n    gl.deleteRenderbuffer(this._depthRenderbuffer);\n\n    this._depthRenderbuffer = null;\n    this._fbo = null;\n\n    this._active = false;\n};\n\n/**\n * Framebuffer initialization.\n * @private\n */\nFramebuffer.prototype.init = function () {\n    var gl = this.handler.gl;\n\n    this._fbo = gl.createFramebuffer();\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n\n    if (!this._isBare) {\n        if (this.textures.length === 0) {\n            this.bindOutputTexture(this.handler.createEmptyTexture2DExt(\n                this._width,\n                this._height,\n                this._filter,\n                this._internalFormat,\n                this._format,\n                this._type\n            ));\n            gl.drawBuffers && gl.drawBuffers([gl.COLOR_ATTACHMENT0]);\n        } else {\n            let colorAttachments = [];\n            for (var i = 0; i < this.textures.length; i++) {\n                this.bindOutputTexture(\n                    this.textures[i] ||\n                    this.handler.createEmptyTexture2DExt(\n                        this._width,\n                        this._height,\n                        this._filter,\n                        this._internalFormat,\n                        this._format,\n                        this._type\n                    ), i);\n                colorAttachments.push(gl.COLOR_ATTACHMENT0 + i);\n            }\n            gl.drawBuffers && gl.drawBuffers(colorAttachments);\n        }\n    }\n\n    if (this._useDepth) {\n        this._depthRenderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this._depthRenderbuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl[this._depthComponent], this._width, this._height);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this._depthRenderbuffer);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    return this;\n};\n\n/**\n * Bind buffer texture.\n * @public\n * @param{Object} texture - Output texture.\n * @param {Number} [attachmentIndex=0] - color attachment index.\n */\nFramebuffer.prototype.bindOutputTexture = function (texture, attachmentIndex = 0) {\n    var gl = this.handler.gl;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + attachmentIndex, gl.TEXTURE_2D, texture, 0);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    this.textures[attachmentIndex] = texture;\n};\n\n/**\n * Sets framebuffer viewport size.\n * @public\n * @param {number} width - Framebuffer width.\n * @param {number} height - Framebuffer height.\n */\nFramebuffer.prototype.setSize = function (width, height, forceDestroy) {\n    this._width = width;\n    this._height = height;\n\n    if (this._active) {\n        this.handler.gl.viewport(0, 0, this._width, this._height);\n    }\n\n    if (this._useDepth || forceDestroy) {\n        this.destroy();\n        this.init();\n    }\n};\n\n/**\n * Returns framebuffer completed.\n * @public\n * @returns {boolean} -\n */\nFramebuffer.prototype.isComplete = function () {\n    var gl = this.handler.gl;\n    if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE)\n        return true;\n    return false;\n};\n\n/**\n * Gets pixel RBGA color from framebuffer by coordinates.\n * @public\n * @param {Uint8Array} res - Normalized x - coordinate.\n * @param {number} nx - Normalized x - coordinate.\n * @param {number} ny - Normalized y - coordinate.\n * @param {number} [w=1] - Normalized width.\n * @param {number} [h=1] - Normalized height.\n * @param {Number} [attachmentIndex=0] - color attachment index.\n */\nFramebuffer.prototype.readPixels = function (res, nx, ny, index = 0, w = 1, h = 1) {\n    var gl = this.handler.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n    gl.readBuffer && gl.readBuffer(gl.COLOR_ATTACHMENT0 + index || 0);\n    gl.readPixels(nx * this._width, ny * this._height, w, h, gl.RGBA, gl[this._type], res);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n};\n\n/**\n * Reads all pixels(RGBA colors) from framebuffer.\n * @public\n * @param {Uint8Array} res - Result array.\n * @param {Number} [attachmentIndex=0] - color attachment index.\n */\nFramebuffer.prototype.readAllPixels = function (res, attachmentIndex = 0) {\n    var gl = this.handler.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n    gl.readBuffer && gl.readBuffer(gl.COLOR_ATTACHMENT0 + attachmentIndex);\n    gl.readPixels(0, 0, this._width, this._height, gl.RGBA, gl[this._type], res);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n};\n\n/**\n * Activate framebuffer frame to draw.\n * @public\n * @returns {og.webgl.Framebuffer} Returns Current framebuffer.\n */\nFramebuffer.prototype.activate = function () {\n    var gl = this.handler.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._fbo);\n    gl.viewport(0, 0, this._width, this._height);\n    this._active = true;\n    var c = this.handler.framebufferStack.current().data;\n    c && (c._active = false);\n    this.handler.framebufferStack.push(this);\n    return this;\n};\n\n/**\n * Deactivate framebuffer frame.\n * @public\n */\nFramebuffer.prototype.deactivate = function () {\n    var h = this.handler,\n        gl = h.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    this._active = false;\n\n    var f = this.handler.framebufferStack.popPrev();\n\n    if (f) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, f._fbo);\n        gl.viewport(0, 0, f._width, f._height);\n    } else {\n        gl.viewport(0, 0, h.canvas.width, h.canvas.height);\n    }\n};\n\n/**\n * Gets JavaScript image object that framebuffer has drawn.\n * @public\n * @returns {Object} -\n */\nFramebuffer.prototype.getImage = function () {\n    var data = new Uint8Array(4 * this._width * this._height);\n    this.readAllPixels(data);\n    var imageCanvas = new ImageCanvas(this._width, this._height);\n    imageCanvas.setData(data);\n    return imageCanvas.getImage();\n};\n\n/**\n * Open dialog window with framebuffer image.\n * @public\n */\nFramebuffer.prototype.openImage = function () {\n    var img = this.getImage();\n    var dataUrl = img.src;\n    var windowContent = '<!DOCTYPE html>';\n    windowContent += '<html>'\n    windowContent += '<head><title>Print</title></head>';\n    windowContent += '<body>'\n    windowContent += '<img src=\"' + dataUrl + '\">';\n    windowContent += '</body>';\n    windowContent += '</html>';\n    var printWin = window.open('', '', 'width=' + img.width + 'px ,height=' + img.height + 'px');\n    printWin.document.open();\n    printWin.document.write(windowContent);\n    printWin.document.close();\n    printWin.focus();\n};\n\n\nexport { Framebuffer };","/**\n * @module og/ajax\n */\n\n'use strict';\n\n/**\n * Ajax parameters.\n * @namespace og.ajax\n */\nconst ajax = {\n    /**\n     * Ajax ready state result.\n     * @enum\n     */\n    ReadyState:\n    {\n        Uninitialized: 0,\n        Loading: 1,\n        Loaded: 2,\n        Interactive: 3,\n        Complete: 4\n    },\n    /**\n     * Ajax status code.\n     * @enum\n     */\n    Status:\n    {\n        OK: 200,\n        Created: 201,\n        Accepted: 202,\n        NoContent: 204,\n        BadRequest: 400,\n        Forbidden: 403,\n        NotFound: 404,\n        Gone: 410,\n        ServerError: 500\n    },\n    /**\n     * Ajax query method.\n     * @enum\n     */\n    Method: {\n        Get: \"GET\",\n        Post: \"POST\"\n    },\n    /**\n     * Ajax query type is asynchronous.\n     * @type {boolean}\n     */\n    Asynchronous: true,\n    /**\n     * Ajax query type is synchronous.\n     * @type {boolean}\n     */\n    Synchronous: false\n};\n\n/**\n * Xhr object that returned by ajax query.\n * @class\n * @param {Object} xhr - Current ActiveXObject object.\n */\nconst Xhr = function (xhr) {\n    /**\n     * ActiveXObject object.\n     * @private\n     * @type {Object}\n     */\n    var _xhr = xhr;\n\n    /**\n     * Aborts current ajax.\n     * @public\n     */\n    this.abort = function () {\n        _xhr.aborted = true;\n        _xhr.abort();\n    };\n};\n\nconst defaultParams = {\n    type: ajax.Method.Get,\n    async: ajax.Asynchronous,\n    data: null,\n    sender: null,\n    responseType: \"text\"\n};\n\nfunction createXMLHttp() {\n    var xhr = null;\n    if (typeof XMLHttpRequest !== undefined) {\n        xhr = new XMLHttpRequest;\n        return xhr;\n    } else if (window.ActiveXObject) {\n        var ieXMLHttpVersions = ['MSXML2.XMLHttp.5.0', 'MSXML2.XMLHttp.4.0', 'MSXML2.XMLHttp.3.0', 'MSXML2.XMLHttp', 'Microsoft.XMLHttp'];\n        for (var i = 0; i < ieXMLHttpVersions.length; i++) {\n            try {\n                xhr = new ActiveXObject(ieXMLHttpVersions[i]);\n                return xhr;\n            } catch (e) {\n                console.log('error: og.ajax.createXMLHttp creation filed.');\n            }\n        }\n    }\n};\n\n/**\n * Send an ajax request.\n * @function\n * @param {string} url - Url path.\n * @param {Object} [params] - Ajax parameters:\n * @param {ajax.Method|string} [params.type] - 'POST' or 'GET' ajax method. 'GET' is default.\n * @param {boolean} [params.async] - Asynchronous ajax flag. True is default.\n * @param {Object} [params.data] - Qery data.\n * @param {Object} [params.sender] - Sender object, that success callback binded with. ActiveXObject is default.\n * @param {string} [params.responseType] - Responce data type. Culd be 'text', 'json', 'jsonp', 'html'. 'text' is default.\n * @param {ajax.Xhr~successCallback} [params.success] - The callback that handles the success response.\n * @param {ajax.Xhr~errorCallback} [params.error] - The callback that handles the failed response.\n * @param {ajax.Xhr~abortCallback} [params.abort] - The callback that handles aborted requests.\n * @returns {ajax.Xhr} - Returns object that could be aborted.\n */\najax.request = function (url, params) {\n\n    params = params || {};\n\n    var p = {}, i;\n\n    for (i in defaultParams) {\n        p[i] = defaultParams[i];\n    }\n\n    for (i in params) {\n        p[i] = params[i];\n    }\n\n    p.data = params.data;\n\n    var xhr = createXMLHttp();\n\n    var customXhr = new Xhr(xhr);\n\n    var body = null, d;\n\n    if (p.type === ajax.Method.Post) {\n        if (p.data) {\n            body = \"\";\n            for (let key in p.data) {\n                d = p.data[key];\n                body += key + \"=\" + encodeURIComponent(d instanceof Object ? JSON.stringify(d) : d) + \"&\";\n            }\n            body = body.slice(0, -1);\n        }\n        xhr.open(p.type, url, p.async);\n        xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    } else if (p.data) {\n        var tail = \"?\";\n        for (let key in p.data) {\n            d = p.data[key];\n            tail += key + \"=\" + encodeURIComponent(d instanceof Object ? JSON.stringify(d) : d) + \"&\";\n        }\n        tail = tail.slice(0, -1);\n        xhr.open(p.type, url + tail, p.async);\n    } else {\n        xhr.open(p.type, url, p.async);\n    }\n\n    if (p.async)\n        xhr.responseType = p.responseType;\n\n    xhr.overrideMimeType(\"text/plain\");\n\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === ajax.ReadyState.Complete) {\n            if (xhr.status === ajax.Status.OK) {\n                if (params.success)\n                    /**\n                     * Success callback.\n                     * @callback ajax.Xhr~successCallback\n                     * @param {Object} Response data\n                     */\n                    params.success.call(params.sender || customXhr, xhr.response);\n            } else if (xhr.aborted) {\n                /**\n                 * Abort callback.\n                 * @callback ajax.Xhr~abortCallback\n                 * @param {Object} Response data\n                 * @param {Object} Status object\n                 */\n                params.abort && params.abort.call(params.sender || customXhr, xhr.response, xhr.status);\n            } else {\n                /**\n                 * Error callback.\n                 * @callback ajax.Xhr~errorCallback\n                 * @param {Object} Response data\n                 * @param {Object} Status object\n                 */\n                params.error && params.error.call(params.sender || customXhr, xhr.response, xhr.status);\n            }\n            delete xhr['onreadystatechange'];\n            xhr.onreadystatechange = null;\n            xhr = null;\n        } else {\n            //still loading\n        }\n    };\n\n    xhr.send(body);\n\n    return customXhr;\n};\n\nexport { ajax };","/**\n * @module og/math\n */\n\n'use strict';\n\n/** @const */\nexport const TWO_PI = 2.0 * Math.PI;\n\n/** @const */\nexport const PI_TWO = Math.PI / 2.0;\n\nexport const X = 0;\nexport const Y = 1;\nexport const Z = 2;\nexport const W = 3;\n\nexport const MAX_FLOAT = Number.MAX_VALUE || 1.7976931348623157e+308;\n\n/** @const */\nexport const LOG2 = Math.log(2);\n/** @const */\nexport const MAX32 = 2147483647;\n/** @const */\nexport const MAX = 549755748352;\n/** @const */\nexport const MIN = -MAX;\n\n/** @const */\nexport const RADIANS = Math.PI / 180.0;\n/** @const */\nexport const DEGREES = 180.0 / Math.PI;\n\n/** @const */\nexport const DEGREES_DOUBLE = 2.0 * DEGREES;\n/** @const */\nexport const RADIANS_HALF = 0.5 * RADIANS;\n\n/** @const */\nexport const ARCSECONDS_TO_RADIANS = 0.00000484813681109536;\n/** @const */\nexport const RADIANS_TO_HOURS = 3.8197186342054880584532103209403;\n/** @const */\nexport const HOURS_TO_RADIANS = 0.26179938779914943653855361527329;\n/** @const */\nexport const HOURS_TO_DEGREES = 15.0;\n/** @const */\nexport const DEGREES_TO_HOURS = 1.0 / 15.0;\n\n/** @const */\nexport const SQRT_HALF = Math.sqrt(0.5);\n\nexport const EPSILON1 = 0.1;\nexport const EPSILON2 = 0.01;\nexport const EPSILON3 = 0.001;\nexport const EPSILON4 = 0.0001;\nexport const EPSILON5 = 0.00001;\nexport const EPSILON6 = 0.000001;\nexport const EPSILON7 = 1e-7;\nexport const EPSILON8 = 1e-8;\nexport const EPSILON9 = 1e-9;\nexport const EPSILON10 = 1e-10;\nexport const EPSILON11 = 1e-11;\nexport const EPSILON12 = 1e-12;\nexport const EPSILON13 = 1e-13;\nexport const EPSILON14 = 1e-14;\nexport const EPSILON15 = 1e-15;\nexport const EPSILON16 = 1e-16;\nexport const EPSILON17 = 1e-17;\nexport const EPSILON18 = 1e-18;\nexport const EPSILON19 = 1e-19;\nexport const EPSILON20 = 1e-20;\n\n/** \n * The log function returns the power to which the base value has to be raised to produce n.\n * @function\n * @param {number} n - Produce value.\n * @param {number} base - Base value.\n * @returns {number} -\n * @example\n * og.math.log(64, 2)\n * //returns 6\n */\nexport function log(n, base) {\n    return Math.log(n) / Math.log(base);\n};\n\n/**\n * Clamp the number.\n * @function\n * @param {number} number - Input number.\n * @param {number} min - Minimal edge.\n * @param {number} max - Maximal edge.\n * @returns {number} -\n * @example\n * og.math.clamp(12, 1, 5)\n * //returns 5\n */\nexport function clamp(number, min, max) {\n    return Math.max(min, Math.min(number, max));\n};\n\n/**\n * Converts degrees value to radians.\n * @function\n * @param {number} degrees - Degree value.\n * @returns {number} -\n */\nexport function DEG2RAD(degrees) {\n    return degrees * RADIANS;\n};\n\n/**\n * Converts radians value to degrees.\n * @function\n * @param {number} angle - Degree value.\n * @returns {number} -\n */\nexport function RAD2DEG(angle) {\n    return angle * DEGREES;\n};\n\n/**\n * Check the number is a power of two.\n * @function\n * @param {number} x - Input value.\n * @returns {boolean} -\n */\nexport function isPowerOfTwo(x) {\n    return (x & (x - 1)) === 0;\n};\n\n/**\n * Returns next value that is power of two.\n * @function\n * @param {number} x - Input value.\n * @returns {number} -\n */\nexport function nextHighestPowerOfTwo(x) {\n    --x;\n    for (var i = 1; i < 32; i <<= 1) {\n        x = x | x >> i;\n    }\n    return x + 1;\n};\n\n/**\n * Returns random integer number within the bounds.\n * @function\n * @param {number} min - Minimal bound.\n * @param {number} max - Maximal bound.\n * @returns {number} -\n */\nexport function randomi(min, max) {\n    return Math.floor(Math.random() * (max - min)) + min;\n};\n\n/**\n * Returns random number within the bounds.\n * @function\n * @param {number} min - Minimal bound.\n * @param {number} max - Maximal bound.\n * @returns {number} -\n */\nexport function random(min, max) {\n    return Math.random() * (max - min) + min;\n};\n\n/**\n * Converts degrees value to decimal.\n * @function\n * @param {number} d - Degrees.\n * @param {number} m - Minutes.\n * @param {number} s - Seconds.\n * @param {boolean} [p] - Positive flag. False - default.\n * @returns {number} -\n **/\nexport function degToDec(d, m, s, p) {\n    if (p)\n        return d + m / 60.0 + s / 3600.0;\n    else\n        return -d - m / 60.0 - s / 3600.0;\n};\n\n/**\n * The modulo operation that also works for negative dividends.\n * @function\n * @param {number} m - The dividend.\n * @param {number} n - The divisor.\n * @returns {number} The remainder.\n */\nexport function mod(m, n) {\n    return ((m % n) + n) % n;\n};\n\n/**\n * Returns an angle in the range 0 <= angle <= 2Pi which is equivalent to the provided angle.\n * @function\n * @param {number} a - Angle in radians\n * @returns {number} -\n */\nexport function zeroTwoPI(a) {\n    var mod = og.math.mod(a, og.math.TWO_PI);\n    if (Math.abs(mod) < og.math.EPSILON14 && Math.abs(a) > og.math.EPSILON14) {\n        return og.math.TWO_PI;\n    }\n    return mod;\n};\n\n/**\n * Returns 0.0 if x is smaller then edge and otherwise 1.0.\n * @function\n * @param {number} edge -\n * @param {number} x - Value to edge.\n * @returns {number} -\n */\nexport function step(edge, x) {\n    return x < edge ? 0.0 : 1.0;\n};\n\n/** \n * The fract function returns the fractional part of x, i.e. x minus floor(x).\n * @function\n * @param {number} x - Input value.\n * @returns {number} -\n */\nexport function frac(x) {\n    return x - Math.floor(x);\n};\n\n/**\n * Returns Math.log(x) / Math.log(2)\n * @function\n * @param {number} x - Input value.\n * @returns {number} -\n */\nexport function log2(x) {\n    return Math.log(x) / og.math.LOG2;\n};\n\n/**\n * Returns two power of n.\n * @function\n * @param {number} n - Power value.\n * @returns {number} -\n */\nexport function exp2(n) {\n    return Math.pow(2, n);\n};\n\n/**\n * Returns two power of integer n.\n * @function\n * @param {number} n - Integer power value.\n * @returns {number} -\n */\nexport function pow2i(n) {\n    return 2 << (n - 1);\n};\n\n/**\n * Returns a slice of linear interpolation t * (h1 - h0)\n * @param {number} t - A value that linearly interpolates between the h0 parameter and the h1 parameter.\n * @param {number} h1 - End value.\n * @param {number} h0 - Start value.\n * @returns {number} -\n */\nexport function slice(t, h1, h0) {\n    return t * (h1 - h0);\n};\n\n/**\n * Performs a linear interpolation.\n * @function\n * @param {number} t - A value that linearly interpolates between the h0 parameter and the h1 parameter.\n * @param {number} h1 - End value.\n * @param {number} h0 - Start value.\n * @returns {number} -\n */\nexport function lerp(t, h1, h0) {\n    return h0 + t * (h1 - h0);\n};\n\n/**\n * Performs a 3D bezier interpolation.\n * @function\n * @param {number} t - Interpolation value.\n * @param {og.Vec3} p0 - First control point.\n * @param {og.Vec3} p1 - Second control point.\n * @param {og.Vec3} p2 - Third control point.\n * @param {og.Vec3} p3 - Fourth control point.\n * @returns {og.Vec3} -\n */\nexport function bezier(t, p0, p1, p2, p3) {\n    var u = 1 - t;\n    var tt = t * t;\n    var uu = u * u;\n    var uuu = uu * u;\n    var ttt = tt * t;\n\n    return p0.scaleTo(uuu).addA(p1.scaleTo(3 * uu * t))\n        .addA(p2.scaleTo(3 * u * tt)).addA(p3.scaleTo(ttt));\n};\n\n/**\n * Clamp angle value within 360.\n * @function\n * @param {number} x - Input angle.\n * @returns {number} -\n */\nexport function rev(x) {\n    return x - Math.floor(x / 360.0) * 360.0;\n};\n\n/**\n * Clamp longitude within: -180 to +180 degrees.\n * @function\n * @param {number} lon - Longitude.\n * @returns {number} -\n */\nexport function norm_lon(lon) {\n    return lon > 180 ? ((lon + 180) % 360) - 180 :\n        lon < -180 ? ((lon - 180) % 360) + 180 : lon;\n};\n\n/**\n * Returns an angle in the range -Pi <= angle <= Pi which is equivalent to the provided angle.\n * @function\n * @param {number} a - Angle in radians.\n * @returns {number} -\n */\nexport function negativePItoPI(a) {\n    return og.math.zeroTwoPI(a + Math.PI) - Math.PI;\n};\n\n/**\n * Solve using iteration method and a fixed number of steps.\n * @function\n * @param {equationCallback} f - Equation. Used in Euler's equation(see og.orbit) solving.\n * @param {number} x0 - First approximation.\n * @param {number} maxIter - Maximum iterations.\n * @returns {number} -\n */\nexport function solve_iteration_fixed(f, x0, maxIter) {\n    var x = 0;\n    var x2 = x0;\n    for (var i = 0; i < maxIter; i++) {\n        x = x2;\n        x2 = f(x);\n    }\n    return x2;\n};\n\n/**\n * Solve using iteration; terminate when error is below err or the maximum\n * number of iterations is reached. Used in Euler's equation(see og.orbit) solving.\n * @function\n * @param {equationCallback} f - Equation.\n * @param {number} x0 - First approximation.\n * @param {number} err - Maximal accepted error value.\n * @param {number} maxIter - Maximum iterations.\n * @returns {number} -\n */\nexport function solve_iteration(f, x0, err, maxIter) {\n    maxIter = maxIter || 50;\n    var x = 0;\n    var x2 = x0;\n    for (var i = 0; i < maxIter; i++) {\n        x = x2;\n        x2 = f(x);\n        if (Math.abs(x2 - x) < err)\n            return x2;\n    }\n    return x2;\n};\n\n/**\n * Equation function.\n * @callback equationCallback\n * @param {number} x - Equation variable.\n */","/**\n * @module og/LonLat\n */\n\n'use strict';\n\nimport * as mercator from './mercator.js';\n\n\n\nconst HALF_PI = Math.PI * 0.5;\n\nconst PI_BY_180 = Math.PI / 180.0;\n\nconst INV_PI_BY_180 = 180.0 / Math.PI;\n\nconst INV_PI_BY_360 = INV_PI_BY_180 * 2.0;\n\nconst PI_BY_360 = Math.PI / 360.0;\n\nconst INV_PI_BY_180_HALF_PI = INV_PI_BY_180 * HALF_PI;\n\n\n/**\n * Represents a geographical point with a certain latitude, longitude and height.\n * @class\n * @param {number} [lon] - Longitude.\n * @param {number} [lat] - Latitude.\n * @param {number} [height] - Height over the surface.\n */\nconst LonLat = function (lon, lat, height) {\n\n    /**\n     * Longitude.\n     * @public\n     * @type {number}\n     */\n    this.lon = lon || 0;\n\n    /**\n     * Latitude.\n     * @public\n     * @type {number}\n     */\n    this.lat = lat || 0;\n\n    /**\n     * Height.\n     * @public\n     * @type {number}\n     */\n    this.height = height || 0;\n};\n\nLonLat.prototype.isZero = function () {\n    return this.lon === 0.0 && this.lat === 0.0 && this.height === 0.0;\n};\n\n/**\n * Creates coordinates array.\n * @static\n * @param{Array.<Array<number,number,number>>} arr - Coordinates array data.\n * @return{Array.<og.LonLat>} the same coordinates array but each element is LonLat instance.\n */\nLonLat.join = function (arr) {\n    var res = [];\n    for (var i = 0; i < arr.length; i++) {\n        var ai = arr[i];\n        res[i] = new LonLat(ai[0], ai[1], ai[2]);\n    }\n    return res;\n};\n\n/**\n * Creates an object by coordinate array.\n * @static\n * @param {Array.<number,number,number>} arr - Coordiante array, where first is longitude, second is latitude and third is a height.\n * @returns {og.LonLat} -\n */\nLonLat.createFromArray = function (arr) {\n    return new LonLat(arr[0], arr[1], arr[2]);\n};\n\n/**\n * Converts degrees to mercator coordinates.\n * @static\n * @param {number} lon - Degrees longitude.\n * @param {number} lat - Degrees latitude.\n * @param {number} [height] - Height.\n * @returns {og.LonLat} -\n */\nLonLat.forwardMercator = function (lon, lat, height) {\n    return new LonLat(lon * mercator.POLE_BY_180,\n        Math.log(Math.tan((90.0 + lat) * PI_BY_360)) * mercator.POLE_BY_PI,\n        height);\n};\n\n/**\n * Converts mercator to degrees coordinates.\n * @static\n * @param {number} x - Mercator longitude.\n * @param {number} y - Mercator latitude.\n * @param {number} [height] - Height.\n * @returns {og.LonLat} -\n */\nLonLat.inverseMercator = function (x, y, height) {\n    return new LonLat(x * mercator.INV_POLE_BY_180,\n        INV_PI_BY_360 * Math.atan(Math.exp(y * mercator.PI_BY_POLE)) - INV_PI_BY_180_HALF_PI,\n        height);\n};\n\n/**\n * Sets coordinates.\n * @public\n * @param {number} [lon] - Longitude.\n * @param {number} [lat] - Latitude.\n * @param {number} [height] - Height.\n * @returns {og.LonLat} -\n */\nLonLat.prototype.set = function (lon, lat, height) {\n    this.lon = lon || 0;\n    this.lat = lat || 0;\n    this.height = height || 0;\n    return this;\n};\n\n/**\n * Copy coordinates.\n * @public\n * @param {og.LonLat} [lonLat] - Coordinates to copy.\n * @returns {og.LonLat} -\n */\nLonLat.prototype.copy = function (lonLat) {\n    this.lon = lonLat.lon;\n    this.lat = lonLat.lat;\n    this.height = lonLat.height;\n    return this;\n};\n\n/**\n * Clone the coordiante.\n * @public\n * @returns {og.LonLat} -\n */\nLonLat.prototype.clone = function () {\n    return new LonLat(this.lon, this.lat, this.height);\n};\n\n/**\n * Converts to mercator coordinates.\n * @public\n * @returns {og.LonLat} -\n */\nLonLat.prototype.forwardMercator = function () {\n    return LonLat.forwardMercator(this.lon, this.lat, this.height);\n};\n\nLonLat.prototype.forwardMercatorEPS01 = function () {\n    var lat = this.lat;\n    if (lat > 89.9) {\n        lat = 89.9;\n    } else if (lat < -89.9) {\n        lat = -89.9;\n    }\n    return new LonLat(\n        this.lon * mercator.POLE_BY_180,\n        Math.log(Math.tan((90.0 + lat) * PI_BY_360)) * mercator.POLE_BY_PI);\n};\n\n\n/**\n * Converts from mercator coordinates.\n * @public\n * @returns {og.LonLat} -\n */\nLonLat.prototype.inverseMercator = function () {\n    return LonLat.inverseMercator(this.lon, this.lat, this.height);\n};\n\n/**\n * Compares coordinates.\n * @public\n * @param {og.LonLat} b - Coordinate to compare with.\n * @returns {boolean} -\n */\nLonLat.prototype.equal = function (b) {\n    if (b.height) {\n        return this.lon === b.lon && this.lat === b.lat && this.height === b.height;\n    } else {\n        return this.lon === b.lon && this.lat === b.lat;\n    }\n};\n\nexport { LonLat };","/**\n * @module og/mercator\n */\n\n'use strict';\n\nimport { Extent } from \"./Extent.js\";\nimport { LonLat } from './LonLat.js';\n\n/**\n * Mercator size.\n * @const\n * @type {number}\n */\nexport const POLE = 20037508.34;\n\nexport const POLE2 = POLE * 2.0;\n\nexport const PI_BY_POLE = Math.PI / POLE;\n\nexport const POLE_BY_PI = POLE / Math.PI;\n\nconst HALF_PI = Math.PI * 0.5;\n\nexport const POLE_BY_180 = POLE / 180.0;\n\nexport const INV_POLE_BY_180 = 180.0 / POLE;\n\nconst PI_BY_360 = Math.PI / 360.0;\n\nconst PI_BY_180 = Math.PI / 180.0;\n\nconst INV_PI_BY_180 = 180.0 / Math.PI;\n\n/**\n * Double mercator size.\n * @const\n * @type {number}\n */\nexport const POLE_DOUBLE = 2.0 * POLE;\n\n/**\n * One by mercator double size.\n * @const\n * @type {number}\n */\nexport const ONE_BY_POLE_DOUBLE = 1.0 / POLE_DOUBLE;\n\nexport function forward(lonLat) {\n    return new LonLat(lonLat.lon * POLE / 180.0, Math.log(Math.tan((90.0 + lonLat.lat) * PI_BY_360)) * POLE_BY_PI, lonLat.height);\n};\n\n/**\n * Converts degrees longitude to mercator coordinate.\n * @function\n * @param {number} lon - Degrees geodetic longitude.\n * @returns {number} -\n */\nexport function forward_lon(lon) {\n    return lon * POLE / 180.0;\n};\n\n/**\n * Converts degrees latitude to mercator coordinate.\n * @function\n * @param {number} lat - Degrees geodetic latitude.\n * @returns {number} -\n */\nexport function forward_lat(lat) {\n    return Math.log(Math.tan((90.0 + lat) * PI_BY_360)) * POLE_BY_PI;\n};\n\n/**\n * Converts mercator longitude to degrees coordinate.\n * @function\n * @param {number} lon - Mercator longitude.\n * @returns {number} -\n */\nexport function inverse_lon(lon) {\n    return 180 * lon / POLE;\n};\n\n/**\n * Converts mercator latitude to degrees coordinate.\n * @function\n * @param {number} lon - Mercator latitude.\n * @returns {number} -\n */\nexport function inverse_lat(lat) {\n    return INV_PI_BY_180 * (2.0 * Math.atan(Math.exp(lat * PI_BY_POLE)) - HALF_PI);\n};\n\n/**\n * Returns mercator map tile grid horizontal coordinate index by geodetic \n * longitude and zoom level. Where top left corner of the grid is 0 coordinate index.\n * @function\n * @param {number} lon - Geodetic degrees longitude.\n * @param {number} zoom - Zoom level.\n * @returns {number}\n */\nexport function getTileX(lon, zoom) {\n    return Math.floor((lon + 180) / 360.0 * Math.pow(2, zoom));\n};\n\n/**\n * Returns mercator map tile grid vertical coordinate index by geodetic \n * latitude and zoom level. Where top left corner of the grid is 0 coordinate index.\n * @function\n * @param {number} lat - Geodetic degrees latitude.\n * @param {number} zoom - Zoom level.\n * @returns {number}\n */\nexport function getTileY(lat, zoom) {\n    return Math.floor((1.0 - Math.log(Math.tan(lat * PI_BY_180) + 1.0 / Math.cos(lat * PI_BY_180)) / Math.PI) * 0.5 * Math.pow(2, zoom));\n};\n\n/**\n * Converts geodetic coordinate array to mercator coordinate array.\n * @function\n * @param {Array.<og.LonLat>} lonLatArr - LonLat array to convert.\n * @returns {Array.<og.LonLat>}\n */\nexport function forwardArray(lonlatArr) {\n    var res = [];\n    for (var i = 0; i < lonlatArr.length; i++) {\n        res.push(lonlatArr[i].forwardMercator());\n    }\n    return res;\n};\n\nexport function getTileExtent(x, y, z) {\n    let size = POLE2 / Math.pow(2, z),\n        sw = new LonLat(-POLE + x * size, POLE - y * size - size);\n    return new Extent(sw, new LonLat(sw.lon + size, sw.lat + size));\n};\n\n/**\n * Max mercator latitude.\n * @const\n * @type {number}\n */\nexport const MAX_LAT = inverse_lat(POLE);\n\n/**\n * Min mercator latitude.\n * @const\n * @type {number}\n */\nexport const MIN_LAT = -MAX_LAT;\n","/**\n * @module og/math/Vec4\n */\n\n'use strict';\n\nimport { Vec3 } from './Vec3.js';\n\n/**\n * Class represents a 4d vector.\n * @class\n * @param {number} [x] - First value.\n * @param {number} [y] - Second value.\n * @param {number} [z] - Third value.\n * @param {number} [w] - Fourth value.\n */\nconst Vec4 = function (x, y, z, w) {\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.x = x || 0.0;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.y = y || 0.0;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.z = z || 0.0;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.w = w || 0.0;\n};\n\n/**\n * Identity vector [0,0,0,1].\n * @const\n * @type {og.math.Vec4}\n */\nVec4.identity = new Vec4(0, 0, 0, 1);\n\n/**\n * Vector 4d object creator.\n * @function\n * @param {number} [x] - First cvalue.\n * @param {number} [y] - Second value.\n * @param {number} [z] - Third value.\n * @param {number} [w] - Fourth value.\n * @returns {og.math.Vec4}\n */\nexport function vec4(x, y, z, w) {\n    return new og.math.Vec4(x, y, z, w);\n};\n\n/**\n * Creates 4d vector from array.\n * @function\n * @param {Array.<number,number,number,number>}\n * @returns {og.math.Vec4}\n */\nVec4.fromVec = function (arr) {\n    return new Vec4(arr[0], arr[1], arr[2], arr[3]);\n};\n\n/**\n * Converts to 3d vector, without fourth value.\n * @public\n * @returns {og.Vec3}\n */\nVec4.prototype.toVec3 = function () {\n    return new Vec3(this.x, this.y, this.z);\n};\n\n/**\n * Returns clone vector.\n * @public\n * @returns {og.math.Vec4}\n */\nVec4.prototype.clone = function (v) {\n    return new Vec4(this.x, this.y, this.z, this.w);\n};\n\n/**\n * Compares with vector. Returns true if it equals another.\n * @public\n * @param {og.math.Vec4} p - Vector to compare.\n * @returns {boolean}\n */\nVec4.prototype.equal = function (v) {\n    return this.x === v.x && this.y === v.y && this.z === v.z && this.w === v.w;\n};\n\n/**\n * Copy input vector's values.\n * @param {og.math.Vec4} v - Vector to copy.\n * @returns {og.math.Vec4}\n */\nVec4.prototype.copy = function (v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    this.w = v.w;\n    return this;\n};\n\n/**\n * Converts vector to a number array.\n * @public\n * @returns {Array.<number,number,number,number>}\n * @deprecated\n */\nVec4.prototype.toVec = function () {\n    return [this.x, this.y, this.z, this.w];\n};\n\n\n/**\n * Converts vector to a number array.\n * @public\n * @returns {Array.<number,number,number,number>}\n */\nVec4.prototype.toArray = function () {\n    return [this.x, this.y, this.z, this.w];\n};\n\n/**\n * Sets vector's values.\n * @public\n * @param {number} x - Value X.\n * @param {number} y - Value Y.\n * @param {number} z - Value Z.\n * @param {number} w - Value W.\n * @returns {og.math.Vec4}\n */\nVec4.prototype.set = function (x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n};\n\n/**\n * Adds vector to the current.\n * @public\n * @param {og.math.Vec4}\n * @returns {og.math.Vec4}\n */\nVec4.prototype.addA = function (v) {\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    this.w += v.w;\n    return this;\n};\n\n/**\n * Subtract vector from the current.\n * @public\n * @param {og.math.Vec4} v - Subtract vector.\n * @returns {og.math.Vec4}\n */\nVec4.prototype.subA = function (v) {\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    this.w -= v.w;\n    return this;\n};\n\n/**\n * Scale current vector.\n * @public\n * @param {number} scale - Scale value.\n * @returns {og.math.Vec4}\n */\nVec4.prototype.scale = function (scale) {\n    this.x *= scale;\n    this.y *= scale;\n    this.z *= scale;\n    this.w *= scale;\n    return this;\n};\n\n/**\n * Makes vector affinity. Thereby fourh component becomes to 1.0.\n * @public\n * @returns {og.math.Vec4}\n */\nVec4.prototype.affinity = function () {\n    var iw = 1 / this.w;\n    this.x *= iw;\n    this.y *= iw;\n    this.z *= iw;\n    this.w = 1.0;\n    return this;\n};\n\n/**\n * Scale current vector to another instance.\n * @public\n * @param {number} scale - Scale value.\n * @returns {og.Vec3}\n */\nVec4.prototype.scaleTo = function (scale) {\n    return new Vec4(this.x * scale, this.y * scale, this.z * scale, this.w * scale);\n};\n\n/**\n * Vector's edge function that returns vector where each component is 0.0 if it's smaller then edge and otherwise 1.0.\n * @public\n * @returns {og.math.Vec4}\n */\nVec4.prototype.getStep = function (edge) {\n    return new Vec4(\n        this.x < edge ? 0.0 : 1.0,\n        this.y < edge ? 0.0 : 1.0,\n        this.z < edge ? 0.0 : 1.0,\n        this.w < edge ? 0.0 : 1.0\n    );\n};\n\n/**\n * The vector fract function returns the vector of fractional parts of each value, i.e. x minus floor(x).\n * @public\n * @returns {og.math.Vec4}\n */\nVec4.prototype.getFrac = function (v) {\n    return new Vec4(\n        og.math.frac(v.x),\n        og.math.frac(v.y),\n        og.math.frac(v.z),\n        og.math.frac(v.w)\n    );\n};\n\n/**\n * Gets vectors dot production.\n * @public\n * @param {og.math.Vec4} v - Another vector.\n * @returns {number} - Dot product.\n */\nVec4.prototype.dot = function (v) {\n    return v.x * this.x + v.y * this.y + v.z * this.z + v.w * this.w;\n};\n\nexport { Vec4 };","/**\n * @module og/math/Mat3\n */\n\n'use strict';\n\nimport * as math from '../math.js';\nimport { Mat4 } from './Mat4.js';\nimport { Vec3 } from './Vec3.js';\n\n/**\n * Class represents a 3x3 matrix.\n * @class\n */\nconst Mat3 = function () {\n    /**\n     * A 3x3 matrix, indexable as a column-major order array.\n     * @public\n     * @type {Array.<number>}\n     */\n    this._m = new Array(9);\n};\n\n/**\n * Mat3 factory.\n * @static\n * @return {og.Mat3}\n */\n\nexport function mat3() {\n    return new Mat3();\n};\n\n/**\n * Sets column-major order array matrix.\n * @public\n * @param {Array.<number>} m - Matrix array.\n * @returns {og.Mat3}\n */\nMat3.prototype.set = function (m) {\n    this._m[0] = m[0];\n    this._m[1] = m[1];\n    this._m[2] = m[2];\n    this._m[3] = m[3];\n    this._m[4] = m[4];\n    this._m[5] = m[5];\n    this._m[6] = m[6];\n    this._m[7] = m[7];\n    this._m[8] = m[8];\n    return this;\n};\n\n/**\n * Duplicates a Mat3 instance.\n * @public\n * @returns {og.Mat3}\n */\nMat3.prototype.clone = function () {\n    var res = new Mat3();\n    res.set(this);\n    return res;\n};\n\n/**\n * Copy matrix.\n * @public\n * @param {og.Mat3} a - Matrix to copy.\n * @returns {og.Mat3}\n */\nMat3.prototype.copy = function (a) {\n    return this.set(a._m);\n};\n\n/**\n * Creates trasposed matrix from the current.\n * @public\n * @returns {og.Mat3}\n */\nMat3.prototype.transposeTo = function () {\n    var res = new Mat3();\n    var m = this._m;\n    res._m[0] = m[0]; res._m[1] = m[3]; res._m[2] = m[6];\n    res._m[3] = m[1]; res._m[4] = m[4]; res._m[5] = m[7];\n    res._m[6] = m[2]; res._m[7] = m[5]; res._m[8] = m[8];\n    return res;\n};\n\n/**\n * Sets matrix to identity.\n * @public\n * @returns {og.Mat3}\n */\nMat3.prototype.setIdentity = function () {\n    this._m[0] = 1; this._m[1] = 0; this._m[2] = 0;\n    this._m[3] = 0; this._m[4] = 1; this._m[5] = 0;\n    this._m[6] = 0; this._m[7] = 0; this._m[8] = 1;\n    return this;\n};\n\n/**\n * Multiply to 3d vector.\n * @public\n * @params {og.Vec3} p - 3d vector.\n * @returns {og.Vec3}\n */\nMat3.prototype.mulVec = function (p) {\n    var d = p.x, e = p.y, g = p.z;\n    var m = this._m;\n    return new Vec3(\n        m[0] * d + m[3] * e + m[6] * g,\n        m[1] * d + m[4] * e + m[7] * g,\n        m[2] * d + m[5] * e + m[8] * g\n    );\n};\n\n/**\n * Converts to 4x4 matrix.\n * @public\n * @returns {og.Mat4}\n */\nMat3.prototype.toMatrix4 = function () {\n    var res = new Mat4();\n    var b = res._m;\n    var a = this._m;\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = 0;\n    b[4] = a[3];\n    b[5] = a[4];\n    b[6] = a[5];\n    b[7] = 0;\n    b[8] = a[6];\n    b[9] = a[7];\n    b[10] = a[8];\n    b[11] = 0;\n    b[12] = 0;\n    b[13] = 0;\n    b[14] = 0;\n    b[15] = 1;\n    return res;\n};\n\nexport { Mat3 };","'use strict';\n\nimport { Mat3 } from './Mat3.js';\nimport { Quat } from './Quat.js';\nimport { Vec3 } from './Vec3.js';\nimport { Vec4 } from './Vec4.js';\n\n/**\n * Class represents a 4x4 matrix.\n * @class\n */\nconst Mat4 = function () {\n    /**\n     * A 4x4 matrix, indexable as a column-major order array.\n     * @public\n     * @type {Array.<number>}\n     */\n    this._m = new Array(16);\n\n    /**\n     * Projection frustum left value.\n     * @public\n     */\n    this.left;\n    /**\n     * Projection frustum right value.\n     * @public\n     */\n    this.right;\n    /**\n     * Projection frustum bottom value.\n     * @public\n     */\n    this.bottom;\n    /**\n     * Projection frustum top value.\n     * @public\n     */\n    this.top;\n    /**\n     * Projection frustum near value.\n     * @public\n     */\n    this.near;\n    /**\n     * Projection frustum far value.\n     * @public\n     */\n    this.far;\n};\n\n/**\n * Mat4 factory.\n * @static\n * @returns {og.Mat4} -\n */\nexport function mat4() {\n    return new og.Mat4();\n};\n\n/**\n * Returns identity matrix instance.\n * @static\n * @returns {og.Mat4} -\n */\nMat4.identity = function () {\n    var res = new Mat4();\n    res._m[0] = 1; res._m[1] = 0; res._m[2] = 0; res._m[3] = 0;\n    res._m[4] = 0; res._m[5] = 1; res._m[6] = 0; res._m[7] = 0;\n    res._m[8] = 0; res._m[9] = 0; res._m[10] = 1; res._m[11] = 0;\n    res._m[12] = 0; res._m[13] = 0; res._m[14] = 0; res._m[15] = 1;\n    return res;\n};\n\n/**\n * Sets column-major order array matrix.\n * @public\n * @param {Array.<number>} m - Matrix array.\n * @returns {og.Mat4} -\n */\nMat4.prototype.set = function (m) {\n    this._m[0] = m[0];\n    this._m[1] = m[1];\n    this._m[2] = m[2];\n    this._m[3] = m[3];\n    this._m[4] = m[4];\n    this._m[5] = m[5];\n    this._m[6] = m[6];\n    this._m[7] = m[7];\n    this._m[8] = m[8];\n    this._m[9] = m[9];\n    this._m[10] = m[10];\n    this._m[11] = m[11];\n    this._m[12] = m[12];\n    this._m[13] = m[13];\n    this._m[14] = m[14];\n    this._m[15] = m[15];\n    return this;\n};\n\n/**\n * Duplicates a Matrix3 instance.\n * @public\n * @returns {og.Mat4} -\n */\nMat4.prototype.clone = function () {\n    var res = new Mat4();\n    res.set(this);\n    return res;\n};\n\n/**\n * Copy matrix.\n * @public\n * @param {og.Mat3} a - Matrix to copy.\n */\nMat4.prototype.copy = function (a) {\n    this.set(a._m);\n};\n\n/**\n * Converts to 3x3 matrix.\n * @public\n * @returns {og.Mat3} -\n */\nMat4.prototype.toMatrix3 = function () {\n    var res = new Mat3();\n    var a = this._m,\n        b = res._m;\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = a[4];\n    b[4] = a[5];\n    b[5] = a[6];\n    b[6] = a[8];\n    b[7] = a[9];\n    b[8] = a[10];\n    return res;\n};\n\n/**\n * Multiply to 3d vector.\n * @public\n * @param {og.Vec3} p - 3d vector.\n * @returns {og.Vec3} -\n */\nMat4.prototype.mulVec3 = function (p) {\n    var d = p.x, e = p.y, g = p.z;\n    return new Vec3(\n        this._m[0] * d + this._m[4] * e + this._m[8] * g + this._m[12],\n        this._m[1] * d + this._m[5] * e + this._m[9] * g + this._m[13],\n        this._m[2] * d + this._m[6] * e + this._m[10] * g + this._m[14]\n    );\n};\n\n/**\n * Multiply to 4d vector.\n * @public\n * @param {og.Vec4} p - 4d vector.\n * @returns {og.Vec4} -\n */\nMat4.prototype.mulVec4 = function (p) {\n    var d = p.x, e = p.y, g = p.z, f = p.w;\n    return new Vec4(\n        this._m[0] * d + this._m[4] * e + this._m[8] * g + this._m[12] * f,\n        this._m[1] * d + this._m[5] * e + this._m[9] * g + this._m[13] * f,\n        this._m[2] * d + this._m[6] * e + this._m[10] * g + this._m[14] * f,\n        this._m[3] * d + this._m[7] * e + this._m[11] * g + this._m[15] * f\n    );\n};\n\n/**\n * Creates an inversed 3x3 matrix of the current.\n * @public\n * @returns {og.Mat3} -\n */\nMat4.prototype.toInverseMatrix3 = function () {\n    var a = this._m;\n    var c = a[0], d = a[1], e = a[2],\n        g = a[4], f = a[5], h = a[6],\n        i = a[8], j = a[9], k = a[10],\n        l = k * f - h * j,\n        o = -k * g + h * i,\n        m = j * g - f * i,\n        n = c * l + d * o + e * m;\n    if (!n)\n        return null;\n    n = 1 / n;\n\n    var res = new Mat3();\n    res._m[0] = l * n;\n    res._m[1] = (-k * d + e * j) * n;\n    res._m[2] = (h * d - e * f) * n;\n    res._m[3] = o * n;\n    res._m[4] = (k * c - e * i) * n;\n    res._m[5] = (-h * c + e * g) * n;\n    res._m[6] = m * n;\n    res._m[7] = (-j * c + d * i) * n;\n    res._m[8] = (f * c - d * g) * n;\n    return res;\n};\n\n/**\n * Creates an inversed matrix of the current.\n * @public\n * @returns {og.Mat4} -\n */\nMat4.prototype.inverseTo = function () {\n    var c = this._m[0], d = this._m[1], e = this._m[2], g = this._m[3],\n        f = this._m[4], h = this._m[5], i = this._m[6], j = this._m[7],\n        k = this._m[8], l = this._m[9], o = this._m[10], m = this._m[11],\n        n = this._m[12], p = this._m[13], r = this._m[14], s = this._m[15],\n        A = c * h - d * f,\n        B = c * i - e * f,\n        t = c * j - g * f,\n        u = d * i - e * h,\n        v = d * j - g * h,\n        w = e * j - g * i,\n        x = k * p - l * n,\n        y = k * r - o * n,\n        z = k * s - m * n,\n        C = l * r - o * p,\n        D = l * s - m * p,\n        E = o * s - m * r,\n        q = 1 / (A * E - B * D + t * C + u * z - v * y + w * x),\n        res = new Mat4();\n\n    res._m[0] = (h * E - i * D + j * C) * q; res._m[1] = (-d * E + e * D - g * C) * q; res._m[2] = (p * w - r * v + s * u) * q; res._m[3] = (-l * w + o * v - m * u) * q;\n    res._m[4] = (-f * E + i * z - j * y) * q; res._m[5] = (c * E - e * z + g * y) * q; res._m[6] = (-n * w + r * t - s * B) * q; res._m[7] = (k * w - o * t + m * B) * q;\n    res._m[8] = (f * D - h * z + j * x) * q; res._m[9] = (-c * D + d * z - g * x) * q; res._m[10] = (n * v - p * t + s * A) * q; res._m[11] = (-k * v + l * t - m * A) * q;\n    res._m[12] = (-f * C + h * y - i * x) * q; res._m[13] = (c * C - d * y + e * x) * q; res._m[14] = (-n * u + p * B - r * A) * q; res._m[15] = (k * u - l * B + o * A) * q;\n    return res;\n};\n\n/**\n * Creates a trasposed matrix of the current.\n * @public\n * @returns {og.Mat4} -\n */\nMat4.prototype.transposeTo = function () {\n    var res = new Mat4();\n    res._m[0] = this._m[0]; res._m[1] = this._m[4]; res._m[2] = this._m[8]; res._m[3] = this._m[12];\n    res._m[4] = this._m[1]; res._m[5] = this._m[5]; res._m[6] = this._m[9]; res._m[7] = this._m[13];\n    res._m[8] = this._m[2]; res._m[9] = this._m[6]; res._m[10] = this._m[10]; res._m[11] = this._m[14];\n    res._m[12] = this._m[3]; res._m[13] = this._m[7]; res._m[14] = this._m[11]; res._m[15] = this._m[15];\n    return res;\n};\n\n/**\n * Sets matrix to identity.\n * @public\n * @returns {og.Mat4} -\n */\nMat4.prototype.setIdentity = function () {\n    this._m[0] = 1; this._m[1] = 0; this._m[2] = 0; this._m[3] = 0;\n    this._m[4] = 0; this._m[5] = 1; this._m[6] = 0; this._m[7] = 0;\n    this._m[8] = 0; this._m[9] = 0; this._m[10] = 1; this._m[11] = 0;\n    this._m[12] = 0; this._m[13] = 0; this._m[14] = 0; this._m[15] = 1;\n    return this;\n};\n\n/**\n * Computes the product of two matrices.\n * @public\n * @param {og.Mat4} mx - Matrix to multiply.\n * @returns {og.Mat4} -\n */\nMat4.prototype.mul = function (mx) {\n    let d = this._m[0], e = this._m[1], g = this._m[2], f = this._m[3],\n        h = this._m[4], i = this._m[5], j = this._m[6], k = this._m[7],\n        l = this._m[8], o = this._m[9], m = this._m[10], n = this._m[11],\n        p = this._m[12], r = this._m[13], s = this._m[14], a = this._m[15];\n\n    let A = mx._m[0], B = mx._m[1], t = mx._m[2], u = mx._m[3],\n        v = mx._m[4], w = mx._m[5], x = mx._m[6], y = mx._m[7],\n        z = mx._m[8], C = mx._m[9], D = mx._m[10], E = mx._m[11],\n        q = mx._m[12], F = mx._m[13], G = mx._m[14], b = mx._m[15];\n\n    var res = new Mat4();\n    res._m[0] = A * d + B * h + t * l + u * p; res._m[1] = A * e + B * i + t * o + u * r; res._m[2] = A * g + B * j + t * m + u * s; res._m[3] = A * f + B * k + t * n + u * a;\n    res._m[4] = v * d + w * h + x * l + y * p; res._m[5] = v * e + w * i + x * o + y * r; res._m[6] = v * g + w * j + x * m + y * s; res._m[7] = v * f + w * k + x * n + y * a;\n    res._m[8] = z * d + C * h + D * l + E * p; res._m[9] = z * e + C * i + D * o + E * r; res._m[10] = z * g + C * j + D * m + E * s; res._m[11] = z * f + C * k + D * n + E * a;\n    res._m[12] = q * d + F * h + G * l + b * p; res._m[13] = q * e + F * i + G * o + b * r; res._m[14] = q * g + F * j + G * m + b * s; res._m[15] = q * f + F * k + G * n + b * a;\n    return res;\n};\n\n/**\n * Add translation vector to the current matrix.\n * @public\n * @param {og.Vec3} v - Translate vector.\n * @returns {og.Mat4} -\n */\nMat4.prototype.translate = function (v) {\n    var d = v.x, e = v.y, b = v.z;\n    var a = this._m;\n    a[12] = a[0] * d + a[4] * e + a[8] * b + a[12];\n    a[13] = a[1] * d + a[5] * e + a[9] * b + a[13];\n    a[14] = a[2] * d + a[6] * e + a[10] * b + a[14];\n    a[15] = a[3] * d + a[7] * e + a[11] * b + a[15];\n    return this;\n};\n\n/**\n * Sets translation matrix to the position.\n * @public\n * @param {og.Vec3} v - Translate to position.\n * @returns {og.Mat4} -\n */\nMat4.prototype.translateToPosition = function (v) {\n    var a = this._m;\n    a[12] = v.x;\n    a[13] = v.y;\n    a[14] = v.z;\n    return this;\n};\n\n/**\n * Rotate currrent matrix around the aligned axis and angle.\n * @public\n * @param {og.Vec3} u - Aligned axis.\n * @param {number} angle - Aligned axis angle in radians.\n * @returns {og.Mat4} -\n * @todo: OPTIMIZE: reveal multiplication\n */\nMat4.prototype.rotate = function (u, angle) {\n    var c = Math.cos(angle),\n        s = Math.sin(angle);\n    var rot = new Mat4();\n    var mx = rot._m;\n    mx[0] = c + (1 - c) * u.x * u.x; mx[1] = (1 - c) * u.y * u.x - s * u.z; mx[2] = (1 - c) * u.z * u.x + s * u.y; mx[3] = 0;\n    mx[4] = (1 - c) * u.x * u.y + s * u.z; mx[5] = c + (1 - c) * u.y * u.y; mx[6] = (1 - c) * u.z * u.y - s * u.x; mx[7] = 0;\n    mx[8] = (1 - c) * u.x * u.z - s * u.y; mx[9] = (1 - c) * u.y * u.z + s * u.x; mx[10] = c + (1 - c) * u.z * u.z; mx[11] = 0;\n    mx[12] = 0; mx[13] = 0; mx[14] = 0; mx[15] = 1;\n    return this.mul(rot);\n};\n\n/**\n * Sets current rotation matrix around the aligned axis and angle.\n * @public\n * @param {og.Vec3} u - Aligned axis.\n * @param {number} angle - Aligned axis angle in radians.\n * @returns {og.Mat4} -\n */\nMat4.prototype.setRotation = function (u, angle) {\n    var c = Math.cos(angle),\n        s = Math.sin(angle);\n    var mx = this._m;\n    mx[0] = c + (1 - c) * u.x * u.x; mx[1] = (1 - c) * u.y * u.x - s * u.z; mx[2] = (1 - c) * u.z * u.x + s * u.y; mx[3] = 0;\n    mx[4] = (1 - c) * u.x * u.y + s * u.z; mx[5] = c + (1 - c) * u.y * u.y; mx[6] = (1 - c) * u.z * u.y - s * u.x; mx[7] = 0;\n    mx[8] = (1 - c) * u.x * u.z - s * u.y; mx[9] = (1 - c) * u.y * u.z + s * u.x; mx[10] = c + (1 - c) * u.z * u.z; mx[11] = 0;\n    mx[12] = 0; mx[13] = 0; mx[14] = 0; mx[15] = 1;\n    return this;\n};\n\n/**\n * Gets the rotation matrix from one vector to another.\n * @public\n * @param {og.Vec3} a - Firtst vector.\n * @param {og.Vec3} b - Second vector.\n * @returns {og.Mat4} -\n */\nMat4.prototype.rotateBetweenVectors = function (a, b) {\n    var q = Quat.getRotationBetweenVectors(a, b);\n    return q.getMat4();\n};\n\n/**\n * Scale current matrix to the vector values.\n * @public\n * @param {og.Vec3} v - Scale vector.\n * @returns {og.Mat4} -\n */\nMat4.prototype.scale = function (v) {\n    var mx = this._m;\n    mx[0] = mx[0] * v.x; mx[1] = mx[1] * v.x; mx[2] = mx[2] * v.x; mx[3] = mx[3] * v.x;\n    mx[4] = mx[4] * v.y; mx[5] = mx[5] * v.y; mx[6] = mx[6] * v.y; mx[7] = mx[7] * v.y;\n    mx[8] = mx[8] * v.z; mx[9] = mx[9] * v.z; mx[10] = mx[10] * v.z; mx[11] = mx[11] * v.z;\n    mx[12] = mx[12]; mx[13] = mx[13]; mx[14] = mx[14]; mx[15] = mx[15];\n    return this;\n};\n\n/**\n * Sets perspective projection matrix frustum values.\n * @public\n * @param {number} left -\n * @param {number} right -\n * @param {number} bottom -\n * @param {number} top -\n * @param {number} near -\n * @param {number} far -\n * @returns {og.Mat4} -\n */\nMat4.prototype.setFrustum = function (left, right, bottom, top, near, far) {\n\n    //this.left = left;\n    //this.right = right;\n    //this.bottom = bottom;\n    //this.top = top;\n    //this.near = near;\n    //this.far = far;\n\n    var h = right - left, i = top - bottom, j = far - near;\n    this._m[0] = near * 2 / h;\n    this._m[1] = 0;\n    this._m[2] = 0;\n    this._m[3] = 0;\n    this._m[4] = 0;\n    this._m[5] = near * 2 / i;\n    this._m[6] = 0;\n    this._m[7] = 0;\n    this._m[8] = (right + left) / h;\n    this._m[9] = (top + bottom) / i;\n    this._m[10] = -(far + near) / j;\n    this._m[11] = -1;\n    this._m[12] = 0;\n    this._m[13] = 0;\n    this._m[14] = -(far * near * 2) / j;\n    this._m[15] = 0;\n    return this;\n};\n\n/**\n * Creates current percpective projection matrix.\n * @public\n * @param {number} angle - View angle in degrees.\n * @param {number} aspect - Screen aspect ratio.\n * @param {number} near - Near clip plane.\n * @param {number} far - Far clip plane.\n * @returns {og.Mat4} -\n */\nMat4.prototype.setPerspective = function (angle, aspect, near, far) {\n    angle = near * Math.tan(angle * Math.PI / 360);\n    aspect = angle * aspect;\n    return this.setFrustum(-aspect, aspect, -angle, angle, near, far)\n};\n\n/**\n * Creates current orthographic projection matrix.\n * @public\n * @param {number} left -\n * @param {number} right -\n * @param {number} bottom -\n * @param {number} top -\n * @param {number} near -\n * @param {number} far -\n * @return {og.Mat4} -\n */\nMat4.prototype.setOrtho = function (left, right, bottom, top, near, far) {\n\n    //this.left = left;\n    //this.right = right;\n    //this.bottom = bottom;\n    //this.top = top;\n    //this.near = near;\n    //this.far = far;\n\n    var lr = 1.0 / (left - right),\n        bt = 1.0 / (bottom - top),\n        nf = 1.0 / (near - far),\n        m = this._m;\n\n    m[0] = -2.0 * lr;\n    m[1] = 0;\n    m[2] = 0;\n    m[3] = 0;\n    m[4] = 0;\n    m[5] = -2.0 * bt;\n    m[6] = 0;\n    m[7] = 0;\n    m[8] = 0;\n    m[9] = 0;\n    m[10] = 2.0 * nf;\n    m[11] = 0;\n    m[12] = (left + right) * lr;\n    m[13] = (top + bottom) * bt;\n    m[14] = (far + near) * nf;\n    m[15] = 1.0;\n    return this;\n};\n\n/**\n * Sets current rotation matrix by euler's angles.\n * @public\n * @param {number} ax - Rotation angle in radians arond X axis.\n * @param {number} ay - Rotation angle in radians arond Y axis.\n * @param {number} az - Rotation angle in radians arond Z axis.\n * @returns {og.Mat4} -\n */\nMat4.prototype.eulerToMatrix = function (ax, ay, az) {\n    var a = Math.cos(ax),\n        b = Math.sin(ax),\n        c = Math.cos(ay),\n        d = Math.sin(ay),\n        e = Math.cos(az),\n        f = Math.sin(az);\n\n    var ad = a * d,\n        bd = b * d;\n\n    var mat = this._m;\n\n    mat[0] = c * e;\n    mat[1] = -c * f;\n    mat[2] = -d;\n    mat[4] = -bd * e + a * f;\n    mat[5] = bd * f + a * e;\n    mat[6] = -b * c;\n    mat[8] = ad * e + b * f;\n    mat[9] = -ad * f + b * e;\n    mat[10] = a * c;\n    mat[3] = mat[7] = mat[11] = mat[12] = mat[13] = mat[14] = 0;\n    mat[15] = 1;\n\n    return this;\n};\n\nexport { Mat4 };\n\n","'use strict';\n\nimport * as math from '../math.js';\nimport { Mat4 } from './Mat4.js';\nimport { Mat3 } from './Mat3.js';\nimport { Vec3 } from './Vec3.js';\n\n/**\n * A set of 4-dimensional coordinates used to represent rotation in 3-dimensional space.\n * @constructor\n * @param {Number} [x=0.0] The X component.\n * @param {Number} [y=0.0] The Y component.\n * @param {Number} [z=0.0] The Z component.\n * @param {Number} [w=0.0] The W component.\n */\nconst Quat = function (x, y, z, w) {\n\n    /**\n     * The X component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    this.x = x || 0.0;\n\n    /**\n     * The Y component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    this.y = y || 0.0;\n\n    /**\n     * The Z component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    this.z = z || 0.0;\n\n    /**\n     * The W component.\n     * @public\n     * @type {Number}\n     * @default 0.0\n     */\n    this.w = w || 0.0;\n};\n\n/**\n * Creates Quat instance.\n * @function\n * @param {Number} [x=0.0] The X component.\n * @param {Number} [y=0.0] The Y component.\n * @param {Number} [z=0.0] The Z component.\n * @param {Number} [w=0.0] The W component.\n * @returns {og.Quat} -\n */\nexport function quat(x, y, z, w) {\n    return new Quat(x, y, z, w);\n};\n\n/**\n * Identity Quat.\n * @const\n * @type {og.Quat}\n */\nQuat.IDENTITY = new Quat(0.0, 0.0, 0.0, 1.0);\n\n/**\n * Returns a Quat represents rotation around X axis.\n * @static\n * @param {number} a - The angle in radians to rotate around the axis.\n * @returns {og.Quat} -\n */\nQuat.xRotation = function (a) {\n    a *= 0.5;\n    return new Quat(Math.sin(a), 0.0, 0.0, Math.cos(a));\n};\n\n/**\n * Returns a Quat represents rotation around Y axis.\n * @static\n * @param {number} a - The angle in radians to rotate around the axis.\n * @returns {og.Quat} -\n */\nQuat.yRotation = function (a) {\n    a *= 0.5;\n    return new Quat(0.0, Math.sin(a), 0.0, Math.cos(a));\n};\n\n/**\n * Returns a Quat represents rotation around Z axis.\n * @static\n * @param {number} a - The angle in radians to rotate around the axis.\n * @returns {og.Quat} -\n */\nQuat.zRotation = function (a) {\n    a *= 0.5;\n    return new Quat(0.0, 0.0, Math.sin(a), Math.cos(a));\n};\n\n/**\n * Computes a Quat representing a rotation around an axis.\n * @static\n * @param {og.Vec3} axis - The axis of rotation.\n * @param {number} [angle=0.0] The angle in radians to rotate around the axis.\n * @returns {og.Quat} -\n */\nQuat.axisAngleToQuat = function (axis, angle) {\n    angle = angle || 0.0;\n    var v = axis.normal();\n    var half_angle = angle * 0.5;\n    var sin_a = Math.sin(half_angle);\n    return new Quat(\n        v.x * sin_a,\n        v.y * sin_a,\n        v.z * sin_a,\n        Math.cos(half_angle));\n};\n\n/**\n * Computes a rotation from the given heading and up vector.\n * @static\n * @param {og.Vec3} forward - Heading target coordinates.\n * @param {og.Vec3} up - Up vector.\n * @returns {og.Quat} -\n */\nQuat.getLookRotation = function (forward, up) {\n\n    var f = forward.normal().negate();\n    var s = (up.cross(f)).normalize();\n    var u = f.cross(s);\n\n    var z = 1.0 + s.x + u.y + f.z;\n\n    if (z > 0.000001) {\n        let fd = 1.0 / (2.0 * Math.sqrt(z));\n        return new Quat(\n            (f.y - u.z) * fd,\n            (s.z - f.x) * fd,\n            (u.x - s.y) * fd,\n            0.25 / fd\n        );\n    }\n\n    if (s.x > u.y && s.x > f.z) {\n        let fd = 1.0 / (2.0 * Math.sqrt(1.0 + s.x - u.y - f.z));\n        return new Quat(\n            0.25 / fd,\n            (u.x + s.y) * fd,\n            (s.z + f.x) * fd,\n            (f.y - u.z) * fd\n        );\n    }\n\n    if (u.y > f.z) {\n        let fd = 1.0 / (2.0 * Math.sqrt(1.0 + u.y - s.x - f.z));\n        return new Quat(\n            (u.x + s.y) * fd,\n            0.25 / fd,\n            (f.y + u.z) * fd,\n            (s.z - f.x) * fd\n        );\n    }\n\n    let fd = 1.0 / (2.0 * Math.sqrt(1.0 + f.z - s.x - u.y));\n    return new Quat(\n        (s.z + f.x) * fd,\n        (f.y + u.z) * fd,\n        0.25 / fd,\n        (u.x - s.y) * fd\n    );\n};\n\n/**\n * Computes a Quat from from source point heading to the destination point.\n * @static\n * @param {og.Vec3} sourcePoint - Source coordinate.\n * @param {og.Vec3} destPoint - Destination coordinate.\n * @returns {og.Quat} -\n */\nQuat.getLookAtSourceDest = function (sourcePoint, destPoint) {\n    var forwardVector = destPoint.subA(sourcePoint).normalize();\n    var dot = Vec3.FORWARD.dot(forwardVector);\n    if (Math.abs(dot - (-1.0)) < 0.000001) {\n        return Quat.axisAngleToQuat(Vec3.UP, Math.PI);\n    }\n    if (Math.abs(dot - (1.0)) < 0.000001) {\n        return new Quat(0.0, 0.0, 0.0, 1.0);\n    }\n    var rotAngle = Math.acos(dot);\n    var rotAxis = Vec3.FORWARD.cross(forwardVector).normalize();\n    return Quat.axisAngleToQuat(rotAxis, rotAngle);\n};\n\n/**\n * Compute rotation between two vectors.\n * @static\n * @param {og.Vec3} u - First vector.\n * @param {og.Vec3} v - Second vector.\n * @returns {og.Quat} -\n */\nQuat.getRotationBetweenVectors = function (u, v) {\n    var w = u.cross(v);\n    var q = new Quat(w.x, w.y, w.z, 1.0 + u.dot(v));\n    return q.normalize();\n};\n\n/**\n * Compute rotation between two vectors with around vector up \n * for exactly opposite vectors. If vectors exaclty in the same\n * direction than returns identity Quat.\n * @static\n * @param {og.Vec3} source - First vector.\n * @param {og.Vec3} dest - Second vector.\n * @param {og.Vec3} up - Up vector.\n * @returns {og.Quat} -\n */\nQuat.getRotationBetweenVectorsUp = function (source, dest, up) {\n    var dot = source.dot(dest);\n    if (Math.abs(dot + 1.0) < 0.000001) {\n        // vector source and dest point exactly in the opposite direction, \n        // so it is a 180 degrees turn around the up-axis\n        return Quat.axisAngleToQuat(up, Math.PI);\n    }\n    if (Math.abs(dot - 1.0) < 0.000001) {\n        // vector source and dest point exactly in the same direction\n        // so we return the identity Quat\n        return new Quat(0, 0, 0, 1);\n    }\n    var rotAngle = Math.acos(dot);\n    var rotAxis = source.cross(dest).normalize();\n    return Quat.axisAngleToQuat(rotAxis, rotAngle);\n};\n\n/**\n * Returns true if the components are zero.\n * @public\n * @param {og.Quat} q - Quat to subtract.\n * @returns {og.Quat} -\n */\nQuat.prototype.isZero = function () {\n    return this.x === 0.0 && this.y === 0.0 && this.z === 0.0 && this.w === 0.0;\n};\n\n/**\n * Clear Quat. Sets zeroes.\n * @public\n * @returns {og.Quat} -\n */\nQuat.prototype.clear = function () {\n    this.x = this.y = this.z = this.w = 0;\n    return this;\n};\n\n/**\n * Sets Quat values.\n * @public\n * @param {Number} [x=0.0] The X component.\n * @param {Number} [y=0.0] The Y component.\n * @param {Number} [z=0.0] The Z component.\n * @param {Number} [w=0.0] The W component.\n * @returns {og.Quat} -\n */\nQuat.prototype.set = function (x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n};\n\n/**\n * Copy Quat values.\n * @public\n * @param {og.Quat} q - Copy Quat.\n * @returns {og.Quat} -\n */\nQuat.prototype.copy = function (q) {\n    this.x = q.x;\n    this.y = q.y;\n    this.z = q.z;\n    this.w = q.w;\n    return this;\n};\n\n/**\n * Set current Quat instance to identity Quat.\n * @public\n * @returns {og.Quat} -\n */\nQuat.prototype.setIdentity = function () {\n    this.x = 0.0;\n    this.y = 0.0;\n    this.z = 0.0;\n    this.w = 1.0;\n    return this;\n};\n\n/**\n * Duplicates a Quat instance.\n * @public\n * @returns {og.Quat} -\n */\nQuat.prototype.clone = function () {\n    return new Quat(this.x, this.y, this.z, this.w);\n};\n\n/**\n * Computes the componentwise sum of two Quats.\n * @public\n * @param {og.Quat} q - Quat to add.\n * @returns {og.Quat} -\n */\nQuat.prototype.add = function (q) {\n    return new Quat(this.x + q.x, this.y + q.y, this.z + q.z, this.w + q.w);\n};\n\n/**\n * Computes the componentwise difference of two Quats.\n * @public\n * @param {og.Quat} q - Quat to subtract.\n * @returns {og.Quat} -\n */\nQuat.prototype.sub = function (q) {\n    return new Quat(this.x - q.x, this.y - q.y, this.z - q.z, this.w - q.w);\n};\n\n/**\n * Multiplies the provided Quat componentwise by the provided scalar.\n * @public\n * @param {Number} scale - The scalar to multiply with.\n * @returns {og.Quat} -\n */\nQuat.prototype.scaleTo = function (scale) {\n    return new Quat(this.x * scale, this.y * scale, this.z * scale, this.w * scale);\n};\n\n/**\n * Multiplies the provided Quat componentwise.\n * @public\n * @param {Number} scale - The scalar to multiply with.\n * @returns {og.Quat} -\n */\nQuat.prototype.scale = function (scale) {\n    return this.x * scale, this.y * scale, this.z * scale, this.w * scale;\n};\n\n/**\n * Converts Quat values to array.\n * @public\n * @returns {Array.<number,number,number,number>} -\n */\nQuat.prototype.toVec = function () {\n    return [this.x, this.y, this.z, this.w];\n};\n\n/**\n * Sets current quaternion by spherical coordinates.\n * @public\n * @param {number} lat - Latitude.\n * @param {number} lon - Longitude.\n * @param {number} angle - Angle in radians.\n * @returns {og.Quat} -\n */\nQuat.prototype.setFromSphericalCoords = function (lat, lon, angle) {\n    var sin_a = Math.sin(angle / 2);\n    var cos_a = Math.cos(angle / 2);\n    var sin_lat = Math.sin(lat);\n    var cos_lat = Math.cos(lat);\n    var sin_long = Math.sin(lon);\n    var cos_long = Math.cos(lon);\n    this.x = sin_a * cos_lat * sin_long;\n    this.y = sin_a * sin_lat;\n    this.z = sin_a * sin_lat * cos_long;\n    this.w = cos_a;\n    return this;\n};\n\n\n/**\n * Sets rotation with the given heading and up vectors.\n * @static\n * @param {og.Vec3} forward - Heading target coordinates.\n * @param {og.Vec3} up - Up vector.\n * @returns {og.Quat} -\n */\nQuat.prototype.setLookRotation = function (forward, up) {\n\n    var f = forward.normal().negate();\n    var s = (up.cross(f)).normalize();\n    var u = f.cross(s);\n\n    var z = 1.0 + s.x + u.y + f.z;\n\n    if (z > 0.000001) {\n        let fd = 1.0 / (2.0 * Math.sqrt(z));\n        this.x = (f.y - u.z) * fd;\n        this.y = (s.z - f.x) * fd;\n        this.z = (u.x - s.y) * fd;\n        this.w = 0.25 / fd;\n    }\n    else if (s.x > u.y && s.x > f.z) {\n        let fd = 1.0 / (2.0 * Math.sqrt(1.0 + s.x - u.y - f.z));\n        this.x = 0.25 / fd;\n        this.y = (u.x + s.y) * fd;\n        this.z = (s.z + f.x) * fd;\n        this.w = (f.y - u.z) * fd;\n    }\n    else if (u.y > f.z) {\n        let fd = 1.0 / (2.0 * Math.sqrt(1.0 + u.y - s.x - f.z));\n        this.x = (u.x + s.y) * fd;\n        this.y = 0.25 / fd;\n        this.z = (f.y + u.z) * fd;\n        this.w = (s.z - f.x) * fd;\n    }\n    else {\n        let fd = 1.0 / (2.0 * Math.sqrt(1.0 + f.z - s.x - u.y));\n        this.x = (s.z + f.x) * fd;\n        this.y = (f.y + u.z) * fd;\n        this.z = 0.25 / fd;\n        this.w = (u.x - s.y) * fd;\n    }\n\n    return this;\n};\n\n/**\n * Gets spherical coordinates.\n * @public\n * @returns {Object} Returns object with latitude, longitude and alpha. \n */\nQuat.prototype.toSphericalCoords = function () {\n    var cos_a = this.w;\n    var sin_a = Math.sqrt(1.0 - cos_a * cos_a);\n    var angle = Math.acos(cos_a) * 2;\n    if (Math.abs(sin_a) < 0.0005)\n        sin_a = 1;\n    var tx = this.x / sin_a;\n    var ty = this.y / sin_a;\n    var tz = this.z / sin_a;\n\n    var lon, lat = -Math.asin(ty);\n    if (tx * tx + tz * tz < 0.0005)\n        lon = 0;\n    else\n        lon = Math.atan2(tx, tz);\n    if (lon < 0)\n        lon += 360.0;\n\n    return { lat: lat, lon: lon, alpha: Math.acos(cos_a) };\n};\n\n/**\n * Sets current Quat representing a rotation around an axis.\n * @public\n * @param {og.Vec3} axis - The axis of rotation.\n * @param {number} angle The angle in radians to rotate around the axis.\n * @returns {og.Quat} -\n */\nQuat.prototype.setFromAxisAngle = function (axis, angle) {\n    var v = axis.normal();\n    var half_angle = angle * 0.5;\n    var sin_a = Math.sin(half_angle);\n    this.set(v.x * sin_a, v.y * sin_a, v.z * sin_a, Math.cos(half_angle));\n    return this;\n};\n\n/**\n * Returns axis and angle of the current Quat.\n * @public\n * @returns {Object} -\n */\nQuat.prototype.getAxisAngle = function () {\n    var vl = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    var axis, angle;\n    if (vl > 0.0000001) {\n        var ivl = 1.0 / vl;\n        axis = new Vec3(x * ivl, y * ivl, z * ivl);\n        if (this.w < 0)\n            angle = 2.0 * Math.atan2(-vl, -w); //-PI,0 \n        else\n            angle = 2.0 * Math.atan2(vl, w); //0,PI \n    } else {\n        axis = new Vec3(0, 0, 0);\n        angle = 0;\n    }\n    return { axis: axis, angle: angle };\n};\n\n/**\n * Sets current Quat by Euler's angles.\n * @public\n * @param {number} pitch - Pitch angle in degrees.\n * @param {number} yaw - Yaw angle in degrees.\n * @param {number} roll - Roll angle in degrees.\n * @returns {og.Quat} -\n */\nQuat.prototype.setFromEulerAngles = function (pitch, yaw, roll) {\n    var ex = pitch * math.RADIANS_HALF,\n        ey = yaw * math.RADIANS_HALF,\n        ez = roll * math.RADIANS_HALF;\n\n    var cr = Math.cos(ex),\n        cp = Math.cos(ey),\n        cy = Math.cos(ez);\n\n    var sr = Math.sin(ex),\n        sp = Math.sin(ey),\n        sy = Math.sin(ez);\n\n    var cpcy = cp * cy,\n        spsy = sp * sy;\n\n    this.w = cr * cpcy + sr * spsy;\n    this.x = sr * cpcy - cr * spsy;\n    this.y = cr * sp * cy + sr * cp * sy;\n    this.z = cr * cp * sy - sr * sp * cy;\n\n    return this.normalize();\n};\n\n/**\n * Returns Euler's angles of the current Quat.\n * @public\n * @returns {Object} -\n */\nQuat.prototype.getEulerAngles = function () {\n\n    let x = this.x, y = this.y, z = this.z, w = this.w;\n\n    let sqy = y * y;\n\n    let roll = Math.atan2(2.0 * (w * x + y * z), 1.0 - 2.0 * (x * x + sqy));\n\n    let a = w * y - z * x;\n\n    if (a < -1.0) {\n        a = -1.0;\n    } else if (a > 1.0) {\n        a = 1.0;\n    }\n    let pitch = Math.asin(2.0 * a);\n\n    let yaw = Math.atan2(2.0 * (w * z + x * y), 1.0 - 2.0 * (sqy + z * z));\n\n    return { roll, pitch, yaw };\n};\n\n/**\n * Computes a Quat from the provided 4x4 matrix instance.\n * @public\n * @param {og.Mat4} m - The rotation matrix.\n * @returns {og.Quat} -\n */\nQuat.prototype.setFromMatrix4 = function (m) {\n    var tr, s, q = [];\n    var i, j, k;\n    m = m._m;\n\n    var nxt = [1, 2, 0];\n\n    tr = m[0] + m[5] + m[10];\n\n    if (tr > 0.0) {\n        s = Math.sqrt(tr + 1.0);\n        this.w = s / 2.0;\n        s = 0.5 / s;\n        this.x = (m[6] - m[9]) * s;\n        this.y = (m[8] - m[2]) * s;\n        this.z = (m[1] - m[4]) * s;\n    } else {\n        i = 0;\n        if (m[5] > m[0]) i = 1;\n        if (m[10] > m[i * 5]) i = 2;\n        j = nxt[i];\n        k = nxt[j];\n\n        s = Math.sqrt((m[i * 5] - (m[j * 5] + m[k * 5])) + 1.0);\n\n        q[i] = s * 0.5;\n\n        if (s !== 0.0) s = 0.5 / s;\n\n        q[3] = (m[j * 4 + k] - m[k * 4 + j]) * s;\n        q[j] = (m[i * 4 + j] + m[j * 4 + i]) * s;\n        q[k] = (m[i * 4 + k] + m[k * 4 + i]) * s;\n\n        this.x = q[0];\n        this.y = q[1];\n        this.z = q[2];\n        this.w = q[3];\n    }\n    return this;\n};\n\n/**\n * Converts current Quat to the rotation 4x4 matrix.\n * @public\n * @returns {og.Mat4} -\n */\nQuat.prototype.getMat4 = function (out) {\n    var xs = this.x + this.x;\n    var ys = this.y + this.y;\n    var zs = this.z + this.z;\n    var wx = this.w * xs;\n    var wy = this.w * ys;\n    var wz = this.w * zs;\n    var xx = this.x * xs;\n    var xy = this.x * ys;\n    var xz = this.x * zs;\n    var yy = this.y * ys;\n    var yz = this.y * zs;\n    var zz = this.z * zs;\n    var m = out || new Mat4();\n    return m.set([1 - (yy + zz), xy - wz, xz + wy, 0, xy + wz, 1 - (xx + zz), yz - wx, 0, xz - wy, yz + wx, 1 - (xx + yy), 0, 0, 0, 0, 1]);\n};\n\n/**\n * Converts current Quat to the rotation 3x3 matrix.\n * @public\n * @returns {og.Mat3} -\n * @todo NOT TESTED\n */\nQuat.prototype.getMat3 = function () {\n    var m = new Mat3();\n    var mx = m._m;\n    var c = this.x,\n        d = this.y,\n        e = this.z,\n        g = this.w,\n        f = c + c,\n        h = d + d,\n        i = e + e,\n        j = c * f,\n        k = c * h;\n\n    c = c * i;\n\n    var l = d * h;\n\n    d = d * i;\n    e = e * i;\n    f = g * f;\n    h = g * h;\n    g = g * i;\n\n    mx[0] = 1 - (l + e); mx[1] = k - g; mx[2] = c + h;\n    mx[3] = k + g; mx[4] = 1 - (j + e); mx[5] = d - f;\n    mx[6] = c - h; mx[7] = d + f; mx[8] = 1 - (j + l);\n\n    return m;\n};\n\n/**\n * Returns quatrenion and vector production.\n * @public\n * @param {og.Vec3} v - 3d Vector.\n * @returns {og.Vec3} -\n */\nQuat.prototype.mulVec3 = function (v) {\n\n    //t = 2 * cross(q.xyz, v)\n    //v' = v + q.w * t + cross(q.xyz, t)\n\n    var d = v.x,\n        e = v.y,\n        g = v.z;\n\n    var b = this.x,\n        f = this.y,\n        h = this.z,\n        a = this.w;\n\n    var i = a * d + f * g - h * e,\n        j = a * e + h * d - b * g,\n        k = a * g + b * e - f * d;\n\n    d = -b * d - f * e - h * g;\n\n    return new Vec3(\n        i * a + d * -b + j * -h - k * -f,\n        j * a + d * -f + k * -b - i * -h,\n        k * a + d * -h + i * -f - j * -b);\n};\n\n/**\n * Computes the product of two Quats.\n * @public\n * @param {og.Quat} q - Quat to multiply.\n * @returns {og.Quat} -\n */\nQuat.prototype.mul = function (q) {\n    var d = this.x, e = this.y, g = this.z, a = this.w;\n    var f = q.x, h = q.y, i = q.z, b = q.w;\n    return new Quat(\n        d * b + a * f + e * i - g * h,\n        e * b + a * h + g * f - d * i,\n        g * b + a * i + d * h - e * f,\n        a * b - d * f - e * h - g * i);\n};\n\n/**\n * Computes the product of two Quats.\n * @public\n * @param {og.Quat} q - Quat to multiply.\n * @returns {og.Quat} -\n */\nQuat.prototype.mulA = function (q) {\n    var d = this.x, e = this.y, g = this.z, a = this.w;\n    var f = q.x, h = q.y, i = q.z, b = q.w;\n    this.x = d * b + a * f + e * i - g * h;\n    this.y = e * b + a * h + g * f - d * i;\n    this.z = g * b + a * i + d * h - e * f;\n    this.w = a * b - d * f - e * h - g * i;\n    return this;\n};\n\n/**\n * Gets the conjugate of the Quat.\n * @public\n * @returns {og.Quat} -\n */\nQuat.prototype.conjugate = function () {\n    return new Quat(-this.x, -this.y, -this.z, this.w);\n};\n\n/** \n * Computes the inverse of the Quat.\n * @public\n * @returns {og.Quat} -\n */\nQuat.prototype.inverse = function () {\n    var n = 1 / this.magnitude2();\n    return new Quat(-this.x * n, -this.y * n, -this.z * n, this.w * n);\n};\n\n/**\n * Computes a magnitude of the Quat.\n * @public\n * @returns {number} -\n */\nQuat.prototype.magnitude = function () {\n    var b = this.x, c = this.y, d = this.z, a = this.w;\n    return Math.sqrt(b * b + c * c + d * d + a * a);\n};\n\n/**\n * Computes a squared magnitude of the Quat.\n * @public\n * @returns {number} -\n */\nQuat.prototype.magnitude2 = function () {\n    var b = this.x, c = this.y, d = this.z, a = this.w;\n    return b * b + c * c + d * d + a * a;\n};\n\n/**\n * Computes the dot (scalar) product of two Quats.\n * @public\n * @param {og.Quat} q - Second quatrnion.\n * @returns {number} -\n */\nQuat.prototype.dot = function (q) {\n    return this.x * q.x + this.y * q.y + this.z * q.z;\n};\n\n/**\n * Current Quat normalization.\n * @public\n * @returns {og.Quat} -\n */\nQuat.prototype.normalize = function () {\n    var c = this.x, d = this.y, e = this.z, g = this.w,\n        f = Math.sqrt(c * c + d * d + e * e + g * g);\n    if (f === 0.0) {\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        this.w = 0;\n        return this;\n    }\n    f = 1 / f;\n    this.x = c * f;\n    this.y = d * f;\n    this.z = e * f;\n    this.w = g * f;\n    return this;\n};\n\n/**\n * Compares two Quats.\n * @public\n * @param {og.Quat} q - Second quatrnion.\n * @returns {Boolean} -\n */\nQuat.prototype.isEqual = function (q) {\n    var matching = this.dot(q);\n    if (Math.abs(matching - 1.0) < 0.001) {\n        return true;\n    }\n    return false;\n};\n\n/**\n * Performs a spherical linear interpolation between two Quats.\n * @public\n * @param {og.Quat} b - The end rotation Quat.\n * @param {number} t - interpolation amount between the two Quats.\n * @returns {og.Quat} -\n */\nQuat.prototype.slerp = function (b, t) {\n\n    var ax = this.x, ay = this.y, az = this.z, aw = this.w,\n        bx = b.x, by = b.y, bz = b.z, bw = b.w;\n\n    var omega, cosom, sinom, scale0, scale1;\n\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n\n    if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n    }\n\n    if ((1.0 - cosom) > 0.000001) {\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n\n    return new Quat(\n        scale0 * ax + scale1 * bx,\n        scale0 * ay + scale1 * by,\n        scale0 * az + scale1 * bz,\n        scale0 * aw + scale1 * bw\n    );\n};\n\n/**\n * Returns a roll angle in radians.\n * @public\n * @param {Boolean} [reprojectAxis] -\n * @returns {Number} -\n */\nQuat.prototype.getRoll = function (reprojectAxis) {\n    var x = this.x, y = this.y, z = this.z, w = this.w;\n    if (reprojectAxis) {\n        var fTy = 2.0 * y;\n        var fTz = 2.0 * z;\n        var fTwz = fTz * w;\n        var fTxy = fTy * x;\n        var fTyy = fTy * y;\n        var fTzz = fTz * z;\n        return Math.atan2(fTxy + fTwz, 1.0 - (fTyy + fTzz));\n    } else {\n        return Math.atan2(2 * (x * y + w * z), w * w + x * x - y * y - z * z);\n    }\n};\n\n/**\n * Returns a pitch angle in radians.\n * @public\n * @param {Boolean} [reprojectAxis] -\n * @returns {number} -\n */\nQuat.prototype.getPitch = function (reprojectAxis) {\n    var x = this.x, y = this.y, z = this.z, w = this.w;\n    if (reprojectAxis) {\n        var fTx = 2.0 * x;\n        var fTz = 2.0 * z;\n        var fTwx = fTx * w;\n        var fTxx = fTx * x;\n        var fTyz = fTz * y;\n        var fTzz = fTz * z;\n        return Math.atan2(fTyz + fTwx, 1.0 - (fTxx + fTzz));\n    } else {\n        return Math.atan2(2 * (y * z + w * x), w * w - x * x - y * y + z * z);\n    }\n};\n\n/**\n * Returns a yaw angle in radians.\n * @public\n * @param {Boolean} [reprojectAxis] -\n * @returns {number} -\n */\nQuat.prototype.getYaw = function (reprojectAxis) {\n    var x = this.x, y = this.y, z = this.z, w = this.w;\n    if (reprojectAxis) {\n        var fTx = 2.0 * x;\n        var fTy = 2.0 * y;\n        var fTz = 2.0 * z;\n        var fTwy = fTy * w;\n        var fTxx = fTx * x;\n        var fTxz = fTz * x;\n        var fTyy = fTy * y;\n        return Math.atan2(fTxz + fTwy, 1.0 - (fTxx + fTyy));\n    } else {\n        return Math.asin(-2 * (x * z - w * y));\n    }\n};\n\nexport { Quat };","/**\n * @module og/math/Vec3\n */\n\n'use strict';\n\nimport { Vec4 } from './Vec4.js';\nimport { Quat } from './Quat.js';\n\n/**\n * Class represents a 3d vector.\n * @class\n * @param {number} [x] - First value.\n * @param {number} [y] - Second value.\n * @param {number} [z] - Third value.\n */\nconst Vec3 = function (x, y, z) {\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.x = x || 0.0;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.y = y || 0.0;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.z = z || 0.0;\n};\n\n/** @const */\nVec3.UP = new Vec3(0, 1, 0);\n/** @const */\nVec3.DOWN = new Vec3(0, -1, 0);\n/** @const */\nVec3.RIGHT = new Vec3(1, 0, 0);\n/** @const */\nVec3.LEFT = new Vec3(-1, 0, 0);\n/** @const */\nVec3.FORWARD = new Vec3(0, 0, -1);\n/** @const */\nVec3.BACKWARD = new Vec3(0, 0, 1);\n/** @const */\nVec3.ZERO = new Vec3();\n/** @const */\nVec3.UNIT_X = new Vec3(1, 0, 0);\n/** @const */\nVec3.UNIT_Y = new Vec3(0, 1, 0);\n/** @const */\nVec3.UNIT_Z = new Vec3(0, 0, 1);\n\n/**\n * Vector 3d object creator.\n * @function\n * @param {number} [x] - First cvalue.\n * @param {number} [y] - Second value.\n * @param {number} [z] - Third value.\n * @returns {og.Vec3} -\n */\nexport function vec3(x, y, z) {\n    return new Vec3(x, y, z);\n};\n\n/**\n * Separate 63 bit Vec3 to two Vec3 32 bit float values.\n * @function\n * @param {number} value - Double type value.\n * @param {Vec3} high - Out vector high values.\n * @param {Vec3} low - Out vector low values.\n * @returns {Array.<number,number>} Encoded array.\n */\nVec3.doubleToTwoFloats = function(v, high, low) {\n\n    let x = v.x, y = v.y, z = v.z;\n    \n    if (x >= 0.0) {\n        var doubleHigh = Math.floor(x / 65536.0) * 65536.0;\n        high.x = Math.fround(doubleHigh);\n        low.x = Math.fround(x - doubleHigh);\n    } else {\n        var doubleHigh = Math.floor(-x / 65536.0) * 65536.0;\n        high.x = Math.fround(-doubleHigh);\n        low.x = Math.fround(x + doubleHigh);\n    }\n\n    if (y >= 0.0) {\n        var doubleHigh = Math.floor(y / 65536.0) * 65536.0;\n        high.y = Math.fround(doubleHigh);\n        low.y = Math.fround(y - doubleHigh);\n    } else {\n        var doubleHigh = Math.floor(-y / 65536.0) * 65536.0;\n        high.y = Math.fround(-doubleHigh);\n        low.y = Math.fround(y + doubleHigh);\n    }\n\n    if (z >= 0.0) {\n        var doubleHigh = Math.floor(z / 65536.0) * 65536.0;\n        high.z = Math.fround(doubleHigh);\n        low.z = Math.fround(z - doubleHigh);\n    } else {\n        var doubleHigh = Math.floor(-z / 65536.0) * 65536.0;\n        high.z = Math.fround(-doubleHigh);\n        low.z = Math.fround(z + doubleHigh);\n    }\n};\n\n/**\n * Separate 63 bit Vec3 to two Vec3 32 bit float values.\n * @function\n * @param {number} value - Double type value.\n * @param {Float32Array} high - Out vector high values.\n * @param {Float32Array} low - Out vector low values.\n * @returns {Array.<number,number>} Encoded array.\n */\nVec3.doubleToTwoFloat32Array = function (v, high, low) {\n\n    let x = v.x, y = v.y, z = v.z;\n\n    if (x >= 0.0) {\n        var doubleHigh = Math.floor(x / 65536.0) * 65536.0;\n        high[0] = Math.fround(doubleHigh);\n        low[0] = Math.fround(x - doubleHigh);\n    } else {\n        var doubleHigh = Math.floor(-x / 65536.0) * 65536.0;\n        high[0] = Math.fround(-doubleHigh);\n        low[0] = Math.fround(x + doubleHigh);\n    }\n\n    if (y >= 0.0) {\n        var doubleHigh = Math.floor(y / 65536.0) * 65536.0;\n        high[1] = Math.fround(doubleHigh);\n        low[1] = Math.fround(y - doubleHigh);\n    } else {\n        var doubleHigh = Math.floor(-y / 65536.0) * 65536.0;\n        high[1] = Math.fround(-doubleHigh);\n        low[1] = Math.fround(y + doubleHigh);\n    }\n\n    if (z >= 0.0) {\n        var doubleHigh = Math.floor(z / 65536.0) * 65536.0;\n        high[2] = Math.fround(doubleHigh);\n        low[2] = Math.fround(z - doubleHigh);\n    } else {\n        var doubleHigh = Math.floor(-z / 65536.0) * 65536.0;\n        high[2] = Math.fround(-doubleHigh);\n        low[2] = Math.fround(z + doubleHigh);\n    }\n};\n\n/**\n * Creates 3d vector from array.\n * @function\n * @param {Array.<number,number,number>} arr - Input array\n * @returns {og.Vec3} -\n */\nVec3.fromVec = function (arr) {\n    return new Vec3(arr[0], arr[1], arr[2]);\n};\n\n/**\n * Gets angle between two vectors.\n * @static\n * @param {og.Vec3} a - First vector.\n * @param {og.Vec3} b - Second vector.\n * @returns {number} -\n */\nVec3.angle = function (a, b) {\n    return Math.acos(a.dot(b) / Math.sqrt(a.length2() * b.length2()));\n};\n\n/**\n * Returns two vectors linear interpolation.\n * @static\n * @param {og.Vec3} v1 - Start vector.\n * @param {og.Vec3} v2 - End vector.\n * @param {number} l - Interpolate value.\n * @returns {og.Vec3} -\n */\nVec3.lerp = function (v1, v2, l) {\n    return Vec3(v1.x + (v2.x - v1.x) * l, v1.y + (v2.y - v1.y) * l, v1.z + (v2.z - v1.z) * l);\n};\n\n/**\n * Returns summary vector.\n * @static\n * @param {og.Vec3} a - First vector.\n * @param {og.Vec3} b - Second vector.\n * @returns {og.Vec3} - Summary vector.\n */\nVec3.add = function (a, b) {\n    var res = new Vec3(a.x, a.y, a.z);\n    res.addA(b);\n    return res;\n};\n\n/**\n * Returns two vectors subtraction.\n * @static\n * @param {og.Vec3} a - First vector.\n * @param {og.Vec3} b - Second vector.\n * @returns {og.Vec3} - Vectors subtraction.\n */\nVec3.sub = function (a, b) {\n    var res = new Vec3(a.x, a.y, a.z);\n    res.subA(b);\n    return res;\n};\n\n/**\n * Returns scaled vector.\n * @static\n * @param {og.Vec3} a - Input vector.\n * @param {number} scale - Scale value.\n * @returns {og.Vec3} -\n */\nVec3.scale = function (a, scale) {\n    var res = new Vec3(a.x, a.y, a.z);\n    res.scale(scale)\n    return res;\n};\n\n/**\n * Returns two vectors production.\n * @static\n * @param {og.Vec3} a - First vector.\n * @param {og.Vec3} b - Second vector.\n * @returns {og.Vec3} -\n */\nVec3.mul = function (a, b) {\n    var res = new Vec3(a.x, a.y, a.z);\n    res.mulA(b);\n    return res;\n};\n\n/**\n * Returns true if two vectors are non collinear.\n * @public\n * @param {og.Vec3} a - First vector.\n * @param {og.Vec3} b - Second vector.\n * @returns {og.Vec3} -\n */\nVec3.noncollinear = function (a, b) {\n    return a.y * b.z - a.z * b.y || a.z * b.x - a.x * b.z || a.x * b.y - a.y * b.z;\n};\n\n/**\n * Get projection of the vector to plane where n - normal to the plane.\n * @static\n * @param {og.Vec3} b - Vector to project.\n * @param {og.Vec3} n - Plane normal.\n* @param {og.Vec3} [def] - Default value for non existed result.\n * @returns {og.Vec3} -\n */\nVec3.proj_b_to_plane = function (b, n, def) {\n    var res = b.sub(n.scaleTo(n.dot(b) / n.dot(n)));\n    if (def && res.isZero()) {\n        return new Vec3(def.x, def.y, def.z);\n    }\n    return res;\n};\n\n/**\n * Get projection of the first vector to the second.\n * @static\n * @param {og.Vec3} b - First vector.\n * @param {og.Vec3} a - Second vector.\n * @returns {og.Vec3} -\n */\nVec3.proj_b_to_a = function (b, a) {\n    return a.scaleTo(a.dot(b) / a.dot(a));\n};\n\n/**\n * Makes vectors normalized and orthogonal to each other.\n * Normalizes normal. Normalizes tangent and makes sure it is orthogonal to normal (that is, angle between them is 90 degrees).\n * @static\n * @param {og.Vec3} normal - Normal vector.\n * @param {og.Vec3} tangent - Tangent vector.\n * @returns {og.Vec3} -\n */\nVec3.orthoNormalize = function (normal, tangent) {\n    normal = normal.normal();\n    normal.scale(tangent.dot(normal));\n    return tangent.subA(normal).normalize();\n};\n\n/**\n * Returns vector components division product one to another.\n * @static\n * @param {og.Vec3} a - First vector.\n * @param {og.Vec3} b - Second vector.\n * @returns {og.Vec3} -\n */\nVec3.div = function (a, b) {\n    var res = new Vec3(a.x, a.y, a.z);\n    res.divA(b);\n    return res;\n};\n\n/**\n * Converts to 4d vector, Fourth value is 1.0.\n * @public\n * @returns {og.Vec4} -\n */\nVec3.prototype.toVec4 = function () {\n    return new Vec4(this.x, this.y, this.z, 1.0);\n};\n\n/**\n * Returns clone vector.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.clone = function () {\n    return new Vec3(this.x, this.y, this.z);\n};\n\n/**\n * Converts vector to text string.\n * @public\n * @returns {string} -\n */\nVec3.prototype.toString = function () {\n    return \"(\" + this.x + \",\" + this.y + \",\" + this.z + \")\";\n};\n\n/**\n * Returns true if vector's values are zero.\n * @public\n * @returns {boolean} -\n */\nVec3.prototype.isZero = function () {\n    return !(this.x || this.y || this.z);\n};\n\n/**\n * Get projection of the first vector to the second.\n * @static\n * @param {og.Vec3} a - Project vector.\n * @returns {og.Vec3} -\n */\nVec3.prototype.projToVec = function (a) {\n    return a.scaleTo(a.dot(this) / a.dot(a));\n};\n\n/**\n * Compares with vector. Returns true if it equals another.\n * @public\n * @param {og.Vec3} p - Vector to compare.\n * @returns {boolean} -\n */\nVec3.prototype.equal = function (p) {\n    return this.x === p.x && this.y === p.y && this.z === p.z;\n};\n\n/**\n * Copy input vector's values.\n * @param {og.Vec3} point3 - Vector to copy.\n * @returns {og.Vec3} -\n */\nVec3.prototype.copy = function (point3) {\n    this.x = point3.x;\n    this.y = point3.y;\n    this.z = point3.z;\n    return this;\n};\n\n/**\n * Gets vector's length.\n * @public\n * @returns {number} -\n */\nVec3.prototype.length = function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n};\n\n/**\n * Returns squared vector's length.\n * @public\n * @returns {number} -\n */\nVec3.prototype.length2 = function () {\n    return this.x * this.x + this.y * this.y + this.z * this.z;\n};\n\n/**\n * Converts vector's values to a quaternion object.\n * @public\n * @returns {og.Quat} -\n */\nVec3.prototype.getQuat = function () {\n    return new Quat(this.x, this.y, this.z);\n};\n\n/**\n * Adds vector to the current.\n * @public\n * @param {og.Vec3} point3 - Point to add.\n * @returns {og.Vec3} -\n */\nVec3.prototype.addA = function (point3) {\n    this.x += point3.x;\n    this.y += point3.y;\n    this.z += point3.z;\n    return this;\n};\n\n/**\n * Gets two vectors summarization.\n * @public\n * @param {og.Vec3} point3 - Vector to add.\n * @returns {og.Vec3} Returns a sum vector.\n */\nVec3.prototype.add = function (point3) {\n    return new Vec3(this.x + point3.x, this.y + point3.y, this.z + point3.z);\n};\n\n/**\n * Subtract vector from the current.\n * @public\n * @param {og.Vec3} point3 - Subtract vector.\n * @returns {og.Vec3} -\n */\nVec3.prototype.subA = function (point3) {\n    this.x -= point3.x;\n    this.y -= point3.y;\n    this.z -= point3.z;\n    return this;\n};\n\n/**\n * Gets vector subtraction.\n * @public\n * @param {og.Vec3} point3 - Subtract vector.\n * @return {og.Vec3} Returns new instance of a subtraction\n */\nVec3.prototype.sub = function (point3) {\n    return new Vec3(this.x - point3.x, this.y - point3.y, this.z - point3.z);\n};\n\n/**\n * Scale current vector.\n * @public\n * @param {number} scale - Scale value.\n * @returns {og.Vec3} -\n */\nVec3.prototype.scale = function (scale) {\n    this.x *= scale;\n    this.y *= scale;\n    this.z *= scale;\n    return this;\n};\n\n/**\n * Scale current vector to another instance.\n * @public\n * @param {number} scale - Scale value.\n * @returns {og.Vec3} -\n */\nVec3.prototype.scaleTo = function (scale) {\n    return new Vec3(this.x * scale, this.y * scale, this.z * scale);\n};\n\n/**\n * Multiply current vector object to another and store result in the current instance.\n * @public\n * @param {og.Vec3} vec - Multiply vector.\n * @returns {og.Vec3} -\n */\nVec3.prototype.mulA = function (vec) {\n    this.x *= vec.x;\n    this.y *= vec.y;\n    this.z *= vec.z;\n    return this;\n};\n\n/**\n * Multiply current vector object to another and returns new vector instance.\n * @public\n * @param {og.Vec3} vec - Multiply vector.\n * @returns {og.Vec3} -\n */\nVec3.prototype.mul = function (vec) {\n    return new Vec3(this.x * vec.x, this.y * vec.y, this.z * vec.z);\n};\n\n/**\n * Divide current vector's components to another. Results stores in the current vector object.\n * @public\n * @param {og.Vec3} vec - Div vector.\n * @returns {og.Vec3} -\n */\nVec3.prototype.divA = function (vec) {\n    this.x /= vec.x;\n    this.y /= vec.y;\n    this.z /= vec.z;\n    return this;\n};\n\n/**\n * Divide current vector's components to another and returns new vector instance.\n * @public\n * @param {og.Vec3} vec - Div vector.\n * @returns {og.Vec3} -\n */\nVec3.prototype.div = function (vec) {\n    return new Vec3(this.x / vec.x, this.y / vec.y, this.z / vec.z);\n};\n\n/**\n * Gets vectors dot production.\n * @public\n * @param {og.Vec3} point3 - Another vector.\n * @returns {number} -\n */\nVec3.prototype.dot = function (point3) {\n    return point3.x * this.x + point3.y * this.y + point3.z * this.z;\n};\n\n/**\n * Gets vectors dot production.\n * @public\n * @param {Array.<number,number,number>} arr - Array vector.\n * @returns {number} -\n */\nVec3.prototype.dotArr = function (arr) {\n    return arr[0] * this.x + arr[1] * this.y + arr[2] * this.z;\n};\n\n\n/**\n * Gets vectors cross production.\n * @public\n * @param {og.Vec3} point3 - Another vector.\n * @returns {og.Vec3} -\n */\nVec3.prototype.cross = function (point3) {\n    return new Vec3(\n        this.y * point3.z - this.z * point3.y,\n        this.z * point3.x - this.x * point3.z,\n        this.x * point3.y - this.y * point3.x\n    );\n};\n\n/**\n * Sets vector to zero.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.clear = function () {\n    this.x = this.y = this.z = 0;\n    return this;\n};\n\n/**\n * Returns normalized vector.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.normal = function () {\n    var res = new Vec3();\n    res.copy(this);\n\n    var length = 1.0 / res.length();\n\n    res.x *= length;\n    res.y *= length;\n    res.z *= length;\n\n    return res;\n};\n\n/**\n * Returns normalized negate vector.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.normalNegate = function () {\n    var res = new Vec3();\n    res.copy(this);\n\n    var length = -1.0 / res.length();\n\n    res.x *= length;\n    res.y *= length;\n    res.z *= length;\n\n    return res;\n};\n\n/**\n * Returns normalized negate scale vector.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.normalNegateScale = function (scale) {\n    var res = new Vec3();\n    res.copy(this);\n\n    var length = -scale / res.length();\n\n    res.x *= length;\n    res.y *= length;\n    res.z *= length;\n\n    return res;\n};\n\n/**\n * Returns normalized scale vector.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.normalScale = function (scale) {\n    var res = new Vec3();\n    res.copy(this);\n\n    var length = scale / res.length();\n\n    res.x *= length;\n    res.y *= length;\n    res.z *= length;\n\n    return res;\n};\n\n/**\n * Normalize current vector.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.normalize = function () {\n    var length = 1.0 / this.length();\n\n    this.x *= length;\n    this.y *= length;\n    this.z *= length;\n\n    return this;\n};\n\n/**\n * Converts vector to a number array.\n * @public\n * @returns {Array.<number,number,number>} -\n * @deprecated\n */\nVec3.prototype.toVec = function () {\n    return [this.x, this.y, this.z];\n};\n\n/**\n * Converts vector to a number array.\n * @public\n * @returns {Array.<number,number,number>} -\n */\nVec3.prototype.toArray = function () {\n    return [this.x, this.y, this.z];\n};\n\n/**\n * Gets distance to point.\n * @public\n * @param {og.Vec3} point3 - Distant point.\n * @returns {number} -\n */\nVec3.prototype.distance = function (point3) {\n    return Vec3.sub(this, point3).length();\n};\n\n/**\n * Sets vector's values.\n * @public\n * @param {number} x - Value X.\n * @param {number} y - Value Y.\n * @param {number} z - Value Z.\n * @returns {og.Vec3} -\n */\nVec3.prototype.set = function (x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n};\n\n/**\n * Negate current vector.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.negate = function () {\n    this.x = -this.x;\n    this.y = -this.y;\n    this.z = -this.z;\n    return this;\n};\n\n/**\n * Negate current vector to another instance.\n * @public\n * @returns {og.Vec3} -\n */\nVec3.prototype.negateTo = function () {\n    return new Vec3(-this.x, -this.y, -this.z);\n};\n\n/**\n * Gets projected point coordinates of the current vector on the ray.\n * @public\n * @param {og.Vec3} pos - Ray position.\n * @param {og.Vec3} direction - Ray direction.\n * @returns {og.Vec3} -\n */\nVec3.prototype.projToRay = function (pos, direction) {\n    var v = Vec3.proj_b_to_a(Vec3.sub(this, pos), direction);\n    v.addA(pos);\n    return v;\n};\n\n/**\n * Gets angle between two vectors.\n * @public\n * @param {og.Vec3} a - Another vector.\n * @returns {number} -\n */\nVec3.prototype.angle = function (a) {\n    return Vec3.angle(this, a);\n};\n\n/**\n * Returns two vectors linear interpolation.\n * @public\n * @param {og.Vec3} v2 - End vector.\n * @param {number} l - Interpolate value.\n * @returns {og.Vec3} -\n */\nVec3.prototype.lerp = function (v2, l) {\n    return new Vec3(this.x + (v2.x - this.x) * l, this.y + (v2.y - this.y) * l, this.z + (v2.z - this.z) * l);\n};\n\n/**\n * Returns vector interpolation by v(t) = v1 * t + v2 * (1 - t)\n * @public\n * @param {og.Vec3} v2 - End vector.\n * @param {number} t - Interpolate value.\n * @returns {og.Vec3} -\n */\nVec3.prototype.smerp = function (v2, t) {\n    var one_d = 1 - t;\n    return new Vec3(this.x * t + v2.x * one_d, this.y * t + v2.y * one_d, this.z * t + v2.z * one_d);\n};\n\nVec3.LERP_DELTA = 1e-6;\n\n/**\n * Spherically interpolates between two vectors.\n * Interpolates between current and v2 vector by amount t. The difference between this and linear interpolation (aka, \"lerp\") is that \n * the vectors are treated as directions rather than points in space. The direction of the returned vector is interpolated \n * by the angle and its magnitude is interpolated between the magnitudes of from and to.\n * @public\n * @param {og.Vec3} v2 - \n * @param {number} t - The parameter t is clamped to the range [0, 1].\n * @returns {og.Vec3} -\n */\nVec3.prototype.slerp = function (v2, t) {\n    var res = new Vec3();\n\n    if (t <= 0.0) {\n        res.copy(this);\n        return;\n    } else if (t >= 1.0) {\n        res.copy(v2);\n        return;\n    }\n\n    var omega, sinom, scale0, scale1;\n    var cosom = this.dot(v2);\n\n    if ((1.0 - cosom) > Vec3.LERP_DELTA) {\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n\n    return Vec3.add(this.scaleTo(scale0), v2.scale(scale1));\n};\n\n/**\n * Gets the shortest arc quaternion to rotate this vector to the destination vector.\n * @param {Vec3} dest -\n * @param {Vec3} fallbackAxis -\n * @returns {Quat} -\n * @todo: TEST IT!\n */\nVec3.prototype.getRotationTo = function (dest, fallbackAxis) {\n    // Based on Stan Melax's article in Game Programming Gems\n    // Copy, since cannot modify local\n    let v0 = this.clone();\n    let v1 = dest.clone();\n    v0.normalize();\n    v1.normalize();\n\n    let d = v0.dot(v1);\n    // If dot == 1, vectors are the same\n    if (d >= 1.0) {\n        return Quat.IDENTITY.clone();\n    }\n\n    if (d < (1e-6 - 1.0)) {\n        if (!fallbackAxis.isEqual(Vec3.ZERO)) {\n            // rotate 180 degrees about the fallback axis\n            return Quat.axisAngleToQuat(Math.PI, fallbackAxis);\n        }\n        else {\n            // Generate an axis\n            let axis = Vec3.UNIT_X.cross(v0);\n            if (axis.isZero()) // pick another if colinear\n                axis = Vec3.UNIT_Y.cross(v0);\n            axis.normalize();\n            return Quat.axisAngleToQuat(Math.PI, axis);\n        }\n    }\n    else {\n        let s = Math.sqrt((1 + d) * 2);\n        let invs = 1.0 / s;\n\n        let c = v0.cross(v1);\n\n        let q = new Quat(c.x * invs, c.y * invs, c.z * invs, s * 0.5);\n        q.normalise();\n        return q;\n    }\n};\n\nexport { Vec3 };","/**\n * @module og/math/Vec2\n */\n\n'use strict';\n\nimport { Vec3 } from './Vec3.js';\n\n/**\n * Class represents a 3d vector.\n * @class\n * @param {number} [x] - First value.\n * @param {number} [y] - Second value.\n */\nconst Vec2 = function (x, y) {\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.x = x || 0.0;\n\n    /**\n     * @public\n     * @type {number}\n     */\n    this.y = y || 0.0;\n};\n\n/**\n * Vector 2d object creator.\n * @function\n * @param {number} [x] - First cvalue.\n * @param {number} [y] - Second value.\n * @returns {og.math.Vec2}\n */\nexport function vec2(x, y) {\n    return new Vec2(x, y);\n};\n\n/** @const */\nVec2.UP = new Vec2(0, 1);\n/** @const */\nVec2.DOWN = new Vec2(0, -1);\n/** @const */\nVec2.RIGHT = new Vec2(1, 0);\n/** @const */\nVec2.LEFT = new Vec2(-1, 0);\n/** @const */\nVec2.ZERO = new Vec2();\n\n/**\n * Returns summary vector.\n * @static\n * @param {og.math.Vec2} a - First vector.\n * @param {og.math.Vec2} b - Second vector.\n * @returns {og.math.Vec2} - Summary vector.\n */\nVec2.add = function (a, b) {\n    var res = new Vec2(a.x, a.y);\n    res.addA(b);\n    return res;\n};\n\n/**\n * Returns two vectors subtraction.\n * @static\n * @param {og.math.Vec2} a - First vector.\n * @param {og.math.Vec2} b - Second vector.\n * @returns {og.math.Vec2} - Vectors subtraction.\n */\nVec2.sub = function (a, b) {\n    var res = new oVec2(a.x, a.y);\n    res.subA(b);\n    return res;\n};\n\n/**\n * Returns scaled vector.\n * @static\n * @param {og.math.Vec2} a - Input vector.\n * @param {number} scale - Scale value.\n * @returns {og.math.Vec2}\n */\nVec2.scale = function (a, scale) {\n    var res = new Vec2(a.x, a.y);\n    res.scale(scale)\n    return res;\n};\n\n/**\n * Returns two vectors production.\n * @static\n * @param {og.math.Vec2} a - First vector.\n * @param {og.math.Vec2} b - Second vector.\n * @returns {og.math.Vec2}\n */\nVec2.mul = function (a, b) {\n    var res = new Vec2(a.x, a.y);\n    res.mulA(b);\n    return res;\n};\n\n/**\n * Returns vector components division product one to another.\n * @static\n * @param {og.math.Vec2} a - First vector.\n * @param {og.math.Vec2} b - Second vector.\n * @returns {og.math.Vec2}\n */\nVec2.div = function (a, b) {\n    var res = new Vec2(a.x, a.y);\n    res.divA(b);\n    return res;\n};\n\n/**\n * Get projection of the first vector to the second.\n * @static\n * @param {og.math.Vec2} b - First vector.\n * @param {og.math.Vec2} a - Second vector.\n * @returns {og.math.Vec2}\n */\nVec2.proj_b_to_a = function (b, a) {\n    return a.scaleTo(a.dot(b) / a.dot(a));\n};\n\n/**\n * Gets angle between two vectors.\n * @static\n * @param {og.math.Vec2} a - First vector.\n * @param {og.math.Vec2} b - Second vector.\n * @returns {number}\n */\nVec2.angle = function (a, b) {\n    return Math.acos(a.dot(b) / Math.sqrt(a.length2() * b.length2()));\n};\n\n/**\n * Makes vectors normalized and orthogonal to each other.\n * @static\n * @param {og.math.Vec2} normal - Normal vector.\n * @param {og.math.Vec2} tangent - Tangent vector.\n * @returns {og.math.Vec2}\n */\nVec2.orthoNormalize = function (normal, tangent) {\n    normal = normal.norm();\n    normal.scale(tangent.dot(normal));\n    return tangent.sub(normal).normalize();\n};\n\n/**\n * Converts to 3d vector, third value is 0.0.\n * @public\n * @returns {og.Vec3}\n */\nVec2.prototype.toVector3 = function () {\n    return new Vec3(this.x, this.y, 0);\n};\n\n/**\n * Returns clone vector.\n * @public\n * @returns {og.math.Vec2}\n */\nVec2.prototype.clone = function () {\n    return new Vec2(this.x, this.y);\n};\n\n/**\n * Compares with vector. Returns true if it equals another.\n * @public\n * @param {og.math.Vec2} p - Vector to compare.\n * @returns {boolean}\n */\nVec2.prototype.equal = function (p) {\n    return this.x === p.x && this.y === p.y;\n};\n\n/**\n * Copy input vector's values.\n * @param {og.math.Vec2} point2 - Vector to copy.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.copy = function (point2) {\n    this.x = point2.x;\n    this.y = point2.y;\n    return this;\n};\n\n/**\n * Gets vector's length.\n * @public\n * @returns {number}\n */\nVec2.prototype.length = function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n};\n\n/**\n * Returns squared vector's length.\n * @public\n * @returns {number}\n */\nVec2.prototype.length2 = function () {\n    return this.x * this.x + this.y * this.y;\n};\n\n/**\n * Adds vector to the current.\n * @public\n * @param {og.math.Vec2}\n * @returns {og.math.Vec2}\n */\nVec2.prototype.addA = function (v) {\n    this.x += v.x;\n    this.y += v.y;\n    return this;\n};\n\n/**\n * Summarize two vectors.\n * @public\n * @param {og.math.Vec2}\n * @returns {og.math.Vec2}\n */\nVec2.prototype.add = function (v) {\n    return new Vec2(this.x + v.x, this.y + v.y);\n};\n\n/**\n * Subtract vector from the current where results saved on the current instance.\n * @public\n * @param {og.math.Vec2} v - Subtract vector.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.subA = function (v) {\n    this.x -= v.x;\n    this.y -= v.y;\n    return this;\n};\n\n/**\n * Subtract vector from the current.\n * @public\n * @param {og.math.Vec2} v - Subtract vector.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.sub = function (v) {\n    return new Vec2(this.x - v.x, this.y - v.y);\n};\n\n/**\n * Scale current vector.\n * @public\n * @param {number} scale - Scale value.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.scale = function (scale) {\n    this.x *= scale;\n    this.y *= scale;\n    return this;\n};\n\n/**\n * Scale current vector to another instance.\n * @public\n * @param {number} scale - Scale value.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.scaleTo = function (scale) {\n    return new Vec2(this.x * scale, this.y * scale);\n};\n\n/**\n * Multiply current vector object to another and store result in the current instance.\n * @public\n * @param {og.math.Vec2} vec - Multiply vector.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.mulA = function (vec) {\n    this.x *= vec.x;\n    this.y *= vec.y;\n    return this;\n};\n\n/**\n * Multiply current vector object to another and returns new vector instance.\n * @public\n * @param {og.math.Vec2} vec - Multiply vector.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.mul = function (vec) {\n    return new Vec2(this.x * vec.x, this.y * vec.y);\n};\n\n\n/**\n * Divide current vector's components to another. Results stores in the current vector object.\n * @public\n * @param {og.math.Vec2}\n * @returns {og.math.Vec2}\n */\nVec2.prototype.divA = function (vec) {\n    this.x /= vec.x;\n    this.y /= vec.y;\n    return this;\n};\n\n/**\n * Gets vectors dot production.\n * @public\n * @param {og.math.Vec2} v - Another vector.\n * @returns {number}\n */\nVec2.prototype.dot = function (v) {\n    return v.x * this.x + v.y * this.y;\n};\n\n/**\n * Gets vectors dot production.\n * @public\n * @param {Array.<number,number>} arr - Array vector.\n * @returns {number}\n */\nVec2.prototype.dotArr = function (arr) {\n    return arr[0] * this.x + arr[1] * this.y;\n};\n\n/**\n * Gets vectors cross production.\n * @public\n * @param {og.math.Vec2} v - Another vector.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.cross = function (v) {\n    return this.x * v.y - this.y * v.x;\n};\n\n/**\n * Sets vector to zero.\n * @public\n * @returns {og.math.Vec2}\n */\nVec2.prototype.clear = function () {\n    this.x = this.y = 0;\n    return this;\n};\n\n/**\n * Returns normalized vector.\n * @public\n * @returns {og.math.Vec2}\n */\nVec2.prototype.normal = function () {\n    var res = new Vec2();\n    res.copy(this);\n\n    var length = 1.0 / res.length();\n\n    res.x *= length;\n    res.y *= length;\n\n    return res;\n};\n\n/**\n * Normalize current vector.\n * @public\n * @returns {og.math.Vec2}\n */\nVec2.prototype.normalize = function () {\n    var length = 1.0 / this.length();\n\n    this.x *= length;\n    this.y *= length;\n\n    return this;\n};\n\n/**\n * Converts vector to a number array.\n * @public\n * @returns {Array.<number,number>}\n */\nVec2.prototype.toVec = function () {\n    return [this.x, this.y];\n};\n\n/**\n * Gets distance to point.\n * @public\n * @param {og.math.Vec2} p - Distant point.\n * @returns {number}\n */\nVec2.prototype.distance = function (p) {\n    var vec = Vec2.sub(this, p);\n    return vec.length();\n};\n\n/**\n * Sets vector's values.\n * @public\n * @param {number} x - Value X.\n * @param {number} y - Value Y.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.set = function (x, y) {\n    this.x = x;\n    this.y = y;\n    return this;\n};\n\n/**\n * Negate current vector.\n * @public\n * @returns {og.math.Vec2}\n */\nVec2.prototype.negate = function () {\n    this.x = -this.x;\n    this.y = -this.y;\n    return this;\n};\n\n/**\n * Negate current vector to another instance.\n * @public\n * @returns {og.math.Vec2}\n */\nVec2.prototype.negateTo = function () {\n    return new Vec2(-this.x, -this.y);\n};\n\n/**\n * Gets projected point coordinates of the current vector on the ray.\n * @public\n * @param {og.math.Vec2} pos - Ray position.\n * @param {og.math.Vec2} direction - Ray direction.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.projToRay = function (pos, direction) {\n    var v = Vec2.proj_b_to_a(Vec2.sub(this, pos), direction);\n    v.add(pos);\n    return v;\n};\n\n/**\n * Gets angle between two vectors.\n * @public\n * @param {og.math.Vec2} a - Another vector.\n * @returns {number}\n */\nVec2.prototype.angle = function (a) {\n    return Vec2.angle(this, a);\n};\n\n/**\n * Returns two vectors linear interpolation.\n * @public\n * @param {og.math.Vec2} v2 - End vector.\n * @param {number} l - Interpolate value.\n * @returns {og.math.Vec2}\n */\nVec2.prototype.lerp = function (v1, v2, l) {\n    var res = Vec2.clone(this);\n    if (l <= 0.0) {\n        res.copy(v1);\n    } else if (l >= 1.0) {\n        res.copy(v2);\n    } else {\n        res = Vec2.add(v1, Vec2.sub(v2, v1).scale(l));\n    }\n    return res;\n};\n\nVec2.LERP_DELTA = 1e-6;\n\n/**\n * Spherically interpolates between two vectors.\n * Interpolates between current and v2 vector by amount t. The difference between this and linear interpolation (aka, \"lerp\") is that \n * the vectors are treated as directions rather than points in space. The direction of the returned vector is interpolated \n * by the angle and its magnitude is interpolated between the magnitudes of from and to.\n * @public\n * @param {og.math.Vec2} v2 - \n * @param {number} t - The parameter t is clamped to the range [0, 1].\n * @returns {og.math.Vec2}\n */\nVec2.prototype.slerp = function (v2, t) {\n    var res = new Vec2();\n\n    if (t <= 0.0) {\n        res.copy(this);\n        return;\n    } else if (t >= 1.0) {\n        res.copy(v2);\n        return;\n    }\n\n    var omega, sinom, scale0, scale1;\n    var cosom = this.dot(v2);\n\n    if ((1.0 - cosom) > Vec2.LERP_DELTA) {\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n\n    return Vec2.add(this.scale(scale0), v2.scale(scale1));\n};\n\nexport { Vec2 };","/**\n * @module og/utils/shared\n */\n\n'use strict';\n\nimport { ajax } from '../ajax.js';\nimport { colorTable } from './colorTable.js';\nimport { Extent } from '../Extent.js';\nimport { LonLat } from '../LonLat.js';\nimport { Vec2 } from '../math/Vec2.js';\nimport { Vec3 } from '../math/Vec3.js';\nimport { Vec4 } from '../math/Vec4.js';\n\nif (!('createImageBitmap' in window)) {\n    window.createImageBitmap = function (blob) {\n        return new Promise((resolve, reject) => {\n            let img = document.createElement('img');\n            img.addEventListener('load', function () {\n                resolve(this);\n            });\n            img.src = URL.createObjectURL(blob);\n        });\n    }\n};\n\nexport function getDefault(param, def) {\n    return param != undefined ? param : def;\n};\n\nexport function isEmpty(v) {\n    return v == null;\n};\n\nlet _stampCounter = 0;\nexport function stamp(obj) {\n    var stamp = obj._openglobus_id;\n    if (!stamp) {\n        stamp = obj._openglobus_id = ++_stampCounter;\n    }\n    return stamp;\n};\n\nexport function isString(s) {\n    return typeof (s) === 'string' || s instanceof String;\n};\n\n/**\n * Synchronous text file loading. Returns file text.\n * @param {string} fileUrl - File name path.\n * @returns {string} -\n */\nexport function readTextFile(fileUrl) {\n    var res = \"\";\n\n    ajax.request(fileUrl, {\n        async: false,\n        success: function (data) {\n            res = data;\n        }\n    });\n\n    return res;\n};\n\n/**\n * Convert html color string to the RGBA number vector.\n * @param {string} htmlColor - HTML string(\"#C6C6C6\" or \"#EF5\" or \"rgb(8,8,8)\" or \"rgba(8,8,8)\") color.\n * @param {number} [opacity] - Opacity for the output vector.\n * @returns {og.math.Vec4} -\n */\nexport function htmlColorToRgba(htmlColor, opacity) {\n    var hColor = colorTable[htmlColor];\n    if (hColor) {\n        htmlColor = hColor;\n    }\n\n    if (htmlColor[0] === \"#\") {\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        var hex = htmlColor.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return new Vec4(parseInt(result[1], 16) / 255, parseInt(result[2], 16) / 255, parseInt(result[3], 16) / 255, isEmpty(opacity) ? 1.0 : opacity);\n    } else {\n        if (isEmpty(opacity)) {\n            opacity = 1.0;\n        }\n        var m = htmlColor.split(\",\");\n        return new Vec4(parseInt(m[0].split(\"(\")[1]) / 255, parseInt(m[1]) / 255, parseInt(m[2]) / 255, !isEmpty(m[3]) ? parseFloat(m[3]) : opacity);\n    }\n};\n\nexport function htmlColorToFloat32Array(htmlColor, opacity) {\n    let c = htmlColorToRgba(htmlColor, opacity);\n    return new Float32Array([c.x, c.y, c.z, c.w]);\n};\n\n/**\n * Convert html color string to the RGB number vector.\n * @param {string} htmlColor - HTML string(\"#C6C6C6\" or \"#EF5\" or \"rgb(8,8,8)\" or \"rgba(8,8,8)\") color.\n * @param {number} [opacity] - Opacity for the output vector.\n * @returns {og.Vec3} -\n */\nexport function htmlColorToRgb(htmlColor) {\n    var hColor = colorTable[htmlColor];\n    if (hColor) {\n        htmlColor = hColor;\n    }\n\n    if (htmlColor[0] === '#') {\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        var hex = htmlColor.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return new Vec4(parseInt(result[1], 16) / 255, parseInt(result[2], 16) / 255, parseInt(result[3], 16) / 255);\n    } else {\n        var m = htmlColor.split(\",\");\n        return new Vec3(parseInt(m[0].split(\"(\")[1]) / 255, parseInt(m[1]) / 255, parseInt(m[2]) / 255);\n    }\n};\n\n/**\n * Replace template substrings between '{' and '}' tokens.\n * @param {string} template - String with templates in \"{\" and \"}\"\n * @param {Object} params - Template named object with subsrtings.\n * @returns {string} -\n * \n * @example <caption>Example from og.terrain that replaces tile indexes in url:</caption>\n * var substrings = {\n *       \"x\": 12,\n *       \"y\": 15,\n *       \"z\": 8\n * }\n * og.utils.stringTemplate(\"http://earth3.openglobus.org/{z}/{y}/{x}.ddm\", substrins);\n * //returns http://earth3.openglobus.org/8/15/12.ddm\n */\nexport function stringTemplate(template, params) {\n    return template.replace(/{[^{}]+}/g, function (key) {\n        return params[key.replace(/[{}]+/g, \"\")] || \"\";\n    });\n};\n\nexport function print2d(id, text, x, y) {\n    var el = document.getElementById(id);\n    if (!el) {\n        el = document.createElement(\"div\");\n        el.id = id;\n        el.classList.add(\"defaultText\");\n        document.body.appendChild(el);\n    }\n    el.innerHTML = text;\n    el.style.left = x;\n    el.style.top = y;\n};\n\nexport function defaultString(str, def) {\n    return str ? str.trim().toLowerCase() : def;\n};\n\nexport function createVector3(v, def) {\n    if (v) {\n        if (v instanceof Vec3) {\n            return v.clone();\n        } else if (v instanceof Array) {\n            return Vec3.fromVec(v);\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec3();\n};\n\nexport function createVector4(v, def) {\n    if (v) {\n        if (v instanceof Vec4) {\n            return v.clone();\n        } else if (v instanceof Array) {\n            return Vec4.fromVec(v);\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec4();\n};\n\nexport function createColorRGBA(c, def) {\n    if (c) {\n        if (isString(c)) {\n            return htmlColorToRgba(c);\n        } else if (c instanceof Array) {\n            return new Vec4.fromVec(c);\n        } else if (c instanceof Vec4) {\n            return c.clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec4(1.0, 1.0, 1.0, 1.0);\n};\n\nexport function createColorRGB(c, def) {\n    if (c) {\n        if (isString(c)) {\n            return htmlColorToRgb(c);\n        } else if (c instanceof Array) {\n            return new Vec3.fromVec(c);\n        } else if (c instanceof Vec3) {\n            return c.clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Vec3(1.0, 1.0, 1.0);\n};\n\nexport function createExtent(e, def) {\n    if (e) {\n        if (e instanceof Array) {\n            return new Extent(\n                createLonLat(e[0]),\n                createLonLat(e[1]));\n        } else if (e instanceof Extent) {\n            return e.clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new Extent();\n};\n\nexport function createLonLat(l, def) {\n    if (l) {\n        if (l instanceof Array) {\n            return new LonLat(l[0], l[1], l[2]);\n        } else if (l instanceof LonLat) {\n            return l.clone();\n        }\n    } else if (def) {\n        return def;\n    }\n    return new LonLat();\n};\n\n\n/**\n * Finds an item in a sorted array.\n * @param {Array} ar The sorted array to search.\n * @param {Object} el The item to find in the array.\n * @param {og.utils.binarySearch~compare_fn} compare_fn comparator The function to use to compare the item to\n *        elements in the array.\n * @returns {Number} a negative number  if a is less than b; 0 if a is equal to b;a positive number of a is greater than b.\n *\n * @example\n * // Create a comparator function to search through an array of numbers.\n * function comparator(a, b) {\n *     return a - b;\n * };\n * var numbers = [0, 2, 4, 6, 8];\n * var index = og.utils.binarySearch(numbers, 6, comparator); // 3\n */\nexport function binarySearch(ar, el, compare_fn) {\n    var m = 0;\n    var n = ar.length - 1;\n    while (m <= n) {\n        var k = (n + m) >> 1;\n        var cmp = compare_fn(el, ar[k], k);\n        if (cmp > 0) {\n            m = k + 1;\n        } else if (cmp < 0) {\n            n = k - 1;\n        } else {\n            return k;\n        }\n    }\n    return -m - 1;\n};\n\n/**\n * Binary insertion that uses binarySearch algorithm.\n * @param {Array} ar - The sorted array to insert.\n * @param {Object} el - The item to insert.\n * @param {og.utils.binarySearch~compare_fn} compare_fn - comparator The function to use to compare the item to\n *        elements in the array.\n * @returns {Number} Array index position in which item inserted in.\n */\nexport function binaryInsert(ar, el, compare_fn) {\n    var i = binarySearch(ar, el, compare_fn);\n    if (i < 0) {\n        i = ~i;\n    }\n    ar.splice(i, 0, el);\n    return i;\n};\n\n/**\n * Returns two segment lines intersection coordinate.\n * @static\n * @param {og.math.Vec2} start1 - First line first coordinate.\n * @param {og.math.Vec2} end1 - First line second coordinate.\n * @param {og.math.Vec2} start2 - Second line first coordinate.\n * @param {og.math.Vec2} end2 - Second line second coordinate.\n * @param {boolean} [isSegment] - Lines are segments.\n * @return {og.math.Vec2} - Intersection coordinate.\n */\nexport function getLinesIntersection2v(start1, end1, start2, end2, isSegment) {\n    var dir1 = end1.sub(start1);\n    var dir2 = end2.sub(start2);\n\n    var a1 = -dir1.y;\n    var b1 = +dir1.x;\n    var d1 = -(a1 * start1.x + b1 * start1.y);\n\n    var a2 = -dir2.y;\n    var b2 = +dir2.x;\n    var d2 = -(a2 * start2.x + b2 * start2.y);\n\n    var seg1_line2_start = a2 * start1.x + b2 * start1.y + d2;\n    var seg1_line2_end = a2 * end1.x + b2 * end1.y + d2;\n\n    var seg2_line1_start = a1 * start2.x + b1 * start2.y + d1;\n    var seg2_line1_end = a1 * end2.x + b1 * end2.y + d1;\n\n    if (isSegment && (seg1_line2_start * seg1_line2_end > 0 || seg2_line1_start * seg2_line1_end > 0))\n        return null;\n\n    var u = seg1_line2_start / (seg1_line2_start - seg1_line2_end);\n\n    return new Vec2(start1.x + u * dir1.x, start1.y + u * dir1.y);\n};\n\n/**\n * Returns two segment lines intersection coordinate.\n * @static\n * @param {og.math.Vec2} start1 - First line first coordinate.\n * @param {og.math.Vec2} end1 - First line second coordinate.\n * @param {og.math.Vec2} start2 - Second line first coordinate.\n * @param {og.math.Vec2} end2 - Second line second coordinate.\n * @param {boolean} [isSegment] - Lines are segments.\n * @return {og.math.Vec2} - Intersection coordinate.\n */\nexport function getLinesIntersectionLonLat(start1, end1, start2, end2, isSegment) {\n    var dir1 = new LonLat(end1.lon - start1.lon, end1.lat - start1.lat);\n    var dir2 = new LonLat(end2.lon - start2.lon, end2.lat - start2.lat);\n\n    var a1 = -dir1.lat;\n    var b1 = +dir1.lon;\n    var d1 = -(a1 * start1.lon + b1 * start1.lat);\n\n    var a2 = -dir2.lat;\n    var b2 = +dir2.lon;\n    var d2 = -(a2 * start2.lon + b2 * start2.lat);\n\n    var seg1_line2_start = a2 * start1.lon + b2 * start1.lat + d2;\n    var seg1_line2_end = a2 * end1.lon + b2 * end1.lat + d2;\n\n    var seg2_line1_start = a1 * start2.lon + b1 * start2.lat + d1;\n    var seg2_line1_end = a1 * end2.lon + b1 * end2.lat + d1;\n\n    if (isSegment && (seg1_line2_start * seg1_line2_end > 0 || seg2_line1_start * seg2_line1_end > 0))\n        return null;\n\n    var u = seg1_line2_start / (seg1_line2_start - seg1_line2_end);\n\n    return new LonLat(start1.lon + u * dir1.lon, start1.lat + u * dir1.lat);\n};\n\n/**\n * Converts XML to JSON\n * @static\n * @param {Object} xml - Xml object\n * @return {Object} - Json converted object.\n */\nexport function xmlToJson(xml) {\n\n    // Create the return object\n    var obj = {};\n\n    if (xml.nodeType === 1) { // element\n        // do attributes\n        if (xml.attributes.length > 0) {\n            obj[\"@attributes\"] = {};\n            for (var j = 0; j < xml.attributes.length; j++) {\n                var attribute = xml.attributes.item(j);\n                obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\n            }\n        }\n    } else if (xml.nodeType === 3) { // text\n        obj = xml.nodeValue;\n    }\n\n    // do children\n    if (xml.hasChildNodes()) {\n        for (var i = 0; i < xml.childNodes.length; i++) {\n            var item = xml.childNodes.item(i);\n            var nodeName = item.nodeName;\n            if (typeof (obj[nodeName]) === \"undefined\") {\n                obj[nodeName] = xmlToJson(item);\n            } else {\n                if (typeof (obj[nodeName].push) === \"undefined\") {\n                    var old = obj[nodeName];\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                }\n                obj[nodeName].push(xmlToJson(item));\n            }\n        }\n    }\n    return obj;\n};\n\nexport const castType = {\n    \"string\": function (v) {\n        return isEmpty(v) ? v : v.toString();\n    },\n\n    \"date\": function (v) {\n        return isEmpty(v) ? v : new Date(v * 1000);\n    },\n\n    \"datetime\": function (v) {\n        return isEmpty(v) ? v : new Date(v * 1000);\n    },\n\n    \"time\": function (v) {\n        return isEmpty(v) ? v : parseInt(v);\n    },\n\n    \"integer\": function (v) {\n        return isEmpty(v) ? v : parseInt(v);\n    },\n\n    \"float\": function (v) {\n        return isEmpty(v) ? v : parseFloat(v);\n    },\n\n    \"boolean\": function (str) {\n        if (str === null)\n            return str;\n\n        if (typeof str === 'boolean') {\n            if (str === true)\n                return true;\n            return false;\n        }\n        if (typeof str === 'string') {\n            if (str === \"\")\n                return false;\n            str = str.replace(/^\\s+|\\s+$/g, '');\n            if (str.toLowerCase() === 'true' || str.toLowerCase() === 'yes')\n                return true;\n            str = str.replace(/,/g, '.');\n            str = str.replace(/^\\s*\\-\\s*/g, '-');\n        }\n        if (!isNaN(str))\n            return parseFloat(str) !== 0;\n        return false;\n    }\n};\n\nexport function base64toBlob(base64Data, contentType) {\n    contentType = contentType || '';\n    var sliceSize = 1024;\n    var byteCharacters = atob(base64Data);\n    var bytesLength = byteCharacters.length;\n    var slicesCount = Math.ceil(bytesLength / sliceSize);\n    var byteArrays = new Array(slicesCount);\n\n    for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n            bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n    }\n    return new Blob(byteArrays, { type: contentType });\n};\n\n/**\n * \n * @param {Vec2} p \n * @param {Vec2} v1 \n * @param {Vec2} v2 \n * @param {Vec2} v3 \n * @param {Array<Number>} res \n */\nexport function cartesianToBarycentricLonLat(p, v1, v2, v3, res) {\n\n    const y2y3 = v2.lat - v3.lat,\n        x3x2 = v3.lon - v2.lon,\n        x1x3 = v1.lon - v3.lon,\n        y1y3 = v1.lat - v3.lat,\n        y3y1 = v3.lat - v1.lat,\n        xx3 = p.lon - v3.lon,\n        yy3 = p.lat - v3.lat;\n\n    const d = y2y3 * x1x3 + x3x2 * y1y3,\n        lambda1 = (y2y3 * xx3 + x3x2 * yy3) / d,\n        lambda2 = (y3y1 * xx3 + x1x3 * yy3) / d;\n\n    res[0] = lambda1;\n    res[1] = lambda2;\n    res[2] = 1 - lambda1 - lambda2;\n\n    return 0 <= res[0] && res[0] <= 1 && 0 <= lambda1 && lambda1 <= 1 && 0 <= lambda2 && lambda2 <= 1;\n};\n\nexport function throttle(func, limit, skip) {\n    let lastFunc\n    let lastRan\n    return function () {\n        const context = this\n        const args = arguments\n        if (!lastRan) {\n            func.apply(context, args)\n            lastRan = Date.now()\n        } else {\n            if (skip) {\n                clearTimeout(lastFunc);\n            }\n            lastFunc = setTimeout(function () {\n                if ((Date.now() - lastRan) >= limit) {\n                    func.apply(context, args)\n                    lastRan = Date.now()\n                }\n            }, limit - (Date.now() - lastRan))\n        }\n    }\n};","/**\n * @module og/Events\n */\n\n'use strict';\n\nimport { stamp, binaryInsert } from './utils/shared.js';\n\n/**\n * Base events class to handle custom events.\n * @class\n * @param {Array.<string>} [eventNames] - Event names that could be dispatched.\n */\nclass Events {\n\n    constructor(eventNames, sender) {\n        /**\n         * Registered event names.\n         * @protected\n         * @type {Array.<string>}\n         */\n        this._eventNames = [];\n\n        eventNames && this.registerNames(eventNames);\n\n        this._sender = sender || this;\n\n        /**\n         * Stop propagation flag\n         * @protected\n         * @type {boolean}\n         */\n        this._stopPropagation = false;\n\n        this._stampCache = {};\n\n        this.__id = Events._staticCounter++;\n    }\n\n    static get _staticCounter() {\n        if (!this.__counter__ && this.__counter__ !== 0) {\n            this.__counter__ = 0;\n        }\n        return this.__counter__;\n    }\n\n    static set _staticCounter(n) {\n        this.__counter__ = n;\n    }\n\n    bindSender(sender) {\n        this._sender = sender || this;\n    }\n\n    /**\n     * Function that creates event object properties that would be dispatched.\n     * @public\n     * @param {Array.<string>} eventNames - Specified event names list.\n     */\n    registerNames(eventNames) {\n        for (var i = 0; i < eventNames.length; i++) {\n            this[eventNames[i]] = { \"active\": true, \"handlers\": [] };\n            this._eventNames.push(eventNames[i]);\n        }\n    }\n\n    _getStamp(name, id, ogid) {\n        return `${name}_${id}_${ogid}`;\n    }\n\n    /**\n     * Returns true if event callback has stamped.\n     * @protected\n     * @param {Object} name - Event identifier.\n     * @param {Object} obj - Event callback.\n     * @return {boolean} -\n     */\n    _stamp(name, obj) {\n\n        var ogid = stamp(obj);\n\n        var st = this._getStamp(name, this.__id, ogid);//name + \"_\" + this.__id + \"_\" + ogid;\n\n        if (!this._stampCache[st]) {\n            this._stampCache[st] = ogid;\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Attach listener.\n     * @public\n     * @param {string} name - Event name to listen.\n     * @param {eventCallback} callback - Event callback function.\n     * @param {Object} sender - Event callback function owner. \n     */\n    on(name, callback, sender, priority = 0) {\n        if (this._stamp(name, callback)) {\n            if (this[name]) {\n                let c = callback.bind(sender || this._sender);\n                c._openglobus_id = callback._openglobus_id;\n                c._openglobus_priority = priority;\n                binaryInsert(this[name].handlers, c, (a, b) => {\n                    return b._openglobus_priority - a._openglobus_priority;\n                });\n                //this[name].handlers.unshift(c);\n            }\n        }\n    }\n\n    /**\n     * Stop listening event name with specified callback function.\n     * @public\n     * @param {string} name - Event name.\n     * @param {eventCallback} callback - Attached  event callback.\n     */\n    off(name, callback) {\n        if (callback) {\n            var st = this._getStamp(name, this.__id, callback._openglobus_id);//name + \"_\" + this.__id + \"_\" + callback._openglobus_id;\n            if (callback._openglobus_id && this._stampCache[st]) {\n                var h = this[name].handlers;\n                var i = h.length;\n                var indexToRemove = -1;\n                while (i--) {\n                    var hi = h[i];\n                    if (hi._openglobus_id === callback._openglobus_id) {\n                        indexToRemove = i;\n                        break;\n                    }\n                }\n\n                if (indexToRemove !== -1) {\n                    h.splice(indexToRemove, 1);\n                    this._stampCache[st] = undefined;\n                    delete this._stampCache[st];\n                }\n            }\n        }\n    }\n\n    /**\n     * Dispatch event.\n     * @public\n     * @param {Object} event - Event instance property that created by event name.\n     * @param {Object} [obj] - Event object.\n     */\n    dispatch(event, ...args) {\n        if (event && event.active) {\n            var h = event.handlers;\n            var i = h.length;\n            while (i-- && !this._stopPropagation) {\n                h[i](...args);\n            }\n        }\n        this._stopPropagation = false;\n    }\n\n    /**\n     * Brakes events propagation.\n     * @public\n     */\n    stopPropagation() {\n        this._stopPropagation = true;\n    }\n\n    /**\n     * Removes all events.\n     * @public\n     */\n    clear() {\n        for (var i = 0; i < this._eventNames.length; i++) {\n            var e = this[this._eventNames[i]];\n            e.handlers.length = 0;\n            e.handlers = [];\n        }\n        this._eventNames.length = 0;\n        this._eventNames = [];\n    }\n};\n\nexport { Events };","/**\n * @module og/astro/jd\n */\n\n'use strict';\n\nimport { binarySearch } from '../utils/shared.js';\n\n/**\n * Seconds in millisecond.\n * @const\n * @default\n */\nexport const SECONDS_PER_MILLISECOND = 0.001;\n\n/**\n * Milliseconds in second.\n * @const\n * @default\n */\nexport const MILLISECONDS_PER_SECOND = 1000.0;\n\n/**\n * Seconds in minute.\n * @const\n * @default\n */\nexport const SECONDS_PER_MINUTE = 60.0;\n\n/**\n * One by seconds in minute.\n * @const\n * @default\n */\nexport const ONE_BY_SECONDS_PER_MINUTE = 1.0 / SECONDS_PER_MINUTE;\n\n/**\n * Minutes in hour.\n * @const\n * @default\n */\nexport const MINUTES_PER_HOUR = 60.0;\n\n/**\n * Hours in day.\n * @const\n * @default\n */\nexport const HOURS_PER_DAY = 24.0;\n\n/**\n * One by hours in day.\n * @const\n * @default\n */\nexport const ONE_BY_HOURS_PER_DAY = 1.0 / HOURS_PER_DAY;\n\n/**\n * Seconds in hour.\n * @const\n * @default\n */\nexport const SECONDS_PER_HOUR = 3600.0;\n\n/**\n * One by seconds in hour.\n * @const\n * @default\n */\nexport const ONE_BY_SECONDS_PER_HOUR = 1.0 / SECONDS_PER_HOUR;\n\n/**\n * Seconds in 12 hours.\n * @const\n * @default\n */\nexport const SECONDS_PER_12_HOURS = 12.0 * SECONDS_PER_HOUR;\n\n/**\n * Minutes in day.\n * @const\n * @default\n */\nexport const MINUTES_PER_DAY = 1440.0;\n\n/**\n * One by minutes in day.\n * @const\n * @default\n */\nexport const ONE_BY_MINUTES_PER_DAY = 1.0 / MINUTES_PER_DAY;\n\n/**\n * Seconds in day.\n * @const\n * @default\n */\nexport const SECONDS_PER_DAY = 86400.0;\n\n/**\n * Milliseconds in day.\n * @const\n * @default\n */\nexport const MILLISECONDS_PER_DAY = 86400000.0;\n\n/**\n * One by milliseconds in day.\n * @const\n * @default\n */\nexport const ONE_BY_MILLISECONDS_PER_DAY = 1.0 / MILLISECONDS_PER_DAY;\n\n/**\n * One by seconds in day.\n * @const\n * @default\n */\nexport const ONE_BY_SECONDS_PER_DAY = 1.0 / SECONDS_PER_DAY;\n\n/**\n * Days in julian century.\n * @const\n * @default\n */\nexport const DAYS_PER_JULIAN_CENTURY = 36525.0;\n\n/**\n * Days in julian year.\n * @const\n * @default\n */\nexport const DAYS_PER_JULIAN_YEAR = 365.25;\n\n/**\n * Seconds in picosecond.\n * @const\n * @default\n */\nexport const PICOSECOND = 0.000000001;\n\n/**\n * Modified julian date difference.\n * @const\n * @default\n */\nexport const MODIFIED_JULIAN_DATE_DIFFERENCE = 2400000.5;\n\n/**\n * Julian date of 2000 year. Epoch.\n * @const\n * @default\n */\nexport const J2000 = 2451545.0;\n\n/**\n * Returns julian days from Epoch.\n * @param {number} jd - Julian date.\n * @returns {number} Days from epoch\n */\nexport function T(jd) {\n    return (jd - J2000) / DAYS_PER_JULIAN_CENTURY;\n};\n\n/**\n * Gets the date's julian day.\n * @param {number} year - Year.\n * @param {number} month - Month.\n * @param {number} day - Day.\n * @returns {Number} Day number\n */\nexport function getDayNumber(year, month, day) {\n    var a = ((month - 14) / 12) | 0;\n    var b = year + 4800 + a;\n    return (((1461 * b) / 4) | 0) + (((367 * (month - 2 - 12 * a)) / 12) | 0) -\n        (((3 * (((b + 100) / 100) | 0)) / 4) | 0) + day - 32075;\n};\n\n/**\n * Converts javascript date to the universal(UTC) julian date.\n * @param {Date} date - Date.\n * @returns {number} UTC julian date\n */\nexport function DateToUTC(date) {\n    var dayNumber = getDayNumber(date.getUTCFullYear(), date.getUTCMonth() + 1, date.getUTCDate());\n\n    var hour = date.getUTCHours() - 12;\n    if (hour < 0) {\n        hour += 24;\n    }\n\n    var secondsOfDay =\n        date.getUTCSeconds() + hour * SECONDS_PER_HOUR +\n        date.getUTCMinutes() * SECONDS_PER_MINUTE +\n        date.getUTCMilliseconds() * SECONDS_PER_MILLISECOND;\n\n    if (secondsOfDay >= SECONDS_PER_12_HOURS) {\n        dayNumber--;\n    }\n\n    var extraDays = secondsOfDay * ONE_BY_SECONDS_PER_DAY | 0;\n    dayNumber += extraDays;\n    secondsOfDay -= SECONDS_PER_DAY * extraDays;\n\n    if (secondsOfDay < 0) {\n        dayNumber--;\n        secondsOfDay += SECONDS_PER_DAY;\n    }\n\n    return dayNumber + secondsOfDay * ONE_BY_SECONDS_PER_DAY;\n};\n\n/**\n * Converts javascript date to the atomic(TAI) julian date.\n * @param {Date} date - Date.\n * @returns {number} TAI julian date\n */\nexport function DateToTAI(date) {\n    return UTCtoTAI(DateToUTC(date));\n};\n\n/**\n * Converts coordinated universal(UTC) julian date to atomic(TAI) julian date.\n * @param {number} jd - UTC julian date.\n * @returns {number} TAI julian date\n */\nexport function UTCtoTAI(jd) {\n    var leapSeconds = leapSecondsTable;\n\n    var index = binarySearch(leapSeconds, jd, function (a, b) {\n        return a - b.jd;\n    });\n\n    if (index < 0) {\n        index = ~index;\n    }\n\n    if (index >= leapSeconds.length) {\n        index = leapSeconds.length - 1;\n    }\n\n    var offset = leapSeconds[index].leapSeconds;\n\n    if (index !== 0) {\n        if ((leapSeconds[index].jd - jd) * SECONDS_PER_DAY > offset) {\n            offset = leapSeconds[index - 1].leapSeconds;\n        }\n    }\n\n    return jd + offset * ONE_BY_SECONDS_PER_DAY;\n};\n\n/**\n * Converts atomic julian date(TAI) to the coordinated universal(UTC) julian date.\n * @param {number} tai - TAI julian date.\n * @returns {number} UTC julian date\n */\nexport function TAItoUTC(tai) {\n    var leapSeconds = leapSecondsTable;\n    var index = binarySearch(leapSeconds, tai, function (a, b) {\n        return a - b.jd;\n    });\n\n    if (index < 0) {\n        index = ~index;\n    }\n\n    if (index >= leapSeconds.length) {\n        return tai - leapSeconds[index - 1].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n    }\n\n    if (index === 0) {\n        return tai - leapSeconds[0].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n    }\n\n    var diff = (leapSeconds[index].jd - tai) * SECONDS_PER_DAY;\n\n    if (diff === 0) {\n        return tai - leapSeconds[index].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n    }\n\n    if (diff <= 1.0) {\n        return null;\n    }\n\n    return tai - leapSeconds[index - 1].leapSeconds * ONE_BY_SECONDS_PER_DAY;\n};\n\n/**\n * Converts UTC julian date to the javascript date object.\n * @param {number} utc - UTC julian date.\n * @returns {Date} JavaScript Date object\n */\nexport function UTCtoDate(utc) {\n    var julianDayNumber = utc | 0;\n    var secondsOfDay = (utc - julianDayNumber) * SECONDS_PER_DAY;\n\n    if (secondsOfDay >= SECONDS_PER_12_HOURS) {\n        julianDayNumber++;\n    }\n\n    var L = (julianDayNumber + 68569) | 0;\n    var N = (4 * L / 146097) | 0;\n    L = (L - (((146097 * N + 3) / 4) | 0)) | 0;\n    var I = ((4000 * (L + 1)) / 1461001) | 0;\n    L = (L - (((1461 * I) / 4) | 0) + 31) | 0;\n    var J = ((80 * L) / 2447) | 0;\n    var day = (L - (((2447 * J) / 80) | 0)) | 0;\n    L = (J / 11) | 0;\n    var month = (J + 2 - 12 * L) | 0;\n    var year = (100 * (N - 49) + I + L) | 0;\n\n    var hour = secondsOfDay * ONE_BY_SECONDS_PER_HOUR | 0;\n    var remainingSeconds = secondsOfDay - hour * SECONDS_PER_HOUR;\n    var minute = remainingSeconds * ONE_BY_SECONDS_PER_MINUTE | 0;\n    remainingSeconds = remainingSeconds - minute * SECONDS_PER_MINUTE;\n    var second = remainingSeconds | 0;\n    var millisecond = (remainingSeconds - second) * MILLISECONDS_PER_SECOND | 0;\n\n    hour += 12;\n    if (hour > 23) {\n        hour -= 24;\n    }\n\n    return new Date(Date.UTC(year, month - 1, day, hour, minute, second, millisecond));\n};\n\n/**\n * Converts TAI julian date to the javascript date object.\n * @param {number} tai - TAI julian date.\n * @returns {Date} JavaScript Date object\n */\nexport function TAItoDate(tai) {\n\n    var utc = TAItoUTC(tai);\n    if (!utc) {\n        utc = TAItoUTC(addSeconds(tai, -1));\n        og.console.logWrn(\"TAItoDate:336 - can't conv utc.\");\n    }\n\n    return UTCtoDate(utc);\n};\n\n/**\n * Adds milliseconds to the julian date.\n * @param {number} jd - Julian date.\n * @param {number} milliseconds - Milliseconds to add.\n * @returns {number} Julian date\n */\nexport function addMilliseconds(jd, milliseconds) {\n    return jd + milliseconds * ONE_BY_MILLISECONDS_PER_DAY;\n};\n\n/**\n * Adds seconds to the julian date.\n * @param {number} jd - Julian date.\n * @param {number} seconds - Seconds to add.\n * @returns {number} Julian date\n */\nexport function addSeconds(jd, seconds) {\n    return jd + seconds * ONE_BY_SECONDS_PER_DAY;\n};\n\n/**\n * Adds hours to the julian date.\n * @param {number} jd - Julian date.\n * @param {number} hours - Hours to add.\n * @returns {number} Julian date\n */\nexport function addHours(jd, hours) {\n    return jd + hours * ONE_BY_HOURS_PER_DAY;\n};\n\n/**\n * Adds minutes to the julian date.\n * @param {number} jd - Julian date.\n * @param {number} minutes - Minutes to add.\n * @returns {number} Julian date\n */\nexport function addMinutes(jd, minutes) {\n    return jd + minutes * MINUTES_PER_DAY;\n};\n\n/**\n * Adds days to the julian date.\n * @param {number} jd - Julian date.\n * @param {number} days - Days to add.\n * @returns {number} Julian date\n */\nexport function addDays(jd, days) {\n    return jd + days;\n};\n\n/**\n * Gets milliseconds of a julian date.\n * @param {number} js - julian date.\n * @returns {number} Milliseconds\n */\nexport function getMilliseconds(jd) {\n    var s = jd - (jd | 0);\n    s *= SECONDS_PER_DAY;\n    return (s - (s | 0)) * MILLISECONDS_PER_SECOND | 0;\n};\n\n/**\n * Gets seconds of a julian date.\n * @param {number} js - julian date.\n * @returns {number} Seconds\n */\nexport function getSeconds(jd) {\n    var s = jd - (jd | 0);\n    return s * SECONDS_PER_DAY;\n};\n\n/**\n * Gets hours of a julian date.\n * @param {number} js - julian date.\n * @returns {number} Hours\n */\nexport function getHours(jd) {\n    var julianDayNumber = jd | 0;\n    var secondsOfDay = (jd - julianDayNumber) * SECONDS_PER_DAY;\n\n    var hour = secondsOfDay * ONE_BY_SECONDS_PER_HOUR | 0;\n    var remainingSeconds = secondsOfDay - hour * SECONDS_PER_HOUR;\n    var minute = remainingSeconds * ONE_BY_SECONDS_PER_MINUTE | 0;\n    remainingSeconds = remainingSeconds - minute * SECONDS_PER_MINUTE;\n    var second = remainingSeconds | 0;\n    var millisecond = (remainingSeconds - second) * MILLISECONDS_PER_SECOND | 0;\n\n    hour += 12 + minute / 60 + second / 3600 + millisecond / 1000;\n    if (hour > 23) {\n        hour -= 24;\n    }\n\n    return hour;\n};\n\n/**\n * Gets minutes of a julian date.\n * @param {number} js - julian date.\n * @returns {number} Minutes\n */\nexport function getMinutes(jd) {\n    var s = jd - (jd | 0);\n    return s * MINUTES_PER_DAY | 0;\n};\n\n/**\n * Gets days of a julian date.\n * @param {number} js - julian date.\n * @returns {number} Days\n */\nexport function getDays(jd) {\n    return jd | 0;\n};\n\n/**\n * Returns days in seconds.\n * @param {number} s - Seconds.\n * @returns {number} Days\n */\nexport function secondsToDays(s) {\n    return s * ONE_BY_SECONDS_PER_DAY;\n};\n\n/**\n * Returns seconds in days.\n * @param {number} d - Days.\n * @returns {number} Seconds\n */\nexport function daysToSeconds(d) {\n    return d * SECONDS_PER_DAY;\n};\n\nfunction __ls(jd, leapSeconds) {\n    return {\n        \"jd\": jd,\n        \"leapSeconds\": leapSeconds\n    };\n};\n\nconst leapSecondsTable = [\n    __ls(2441317.5, 10.0),  // 1972-01-01T00:00:00.000Z\n    __ls(2441499.5, 11.0),  // 1972-07-01T00:00:00.000Z\n    __ls(2441683.5, 12.0),  // 1973-01-01T00:00:00.000Z\n    __ls(2442048.5, 13.0),  // 1974-01-01T00:00:00.000Z\n    __ls(2442413.5, 14.0),  // 1975-01-01T00:00:00.000Z\n    __ls(2442778.5, 15.0),  // 1976-01-01T00:00:00.000Z\n    __ls(2443144.5, 16.0),  // 1977-01-01T00:00:00.000Z\n    __ls(2443509.5, 17.0),  // 1978-01-01T00:00:00.000Z\n    __ls(2443874.5, 18.0),  // 1979-01-01T00:00:00.000Z\n    __ls(2444239.5, 19.0),  // 1980-01-01T00:00:00.000Z\n    __ls(2444786.5, 20.0),  // 1981-07-01T00:00:00.000Z\n    __ls(2445151.5, 21.0),  // 1982-07-01T00:00:00.000Z\n    __ls(2445516.5, 22.0),  // 1983-01-01T00:00:00.000Z\n    __ls(2446247.5, 23.0),  // 1985-07-01T00:00:00.000Z\n    __ls(2447161.5, 24.0),  // 1988-01-01T00:00:00.000Z\n    __ls(2447892.5, 25.0),  // 1990-01-01T00:00:00.000Z\n    __ls(2448257.5, 26.0),  // 1991-01-01T00:00:00.000Z\n    __ls(2448804.5, 27.0),  // 1992-07-01T00:00:00.000Z\n    __ls(2449169.5, 28.0),  // 1993-07-01T00:00:00.000Z\n    __ls(2449534.5, 29.0),  // 1994-07-01T00:00:00.000Z\n    __ls(2450083.5, 30.0),  // 1996-01-01T00:00:00.000Z\n    __ls(2450630.5, 31.0),  // 1997-07-01T00:00:00.000Z\n    __ls(2451179.5, 32.0),  // 1999-01-01T00:00:00.000Z\n    __ls(2453736.5, 33.0),  // 2006-01-01T00:00:00.000Z\n    __ls(2454832.5, 34.0),  // 2009-01-01T00:00:00.000Z\n    __ls(2456109.5, 35.0),  // 2012-07-01T00:00:00.000Z\n    __ls(2457204.5, 36.0)   // 2015-07-01T00:00:00.000Z\n];\n\nexport const J2000TAI = UTCtoTAI(J2000);\n","/**\n * @module og/Clock\n */\n\n'use strict';\n\nimport { Events } from './Events.js';\nimport * as jd from './astro/jd.js';\n\n/**\n * Class represents application timer that stores custom current julian datetime, and time speed multiplier.\n * @class\n * @param {Object} [params]: - Clock parameters:\n * @param {number} [params.startDate=0.0] - Julian start date.\n * @param {number} [params.endDate=0.0] - Julian end date.\n * @param {number} [params.currentDate] - Julian current date. Default: current date.\n * @param {number} [params.multiplier=1.0] - Time speed multiolier.\n */\nclass Clock {\n\n    static get _staticCounter() {\n        if (!this._counter && this._counter !== 0) {\n            this._counter = 0;\n        }\n        return this._counter;\n    }\n\n    static set _staticCounter(n) {\n        this._counter = n;\n    }\n\n    constructor(params) {\n        params = params || {};\n\n        this._id = Clock._staticCounter++;\n\n        /**\n         * Clock name.\n         * @public\n         * @type {string}\n         */\n        this.name = params.name || \"\";\n\n        /**\n         * Clock events.\n         * @public\n         * @type {Events}\n         */\n        this.events = new Events([\n            \"tick\",\n            \"end\"\n        ], this);\n\n        /**\n         * Start julian date clock loop.\n         * @public\n         * @type {number}\n         */\n        this.startDate = params.startDate || 0;\n\n        /**\n         * End julian date clock loop.\n         * @public\n         * @type {number}\n         */\n        this.endDate = params.endDate || 0;\n\n        var currentDate = params.currentDate || jd.DateToUTC(new Date());\n        if (params.startDate && currentDate < params.startDate) {\n            currentDate = params.startDate;\n        }\n        if (params.endDate && currentDate > params.endDate) {\n            currentDate = params.endDate;\n        }\n\n        /**\n         * Current julian datetime.\n         * @public\n         * @type {number}\n         */\n        this.currentDate = currentDate;\n\n        /**\n         * Timer speed multiplier.\n         * @public\n         * @type {number}\n         */\n        this.multiplier = params.multiplier !== undefined ? params.multiplier : 1.0;\n\n        /**\n         * Animation frame delta time.\n         * @public\n         * @readonly\n         * @type {number}\n         */\n        this.deltaTicks = 0;\n\n        /**\n         * Timer activity.\n         * @public\n         * @type {boolean}\n         */\n        this.active = true;\n\n        this._intervalDelay = 0;\n        this._intervalStart = 0;\n        this._intervalCallback = null;\n    }\n\n    clearInterval() {\n        this._intervalDelay = 0;\n        this._intervalStart = 0;\n        this._intervalCallback = null;\n    }\n\n    setInterval(delay, callback) {\n        this._intervalStart = this.currentDate;\n        this._intervalDelay = delay * jd.ONE_BY_MILLISECONDS_PER_DAY;\n        this._intervalCallback = callback;\n    }\n\n    /**\n     * Sets current clock datetime.\n     * @public\n     * @param {Object} date - JavaScript Date object.\n     */\n    setDate(date) {\n        var d = jd.DateToUTC(date);\n        if (this.startDate && d < this.startDate) {\n            d = this.startDate;\n        }\n        if (this.endDate && d > this.endDate) {\n            d = this.endDate;\n        }\n        this.currentDate = d;\n    }\n\n    /**\n     * Returns current application date.\n     * @public\n     * @returns {Date} - Current date.\n     */\n    getDate() {\n        return jd.UTCtoDate(this.currentDate);\n    }\n\n    reset() {\n        if (this.startDate) {\n            this.currentDate = this.startDate;\n        }\n    }\n\n    _tick(dt) {\n        this.deltaTicks = dt * this.multiplier;\n        if (this.active) {\n            var cd = jd.addMilliseconds(this.currentDate, this.deltaTicks);\n            if (this.multiplier > 0) {\n                if (this.endDate && cd > this.endDate) {\n                    this.currentDate = this.startDate;\n                    this.events.dispatch(this.events.end, this);\n                } else {\n                    this.currentDate = cd;\n                }\n            } else {\n                if (this.startDate && cd < this.startDate) {\n                    this.currentDate = this.endDate;\n                    this.events.dispatch(this.events.end, this);\n                } else {\n                    this.currentDate = cd;\n                }\n            }\n\n            if (this._intervalCallback) {\n                if (this.currentDate - this._intervalStart >= this._intervalDelay) {\n                    this._intervalStart = this.currentDate;\n                    this._intervalCallback(this);\n                }\n            }\n\n            this.events.dispatch(this.events.tick, this);\n        }\n    }\n\n    /**\n     * @public\n     * @param {Clock} clock - Clock instance to compare.\n     * @returns {boolean} - Returns true if a clock is the same instance.\n     */\n    equal(clock) {\n        return this._id === clock._id;\n    }\n};\n\nexport { Clock };","'use strict';\n\n/**\n * This is shader program controller that used by hadler object to access the shader \n * program capabilities, like switching program during the rendering.\n * Get access to the program from ...handler.programs.<program name> etc.\n * @class\n * @param {og.webgl.Handler} handler - Handler.\n * @param {og.webgl.Program} program - Shader program.\n */\nconst ProgramController = function (handler, program) {\n\n    /**\n     * Shader program.\n     * @private\n     * @type {og.webgl.Program}\n     */\n    this._program = program;\n\n    /**\n     * Handler.\n     * @private\n     * @type {og.webgl.Handler}\n     */\n    this._handler = handler;\n\n    /**\n     * Program current frame activation flag.\n     * @private\n     * @type {boolean}\n     */\n    this._activated = false;\n};\n\n\n/**\n * Lazy create program call.\n * @public\n */\nProgramController.prototype.initialize = function () {\n    this._program.createProgram(this._handler.gl);\n};\n\n/**\n * Returns controller's shader program.\n * @public\n * @return {og.webgl.Program} -\n */\nProgramController.prototype.getProgram = function () {\n    return this._program;\n};\n\n/**\n * Activates current shader program.\n * @public\n * @returns {ProgramController} -\n */\nProgramController.prototype.activate = function () {\n    if (!this._activated) {\n        this._handler.activeProgram.deactivate();\n        this._handler.activeProgram = this;\n        var p = this._program;\n        this._activated = true;\n        p.enableAttribArrays();\n        p.use();\n    }\n    return this;\n};\n\n/**\n * Remove program from handler\n * @public\n */\nProgramController.prototype.remove = function () {\n    var p = this._handler.programs;\n    if (p[this._program.name]) {\n        if (this._activated) {\n            this.deactivate();\n        }\n        this._program.delete();\n        p[this._program.name] = null;\n        delete p[this._program.name];\n    }\n};\n\n/**\n * Deactivate shader program. This is not necessary while activae function used.\n * @public\n */\nProgramController.prototype.deactivate = function () {\n    this._program.disableAttribArrays();\n    this._activated = false;\n};\n\n/**\n * Returns program activity.\n * @public\n * @return {boolean} -\n */\nProgramController.prototype.isActive = function () {\n    return this._activated;\n};\n\n/**\n * Sets program uniforms and attributes values and return controller instance.\n * @public\n * @param {Object} params - Object with variable name and value like { value: 12, someArray:[1,2,3], uSampler: texture,... }\n * @return {og.webgl.ProgramController} -\n */\nProgramController.prototype.set = function (params) {\n    this.activate();\n    this._program.set(params);\n    return this;\n};\n\n/**\n * Draw index buffer with this program.\n * @public\n * @param {number} mode - Gl draw mode\n * @param {WEBGLBuffer} buffer - Buffer to draw.\n * @return {og.webgl.ProgramController} Returns current shader controller instance.\n */\nProgramController.prototype.drawIndexBuffer = function (mode, buffer) {\n    this._program.drawIndexBuffer(mode, buffer);\n    return this;\n};\n\n/**\n * Calls Gl drawArray function.\n * @param {number} mode - Gl draw mode.\n * @param {number} numItems - draw items count.\n * @return {og.webgl.ProgramController} Returns current shader controller instance.\n */\nProgramController.prototype.drawArrays = function (mode, numItems) {\n    this._program.drawArrays(mode, numItems);\n    return this;\n};\n\nexport { ProgramController };","/**\n * @module og/Stack\n */\n\n'use strict';\n\nclass Node {\n    constructor() {\n        this.next = null;\n        this.prev = null;\n        this.data = null;\n    }\n};\n\nclass Stack {\n    constructor(size = 256) {\n\n        this._current = new Node();\n        this._head = this._current;\n\n        for (var i = 0; i < size; i++) {\n            var n = new Node();\n            n.prev = this._current;\n            this._current.next = n;\n            this._current = n;\n        }\n        this._current = this._head;\n    }\n\n    current() {\n        return this._current;\n    }\n\n    push(data) {\n        this._current = this._current.next;\n        this._current.data = data;\n    };\n\n    pop(data) {\n        this._current = this._current.prev;\n        return this._current.next.data;\n    }\n\n    popPrev(data) {\n        this._current = this._current.prev;\n        return this._current.data;\n    }\n};\n\nexport { Stack };\n","/**\n * @module og/webgl/Handler\n */\n\n'use strict';\n\nimport { Clock } from '../Clock.js';\nimport { ImageCanvas } from '../ImageCanvas.js';\nimport { isEmpty } from '../utils/shared.js';\nimport { ProgramController } from './ProgramController.js';\nimport { Stack } from '../Stack.js';\nimport { Vec2 } from '../math/Vec2.js';\n\n/**\n * Maximum texture image size.\n * @const\n * @type {number}\n */\nconst MAX_SIZE = 4096;\n\nconst vendorPrefixes = [\"\", \"WEBKIT_\", \"MOZ_\"];\n\n/**\n * A WebGL handler for accessing low-level WebGL capabilities.\n * @class\n * @param {string} id - Canvas element id that WebGL handler assing with. If it's null\n * or undefined creates hidden canvas and handler bacomes hidden.\n * @param {Object} [params] - Handler options:\n * @param {number} [params.anisotropy] - Anisitropy filter degree. 8 is default.\n * @param {number} [params.width] - Hidden handler width. 256 is default.\n * @param {number} [params.height] - Hidden handler height. 256 is default.\n * @param {Object} [param.scontext] - Native WebGL context attributes. See https://www.khronos.org/registry/webgl/specs/latest/1.0/#WEBGLCONTEXTATTRIBUTES\n * @param {Array.<string>} [params.extensions] - Additional WebGL extension list. Available by default: EXT_texture_filter_anisotropic.\n */\nconst Handler = function (id, params) {\n\n    params = params || {};\n\n    /**\n     * Application default timer.\n     * @public\n     * @type {og.Clock}\n     */\n    this.defaultClock = new Clock();\n\n    /**\n     * Custom timers.\n     * @protected\n     * @type{og.Clock[]}\n     */\n    this._clocks = [];\n\n    /**\n     * Draw frame time in milliseconds.\n     * @public\n     * @readonly\n     * @type {number}\n     */\n    this.deltaTime = 0;\n\n    /**\n     * WebGL rendering canvas element.\n     * @public\n     * @type {Object}\n     */\n    this.canvas = null;\n\n    /**\n     * WebGL context.\n     * @public\n     * @type {Object}\n     */\n    this.gl = null;\n\n    /**\n     * Shader program controller list.\n     * @public\n     * @type {Object.<og.webgl.ProgramController>}\n     */\n    this.programs = {};\n\n    /**\n     * Current active shader program controller.\n     * @public\n     * @type {og.webgl.ProgramController}\n     */\n    this.activeProgram = null;\n\n    /**\n     * Handler parameters.\n     * @private\n     * @type {Object}\n     */\n    this._params = params || {};\n    this._params.anisotropy = this._params.anisotropy || 8;\n    var w = this._params.width;\n    if (w > MAX_SIZE) {\n        w = MAX_SIZE;\n    }\n    this._params.width = w || 256;\n\n    var h = this._params.height;\n    if (h > MAX_SIZE) {\n        h = MAX_SIZE;\n    }\n    this._params.height = h || 256;\n    this._params.context = this._params.context || {};\n    this._params.extensions = this._params.extensions || [];\n    this._oneByHeight = 1 / this._params.height;\n\n    /**\n     * Current WebGL extensions. Becomes here after context initialization.\n     * @public\n     * @type {Object}\n     */\n    this.extensions = {};\n\n    /**\n     * HTML Canvas object id.\n     * @private\n     * @type {Object}\n     */\n    this._id = id;\n\n    this._lastAnimationFrameTime = 0;\n\n    this._initialized = false;\n\n    /**\n     * Animation frame function assigned from outside(Ex. from Renderer).\n     * @private\n     * @type {frameCallback}\n     */\n    this._frameCallback = function () { };\n\n    this.transparentTexture = null;\n\n    this.framebufferStack = new Stack();\n\n    if (params.autoActivate || isEmpty(params.autoActivate)) {\n        this.initialize();\n    }\n}\n\n/**\n * The return value is null if the extension is not supported, or an extension object otherwise.\n * @param {Object} gl - WebGl context pointer.\n * @param {String} name - Extension name.\n * @returns {Object} -\n */\nHandler.getExtension = function (gl, name) {\n    var i, ext;\n    for (i in vendorPrefixes) {\n        ext = gl.getExtension(vendorPrefixes[i] + name);\n        if (ext) {\n            return ext;\n        }\n    }\n    return null;\n};\n\nconst CONTEXT_TYPE = [\"webgl2\", \"webgl\"];\n\n/**\n * Returns a drawing context on the canvas, or null if the context identifier is not supported.\n * @param {Object} canvas - HTML canvas object.\n * @param {Object} [contextAttributes] - See canvas.getContext contextAttributes.\n * @returns {Object} -\n */\nHandler.getContext = function (canvas, contextAttributes) {\n    var ctx = null;\n\n    try {\n        for (let i = 0; i < CONTEXT_TYPE.length; i++) {\n            ctx = canvas.getContext(CONTEXT_TYPE[i], contextAttributes);\n            if (ctx) {\n                ctx.type = CONTEXT_TYPE[i];\n                break;\n            }\n        }\n    }\n    catch (ex) {\n        console.log(\"exception during the GL context initialization\");\n    }\n\n    if (!ctx) {\n        console.log(\"could not initialise WebGL\");\n    }\n\n    return ctx;\n}\n\n/**\n * Sets animation frame function.\n * @public\n * @param {callback} callback - Frame callback.\n */\nHandler.prototype.setFrameCallback = function (callback) {\n    callback && (this._frameCallback = callback);\n}\n\n/**\n * Creates NEAREST filter texture.\n * @public\n * @param {Object} image - Image or Canvas object.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createTexture_n = function (image) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n\n/**\n * Creates empty texture.\n * @public\n * @param {Number} [width=1] - Specifies the width of the texture image..\n * @param {Number} [height=1] - Specifies the width of the texture image..\n * @param {String} [filter=\"NEAREST\"] - Specifies GL_TEXTURE_MIN(MAX)_FILTER texture value.\n * @param {String} [internalFormat=\"RGBA\"] - Specifies the color components in the texture.\n * @param {String} [format=\"RGBA\"] - Specifies the format of the texel data.\n * @param {String} [type=\"UNSIGNED_BYTE\"] - Specifies the data type of the texel data.\n * @param {Number} [levels=0] - Specifies the level-of-detail number. Level 0 is the base image level. Level n is the nth mipmap reduction image.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createEmptyTexture2DExt = function (\n    width = 1,\n    height = 1,\n    filter = \"NEAREST\",\n    internalFormat = \"RGBA\",\n    format = \"RGBA\",\n    type = \"UNSIGNED_BYTE\",\n    level = 0\n) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n    gl.texImage2D(gl.TEXTURE_2D, level, gl[internalFormat.toUpperCase()], width, height, 0,\n        gl[format.toUpperCase()], gl[type.toUpperCase()], null);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl[filter.toUpperCase()]);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl[filter.toUpperCase()]);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n\n///**\n// * Creates Empty half float texture.\n// * @public\n// * @param {number} width - Empty texture width.\n// * @param {number} height - Empty texture height.\n// * @returns {Object} - WebGL half float texture object.\n// */\n//Handler.prototype.createEmptyTexture_hf = function (width, height) {\n//    var gl = this.gl;\n//    var texture = gl.createTexture();\n//    gl.bindTexture(gl.TEXTURE_2D, texture);\n//    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n//    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.HALF_FLOAT_OES, null);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n//    gl.bindTexture(gl.TEXTURE_2D, null);\n//    return texture;\n//}\n\n///**\n// * Creates Empty float texture.\n// * @public\n// * @param {number} width - Empty texture width.\n// * @param {number} height - Empty texture height.\n// * @returns {Object} - WebGL float texture object.\n// */\n//Handler.prototype.createEmptyTexture_f = function (width, height) {\n//    var gl = this.gl;\n//    var texture = gl.createTexture();\n//    gl.bindTexture(gl.TEXTURE_2D, texture);\n//    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n//    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.FLOAT, null);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n//    //gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n//    gl.bindTexture(gl.TEXTURE_2D, null);\n//    return texture;\n//}\n\n/**\n * Creates Empty NEAREST filtered texture.\n * @public\n * @param {number} width - Empty texture width.\n * @param {number} height - Empty texture height.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createEmptyTexture_n = function (width, height) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n\n/**\n * Creates empty LINEAR filtered texture.\n * @public\n * @param {number} width - Empty texture width.\n * @param {number} height - Empty texture height.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createEmptyTexture_l = function (width, height) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n\n/**\n * Creates LINEAR filter texture.\n * @public\n * @param {Object} image - Image or Canvas object.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createTexture_l = function (image) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n\n/**\n * Creates MIPMAP filter texture.\n * @public\n * @param {Object} image - Image or Canvas object.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createTexture_mm = function (image) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n\n/**\n * Creates ANISOTROPY filter texture.\n * @public\n * @param {Object} image - Image or Canvas object.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createTexture_a = function (image) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n    gl.texParameterf(gl.TEXTURE_2D, this.extensions.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT, this._params.anisotropy);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n}\n\n/**\n * Creates DEFAULT filter texture, ANISOTROPY is default.\n * @public\n * @param {Object} image - Image or Canvas object.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.createTexture = function (image) {\n    return this.createTexture_a(image)\n}\n\n/**\n * Creates cube texture.\n * @public\n * @param {Object.<string>} params - Face image urls:\n * @param {string} params.px - Positive X or right image url.\n * @param {string} params.nx - Negative X or left image url.\n * @param {string} params.py - Positive Y or up image url.\n * @param {string} params.ny - Negative Y or bottom image url.\n * @param {string} params.pz - Positive Z or face image url.\n * @param {string} params.nz - Negative Z or back image url.\n * @returns {Object} - WebGL texture object.\n */\nHandler.prototype.loadCubeMapTexture = function (params) {\n    var gl = this.gl;\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    var faces = [[params.px, gl.TEXTURE_CUBE_MAP_POSITIVE_X],\n    [params.nx, gl.TEXTURE_CUBE_MAP_NEGATIVE_X],\n    [params.py, gl.TEXTURE_CUBE_MAP_POSITIVE_Y],\n    [params.ny, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y],\n    [params.pz, gl.TEXTURE_CUBE_MAP_POSITIVE_Z],\n    [params.nz, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z]];\n\n    var imageCanvas = new ImageCanvas();\n    imageCanvas.fillEmpty();\n    var emptyImage = imageCanvas.getImage();\n\n    for (let i = 0; i < faces.length; i++) {\n        let face = faces[i][1];\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n        gl.texImage2D(face, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, emptyImage);\n    }\n\n    for (let i = 0; i < faces.length; i++) {\n        let face = faces[i][1];\n        let image = new Image();\n        image.crossOrigin = '';\n        image.onload = function (texture, face, image) {\n            return function () {\n                gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n                gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n                gl.texImage2D(face, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            }\n        }(texture, face, image);\n        image.src = faces[i][0];\n    }\n    return texture;\n}\n\n/**\n * Adds shader program to the handler.\n * @public\n * @param {og.webgl.Program} program - Shader program.\n * @param {boolean} [notActivate] - If it's true program will not compile.\n * @return {og.webgl.Program} -\n */\nHandler.prototype.addProgram = function (program, notActivate) {\n    if (!this.programs[program.name]) {\n        var sc = new ProgramController(this, program);\n        this.programs[program.name] = sc;\n        this._initProgramController(sc);\n        if (notActivate)\n            sc._activated = false;\n    } else {\n        console.log(\"og.webgl.Handler:284 - shader program: '\" + program.name + \"' is allready exists.\");\n    }\n    return program;\n}\n\n/**\n * Removes shader program from handler.\n * @public\n * @param {String} name - Shader program name.\n */\nHandler.prototype.removeProgram = function (name) {\n    this.programs[name] && this.programs[name].remove();\n}\n\n/**\n * Adds shader programs to the handler.\n * @public\n * @param {Array.<og.webgl.Program>} programsArr - Shader program array.\n */\nHandler.prototype.addPrograms = function (programsArr) {\n    for (var i = 0; i < programsArr.length; i++) {\n        this.addProgram(programsArr[i]);\n    }\n}\n\n/**\n * Used in addProgram\n * @private\n * @param {og.webgl.ProgramController} sc - Program controller\n */\nHandler.prototype._initProgramController = function (sc) {\n    if (this._initialized) {\n        sc.initialize();\n        if (!this.activeProgram) {\n            this.activeProgram = sc;\n            sc.activate();\n        } else {\n            sc.deactivate();\n            this.activeProgram._program.enableAttribArrays();\n            this.activeProgram._program.use();\n        }\n    }\n}\n\n/**\n * Used in init function.\n * @private\n */\nHandler.prototype._initPrograms = function () {\n    for (var p in this.programs) {\n        this._initProgramController(this.programs[p]);\n    }\n}\n\n/**\n * Initialize additional WebGL extensions.\n * @public\n * @param {string} extensionStr - Extension name.\n * @param {boolean} showLog - Show logging.\n * @return {Object} -\n */\nHandler.prototype.initializeExtension = function (extensionStr, showLog) {\n    if (!(this.extensions && this.extensions[extensionStr])) {\n        var ext = Handler.getExtension(this.gl, extensionStr);\n        if (ext) {\n            this.extensions[extensionStr] = ext;\n        } else if (showLog) {\n            console.log(\"og.webgl.Handler: extension '\" + extensionStr + \"' doesn't initialize.\");\n        }\n    }\n    return this.extensions && this.extensions[extensionStr];\n}\n\n/**\n * Main function that initialize handler.\n * @public\n */\nHandler.prototype.initialize = function () {\n\n    if (this._id) {\n        this.canvas = document.getElementById(this._id);\n    } else {\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = this._params.width;\n        this.canvas.height = this._params.height;\n    }\n\n    this.gl = Handler.getContext(this.canvas, this._params.context);\n    if (this.gl) {\n        this._initialized = true;\n\n        /** Sets deafult extensions */\n        this._params.extensions.push(\"EXT_texture_filter_anisotropic\");\n\n        if (this.gl.type === \"webgl\") {\n            this._params.extensions.push(\"OES_standard_derivatives\");\n            this._params.extensions.push(\"OES_element_index_uint\");\n        } else {\n            this._params.extensions.push(\"EXT_color_buffer_float\");\n            this._params.extensions.push(\"OES_texture_float_linear\");\n        }\n\n        var i = this._params.extensions.length;\n        while (i--) {\n            this.initializeExtension(this._params.extensions[i], true);\n        }\n\n        if (!this.extensions.EXT_texture_filter_anisotropic)\n            this.createTexture = this.createTexture_mm;\n\n        /** Initilalize shaders and rendering parameters*/\n        this._initPrograms();\n        this._setDefaults();\n    }\n}\n\n/**\n * Sets default gl render parameters. Used in init function.\n * @private\n */\nHandler.prototype._setDefaults = function () {\n    this.activateDepthTest();\n    this.setSize(this.canvas.clientWidth || this._params.width, this.canvas.clientHeight || this._params.height);\n    this.gl.frontFace(this.gl.CCW);\n    this.gl.cullFace(this.gl.BACK);\n    this.activateFaceCulling();\n    this.deactivateBlending();\n    var that = this;\n    this.createDefaultTexture({ color: \"rgba(0,0,0,0.0)\" }, function (t) {\n        that.transparentTexture = t;\n    });\n}\n\n/**\n * Activate depth test.\n * @public\n */\nHandler.prototype.activateDepthTest = function () {\n    this.gl.enable(this.gl.DEPTH_TEST);\n}\n\n/**\n * Deactivate depth test.\n * @public\n */\nHandler.prototype.deactivateDepthTest = function () {\n    this.gl.disable(this.gl.DEPTH_TEST);\n}\n\n/**\n * Activate face culling.\n * @public\n */\nHandler.prototype.activateFaceCulling = function () {\n    this.gl.enable(this.gl.CULL_FACE);\n}\n\n/**\n * Deactivate face cullting.\n * @public\n */\nHandler.prototype.deactivateFaceCulling = function () {\n    this.gl.disable(this.gl.CULL_FACE);\n}\n\n/**\n * Activate blending.\n * @public\n */\nHandler.prototype.activateBlending = function () {\n    this.gl.enable(this.gl.BLEND);\n}\n\n/**\n * Deactivate blending.\n * @public\n */\nHandler.prototype.deactivateBlending = function () {\n    this.gl.disable(this.gl.BLEND);\n}\n\n/**\n * Creates ARRAY buffer.\n * @public\n * @param {Array.<number>} array - Input array.\n * @param {number} itemSize - Array item size.\n * @param {number} numItems - Items quantity.\n * @param {number} [usage=STATIC_DRAW] - Parameter of the bufferData call can be one of STATIC_DRAW, DYNAMIC_DRAW, or STREAM_DRAW.\n * @return {Object} -\n */\nHandler.prototype.createArrayBuffer = function (array, itemSize, numItems, usage) {\n    //\n    //TODO: What about binding created buffer\n    //\n    var buffer = this.gl.createBuffer();\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, array, usage || this.gl.STATIC_DRAW);\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n    buffer.itemSize = itemSize;\n    buffer.numItems = numItems;\n    return buffer;\n}\n\n/**\n * Creates ELEMENT ARRAY buffer.\n * @public\n * @param {Array.<number>} array - Input array.\n * @param {number} itemSize - Array item size.\n * @param {number} numItems - Items quantity.\n * @param {number} [usage=STATIC_DRAW] - Parameter of the bufferData call can be one of STATIC_DRAW, DYNAMIC_DRAW, or STREAM_DRAW.\n * @return {Object} -\n */\nHandler.prototype.createElementArrayBuffer = function (array, itemSize, numItems, usage) {\n    var buffer = this.gl.createBuffer();\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, buffer);\n    this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, array, usage || this.gl.STATIC_DRAW);\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n    buffer.itemSize = itemSize;\n    buffer.numItems = numItems || array.length;\n    return buffer;\n}\n\n/**\n * Sets handler canvas size.\n * @public\n * @param {number} w - Canvas width.\n * @param {number} h - Canvas height.\n */\nHandler.prototype.setSize = function (w, h) {\n\n    if (w > MAX_SIZE) {\n        w = MAX_SIZE;\n    }\n\n    if (h > MAX_SIZE) {\n        h = MAX_SIZE;\n    }\n\n    this._params.width = w;\n    this._params.height = h;\n    this.canvas.width = w;\n    this.canvas.height = h;\n    this._oneByHeight = 1 / h;\n\n    this.gl && this.gl.viewport(0, 0, w, h);\n    this.onCanvasResize && this.onCanvasResize(this.canvas);\n}\n\n/**\n * Returns context screen width.\n * @public\n * @returns {number} -\n */\nHandler.prototype.getWidth = function () {\n    return this.canvas.width;\n};\n\n/**\n * Returns context screen height.\n * @public\n * @returns {number} -\n */\nHandler.prototype.getHeight = function () {\n    return this.canvas.height;\n}\n\n/**\n * Returns canvas aspect ratio.\n * @public\n * @returns {number} -\n */\nHandler.prototype.getClientAspect = function () {\n    return this.canvas.clientWidth / this.canvas.clientHeight;\n}\n\n/**\n * Returns screen center coordinates.\n * @public\n * @returns {number} -\n */\nHandler.prototype.getCenter = function () {\n    var c = this.canvas;\n    return new Vec2(Math.round(c.width * 0.5), Math.round(c.height * 0.5));\n}\n\n/**\n * Draw single frame.\n * @public\n * @param {number} now - Frame current time milliseconds.\n */\nHandler.prototype.drawFrame = function () {\n\n    /** Calculate frame time */\n    var now = new Date().getTime();\n    this.deltaTime = now - this._lastAnimationFrameTime;\n    this._lastAnimationFrameTime = now;\n\n    this.defaultClock._tick(this.deltaTime);\n\n    for (var i = 0; i < this._clocks.length; i++) {\n        this._clocks[i]._tick(this.deltaTime);\n    }\n\n    /** Canvas resize checking */\n    var canvas = this.canvas;\n    if (canvas.clientWidth !== canvas.width ||\n        canvas.clientHeight !== canvas.height) {\n        this.setSize(canvas.clientWidth, canvas.clientHeight);\n    }\n\n    /** Draw frame */\n    this._frameCallback();\n}\n\n/**\n * Clearing gl frame.\n * @public\n */\nHandler.prototype.clearFrame = function () {\n    var gl = this.gl;\n    this.gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n}\n\n/**\n * Starts animation loop.\n * @public\n */\nHandler.prototype.start = function () {\n    if (!this._requestAnimationFrameId && this._initialized) {\n        var d = new Date();\n        this._lastAnimationFrameTime = d.getTime();\n        this.defaultClock.setDate(d);\n        this._animationFrameCallback();\n    }\n}\n\nHandler.prototype.stop = function () {\n    if (this._requestAnimationFrameId) {\n        window.cancelAnimationFrame(this._requestAnimationFrameId);\n        this._requestAnimationFrameId = null;\n    }\n}\n\n/**\n * Make animation.\n * @private\n */\nHandler.prototype._animationFrameCallback = function () {\n    this._requestAnimationFrameId = window.requestAnimationFrame(() => {\n        this.drawFrame();\n        this._animationFrameCallback();\n    });\n}\n\n/**\n * Creates default texture object\n * @public\n * @param {Object} [params] - Texture parameters:\n * @param {Array.<number, number, number, number>} [params.color] - Texture RGBA color\n * @param {number} [params.url] - Texture source url\n * @param {callback} success - Creation callback\n */\nHandler.prototype.createDefaultTexture = function (params, success) {\n    var imgCnv;\n    var texture;\n    if (params && params.color) {\n        imgCnv = new ImageCanvas(2, 2);\n        imgCnv.fillColor(params.color);\n        texture = this.createTexture_n(imgCnv._canvas);\n        texture.default = true;\n        success(texture);\n    } else if (params && params.url) {\n        var img = new Image();\n        var that = this;\n        img.onload = function () {\n            texture = that.createTexture(this);\n            texture.default = true;\n            success(texture);\n        };\n        img.src = params.url;\n    } else {\n        imgCnv = new ImageCanvas(2, 2);\n        imgCnv.fillColor(\"#C5C5C5\");\n        texture = this.createTexture_n(imgCnv._canvas);\n        texture.default = true;\n        success(texture);\n    }\n}\n\n/**\n * @public\n */\nHandler.prototype.destroy = function () {\n\n    var gl = this.gl;\n\n    this.stop();\n\n    for (var p in this.programs) {\n        this.removeProgram(p);\n    }\n\n    gl.deleteTexture(this.transparentTexture);\n    this.transparentTexture = null;\n\n    this.framebufferStack = null;\n    this.framebufferStack = new Stack();\n\n    if (this.canvas.parentNode) {\n        this.canvas.parentNode.removeChild(this.canvas);\n    }\n    this.canvas.width = 1;\n    this.canvas.height = 1;\n    this.canvas = null;\n\n    var numAttribs = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n    var tmp = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, tmp);\n    for (let ii = 0; ii < numAttribs; ++ii) {\n        gl.disableVertexAttribArray(ii);\n        gl.vertexAttribPointer(ii, 4, gl.FLOAT, false, 0, 0);\n        gl.vertexAttrib1f(ii, 0);\n    }\n    gl.deleteBuffer(tmp);\n\n    var numTextureUnits = gl.getParameter(gl.MAX_TEXTlURE_IMAGE_UNITS);\n    for (let ii = 0; ii < numTextureUnits; ++ii) {\n        gl.activeTexture(gl.TEXTURE0 + ii);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.useProgram(null);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    gl.disable(gl.BLEND);\n    gl.disable(gl.CULL_FACE);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.DITHER);\n    gl.disable(gl.SCISSOR_TEST);\n    gl.blendColor(0, 0, 0, 0);\n    gl.blendEquation(gl.FUNC_ADD);\n    gl.blendFunc(gl.ONE, gl.ZERO);\n    gl.clearColor(0, 0, 0, 0);\n    gl.clearDepth(1);\n    gl.clearStencil(-1);\n\n    this.gl = null;\n\n    this._initialized = false;\n}\n\nHandler.prototype.addClock = function (clock) {\n    if (!clock.__handler) {\n        clock.__handler = this;\n        this._clocks.push(clock);\n    }\n}\n\nHandler.prototype.addClocks = function (clockArr) {\n    for (var i = 0; i < clockArr.length; i++) {\n        this.addClock(clockArr[i]);\n    }\n}\n\nHandler.prototype.removeClock = function (clock) {\n    if (clock.__handler) {\n        var c = this._clocks;\n        var i = c.length;\n        while (i--) {\n            if (c[i].equal(clock)) {\n                clock.__handler = null;\n                c.splice(i, 1);\n                break;\n            }\n        }\n    }\n}\n\nexport { Handler };\n\n","/**\n * @module og/webgl/types\n */\n\n'use strict';\n\nlet _declarations = [\n    \"FLOAT\", \"DOUBLE\", \"BOOL\", \"INT\", \"UINT\", \n    \"VEC2\", \"VEC3\", \"VEC4\", \"DVEC2\",\n    \"DVEC3\", \"DVEC4\", \n    \"BVEC2\", \"BVEC3\", \"BVEC4\", \n    \"IVEC2\", \"IVEC3\", \"IVEC4\",     \n    \"UVEC2\", \"UVEC3\", \"UVEC4\", \n    \"MAT2\", \"DMAT2\", \"MAT3\", \"DMAT3\", \"MAT4\", \"DMAT4\", \n    \"MAT2X3\", \"MAT2X4\", \"MAT3X2\", \"MAT3X4\", \"MAT4X2\", \n    \"MAT4X3\", \"DMAT2X3\", \"DMAT2X4\", \"DMAT3X2\", \"DMAT3X4\",\n    \"DMAT4X2\", \"DMAT4X3\", \n    \"SAMPLER1D\", \"SAMPLER2D\", \"SAMPLER3D\", \"SAMPLERCUBE\", \"SAMPLER2DSHADOW\",\n    \"SAMPLER2DXX\", \n    \"INTXX\", \"FLOATXX\"];\n\n\nexport const types = {};\n\nfor (let i = 0; i < _declarations.length; i++) {\n    types[_declarations[i]] = i;\n}\n\nexport const typeStr = {};\nfor (let i = 0; i < _declarations.length; i++) {\n    typeStr[_declarations[i].toLowerCase()] = types[_declarations[i]];\n}\n","/**\n * @module og/webgl/callbacks\n */\n\n'use strict';\n\nimport { types } from './types.js';\n\n/*=========================\n   Uniforms callbacks\n =========================*/\nexport const callbacks = {\n    'u': [],\n    'a': []\n};\n\ncallbacks.u[types.MAT4] = function (program, variable) {\n    program.gl.uniformMatrix4fv(variable._pName, false, variable.value);\n};\n\ncallbacks.u[types.MAT3] = function (program, variable) {\n    program.gl.uniformMatrix3fv(variable._pName, false, variable.value);\n};\n\ncallbacks.u[types.FLOAT] = function (program, variable) {\n    program.gl.uniform1f(variable._pName, variable.value);\n};\n\ncallbacks.u[types.INT] = function (program, variable) {\n    program.gl.uniform1i(variable._pName, variable.value);\n};\n\ncallbacks.u[types.VEC2] = function (program, variable) {\n    program.gl.uniform2fv(variable._pName, variable.value);\n};\n\ncallbacks.u[types.VEC3] = function (program, variable) {\n    program.gl.uniform3fv(variable._pName, variable.value);\n};\n\ncallbacks.u[types.VEC4] = function (program, variable) {\n    program.gl.uniform4fv(variable._pName, variable.value);\n};\n\ncallbacks.u[types.SAMPLER2D] = function (program, variable) {\n    let pgl = program.gl;\n    pgl.activeTexture(pgl.TEXTURE0 + program._textureID);\n    pgl.bindTexture(pgl.TEXTURE_2D, variable.value);\n    pgl.uniform1i(variable._pName, program._textureID);\n    program._textureID++;\n};\n\ncallbacks.u[types.SAMPLERCUBE] = function (program, variable) {\n    let pgl = program.gl;\n    pgl.activeTexture(pgl.TEXTURE0 + program._textureID);\n    pgl.bindTexture(pgl.TEXTURE_CUBE_MAP, variable.value);\n    pgl.uniform1i(variable._pName, program._textureID);\n    program._textureID++;\n};\n\ncallbacks.u[types.SAMPLER2DXX] = function (program, variable) {\n    let pgl = program.gl,\n        size = variable.value.length;\n    let samplerArr = new Int32Array(size);\n    for (let i = 0; i < size; i++) {\n        pgl.activeTexture(pgl.TEXTURE0 + program._textureID + i);\n        pgl.bindTexture(pgl.TEXTURE_2D, variable.value[i]);\n        samplerArr[i] = i;\n    }\n    pgl.uniform1iv(variable._pName, samplerArr);\n};\n\ncallbacks.u[types.INTXX] = function (program, variable) {\n    pgl.uniform1iv(variable._pName, variable.value);\n};\n\ncallbacks.u[types.FLOATXX] = function (program, variable) {\n    program.gl.uniform1fv(variable._pName, variable.value);\n};\n\n/*========================\n   Attributes callbacks\n ========================*/\ncallbacks.a[types.FLOAT] = function (program, variable) {\n    program.gl.vertexAttrib1f(variable._pName, variable.value);\n};\n\ncallbacks.a[types.VEC2] = function (program, variable) {\n    program.gl.vertexAttrib2fv(variable._pName, variable.value);\n};\n\ncallbacks.a[types.VEC3] = function (program, variable) {\n    program.gl.vertexAttrib3fv(variable._pName, variable.value);\n};\n\ncallbacks.a[types.VEC4] = function (program, variable) {\n    program.gl.vertexAttrib4fv(variable._pName, variable.value);\n};","'use strict';\n\n/**\n * Console logging singleton object.\n * @class\n */\nexport class Cons {\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._container.classList.add(\"ogConsole\");\n        this._container.style.display = \"none\";\n        if (document.body) {\n            document.body.appendChild(this._container);\n        }\n\n        this._visibility = false;\n    }\n\n    getVisibility() {\n        return this._visibility;\n    }\n\n    setVisibility(visibility) {\n        if (this._visibility != visibility) {\n            this._visibility = visibility;\n            if (this._visibility) {\n                this.show();\n            } else {\n                this.hide();\n            }\n        }\n    }\n\n    /**\n     * Show console panel.\n     * @public\n     */\n    show() {\n        if (!this._container.parentNode) {\n            if (document.body) {\n                document.body.appendChild(this._container);\n            }\n        }\n        this._container.style.display = \"block\";\n        this._visibility = true;\n    }\n\n    /**\n     * Hide console panel.\n     * @public\n     */\n    hide() {\n        this._container.style.display = \"none\";\n        this._visibility = false;\n    }\n\n    /**\n     * Adds error text in the console.\n     * @public\n     * @param {string} str - Error text.\n     */\n    logErr(str) {\n        var d = document.createElement(\"div\");\n        d.classList.add(\"ogConsole-text\");\n        d.classList.add(\"ogConsole-error\");\n        d.innerHTML = \"error: \" + str;\n        console.log(d.innerHTML);\n        this._container.appendChild(d);\n        this.show();\n    }\n\n    /**\n     * Adds warning text in the console.\n     * @public\n     * @param {string} str - Warning text.\n     */\n    logWrn(str) {\n        var d = document.createElement(\"div\");\n        d.classList.add(\"ogConsole-text\");\n        d.classList.add(\"ogConsole-warning\");\n        d.innerHTML = \"warning: \" + str;\n        console.log(d.innerHTML);\n        this._container.appendChild(d);\n        this.show();\n    }\n\n    /**\n     * Adds log text in the console.\n     * @public\n     * @param {string} str - Log text.\n     * @param {Object} [style] - HTML style.\n     */\n    log(str, style) {\n        var d = document.createElement(\"div\");\n        d.classList.add(\"ogConsole-text\");\n        if (style) {\n            for (var s in style) {\n                d.style[s] = style[s];\n            }\n        }\n        d.innerHTML = str;\n        console.log(str);\n        this._container.appendChild(d);\n        this.show();\n    }\n}\n\nexport const cons = new Cons();\n\n","/**\n * @module og/webgl/Program\n */\n\n'use strict';\n\nimport { callbacks } from './callbacks.js';\nimport { cons } from '../cons.js';\nimport { typeStr } from './types.js';\n\n/**\n * Represents more comfortable using WebGL shader program.\n * @class\n * @param {string} name - Shader program name identificator.\n * @param {object} material - Object stores uniforms, attributes and program codes:\n * @param {object} material.uniforms - Uniforms definition section.\n * @param {object} material.attributes - Attributes definition section.\n * @param {string} material.vertexShader - Vertex glsl code.\n * @param {string} material.fragmentShader - Fragment glsl code.\n */\nclass Program {\n    constructor(name, material) {\n        /**\n         * Shader progarm name.\n         * @public\n         * @type {string}\n         */\n        this.name = name;\n\n        this.attributes = {};\n        this.uniforms = {};\n\n        /**\n         * Attributes.\n         * @public\n         * @type {Object}\n         */\n        this._attributes = {};\n        for (let t in material.attributes) {\n            if (typeof (material.attributes[t]) === \"string\" ||\n                typeof (material.attributes[t]) === \"number\") {\n                this._attributes[t] = { 'type': material.attributes[t] };\n            } else {\n                this._attributes[t] = material.attributes[t];\n            }\n        }\n\n        /**\n         * Uniforms.\n         * @public\n         * @type {Object}\n         */\n        this._uniforms = {};\n        for (let t in material.uniforms) {\n            if (typeof (material.uniforms[t]) === \"string\" ||\n                typeof (material.uniforms[t]) === \"number\") {\n                this._uniforms[t] = { 'type': material.uniforms[t] };\n            } else {\n                this._uniforms[t] = material.uniforms[t];\n            }\n        }\n\n        /**\n         * Vertex shader.\n         * @public\n         * @type {string}\n         */\n        this.vertexShader = material.vertexShader;\n\n        /**\n         * Fragment shader.\n         * @public\n         * @type {string}\n         */\n        this.fragmentShader = material.fragmentShader;\n\n        /**\n         * Webgl context.\n         * @public\n         * @type {Object}\n         */\n        this.gl = null;\n\n        /**\n         * All program variables.\n         * @private\n         * @type {Object}\n         */\n        this._variables = {};\n\n        /**\n         * Program pointer.\n         * @private\n         * @type {Object}\n         */\n        this._p = null;\n\n        /**\n         * Texture counter.\n         * @prvate\n         * @type {number}\n         */\n        this._textureID = 0;\n\n        /**\n         * Program attributes array.\n         * @private\n         * @type {Array.<Object>}\n         */\n        this._attribArrays = [];\n    }\n\n    /**\n     * Sets the current program frame.\n     * @public\n     */\n    use() {\n        this.gl.useProgram(this._p);\n    }\n\n    /**\n     * Sets program variables.\n     * @public\n     * @param {Object} material - Variables and values object.\n     */\n    set(material) {\n        this._textureID = 0;\n        for (var i in material) {\n            this._variables[i].value = material[i];\n            this._variables[i]._callback(this, this._variables[i]);\n        }\n    }\n\n    /**\n     * Apply current variables.\n     * @public\n     */\n    apply() {\n        this._textureID = 0;\n        var v = this._variables;\n        for (var i in v) {\n            v[i]._callback(this, v[i]);\n        }\n    }\n\n    /**\n     * Calls drawElements index buffer function.\n     * @public\n     * @param {number} mode - Draw mode(GL_TRIANGLES, GL_LINESTRING etc.).\n     * @param {Object} buffer - Index buffer.\n     */\n    drawIndexBuffer(mode, buffer) {\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, buffer);\n        this.gl.drawElements(mode, buffer.numItems, this.gl.UNSIGNED_SHORT, 0);\n    }\n\n    /**\n     * Calls drawArrays function.\n     * @public\n     * @param {number} mode - Draw mode(GL_TRIANGLES, GL_LINESTRING etc.).\n     * @param {number} numItems - Curent binded buffer drawing items count.\n     */\n    drawArrays(mode, numItems) {\n        this.gl.drawArrays(mode, 0, numItems);\n    }\n\n    /**\n     * Check and log for an shader compile errors and warnings. Returns True - if no errors otherwise returns False.\n     * @private\n     * @param {Object} shader - WebGl shader program.\n     * @param {string} src - Shader program source.\n     * @returns {boolean} -\n     */\n    _getShaderCompileStatus(shader, src) {\n        this.gl.shaderSource(shader, src);\n        this.gl.compileShader(shader);\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            cons.logErr(\"og/Program/Program:\" + this.name + \" - \" + this.gl.getShaderInfoLog(shader) + \".\");\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Returns compiled vertex shader program pointer.\n     * @private\n     * @param {string} src - Vertex shader source code.\n     * @returns {Object} -\n     */\n    _createVertexShader(src) {\n        var shader = this.gl.createShader(this.gl.VERTEX_SHADER);\n        if (!this._getShaderCompileStatus(shader, src)) {\n            return null;\n        }\n        return shader;\n    }\n\n    /**\n     * Returns compiled fragment shader program pointer.\n     * @private\n     * @param {string} src - Vertex shader source code.\n     * @returns {Object} -\n     */\n    _createFragmentShader(src) {\n        var shader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n        if (!this._getShaderCompileStatus(shader, src)) {\n            return null;\n        }\n        return shader;\n    }\n\n    /**\n     * Disable current program vertexAttribArrays.\n     * @public\n     */\n    disableAttribArrays() {\n        var gl = this.gl;\n        var a = this._attribArrays;\n        var i = a.length;\n        while (i--) {\n            gl.disableVertexAttribArray(a[i]);\n        }\n    }\n\n    /**\n     * Enable current program vertexAttribArrays.\n     * @public\n     */\n    enableAttribArrays() {\n        var gl = this.gl;\n        var a = this._attribArrays;\n        var i = a.length;\n        while (i--) {\n            gl.enableVertexAttribArray(a[i]);\n        }\n    }\n\n    /**\n     * Delete program.\n     * @public\n     */\n    delete() {\n        this.gl.deleteProgram(this._p);\n    }\n\n    /**\n     * Creates program.\n     * @public\n     * @param {Object} gl - WebGl context.\n     */\n    createProgram(gl) {\n        this.gl = gl;\n        this._p = this.gl.createProgram();\n\n        var fs = this._createFragmentShader(this.fragmentShader);\n        var vs = this._createVertexShader(this.vertexShader);\n        gl.attachShader(this._p, fs);\n        gl.attachShader(this._p, vs);\n        gl.linkProgram(this._p);\n\n        if (!gl.getProgramParameter(this._p, gl.LINK_STATUS)) {\n            cons.logErr(\"og/Program/Program:\" + this.name + \" - couldn't initialise shaders. \" + gl.getProgramInfoLog(this._p) + \".\");\n            gl.deleteProgram(this._p);\n            return;\n        }\n\n        this.use();\n\n        for (var a in this._attributes) {\n            //this.attributes[a]._name = a;\n            this._variables[a] = this._attributes[a];\n\n            //Maybe, it will be better to remove enableArray option...\n            this._attributes[a].enableArray = (this._attributes[a].enableArray != undefined ? this._attributes[a].enableArray : true);\n            if (this._attributes[a].enableArray)\n                this._attributes[a]._callback = Program.bindBuffer;\n            else {\n                if (typeof (this._attributes[a].type) === \"string\") {\n                    this._attributes[a]._callback = callbacks.a[typeStr[this._attributes[a].type.trim().toLowerCase()]];\n                } else {\n                    this._attributes[a]._callback = callbacks.a[this._attributes[a].type];\n                }\n            }\n\n            this._p[a] = gl.getAttribLocation(this._p, a);\n\n            if (this._p[a] == undefined) {\n                cons.logErr(\"og/Program/Program:\" + this.name + \" - attribute '\" + a + \"' is not exists.\");\n                gl.deleteProgram(this._p);\n                return;\n            }\n\n            if (this._attributes[a].enableArray) {\n                this._attribArrays.push(this._p[a]);\n                gl.enableVertexAttribArray(this._p[a]);\n            }\n\n            this._attributes[a]._pName = this._p[a];\n            this.attributes[a] = this._p[a];\n        }\n\n        for (var u in this._uniforms) {\n            //this.uniforms[u]._name = u;\n\n            if (typeof (this._uniforms[u].type) === \"string\") {\n                this._uniforms[u]._callback = callbacks.u[typeStr[this._uniforms[u].type.trim().toLowerCase()]];\n            } else {\n                this._uniforms[u]._callback = callbacks.u[this._uniforms[u].type];\n            }\n\n            this._variables[u] = this._uniforms[u];\n            this._p[u] = gl.getUniformLocation(this._p, u);\n\n            if (this._p[u] == undefined) {\n                cons.logErr(\"og/Program/Program:\" + this.name + \" - uniform '\" + u + \"' is not exists.\");\n                gl.deleteProgram(this._p);\n                return;\n            }\n\n            this._uniforms[u]._pName = this._p[u];\n            this.uniforms[u] = this._p[u];\n        }\n\n        gl.detachShader(this._p, fs);\n        gl.detachShader(this._p, vs);\n\n        gl.deleteShader(fs);\n        gl.deleteShader(vs);\n    }\n\n    /**\n     * Bind program buffer.\n     * @function\n     * @param {og.webgl.Program} program - Used program.\n     * @param {Object} variable - Variable represents buffer data.\n     */\n    static bindBuffer(program, variable) {\n        var gl = program.gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, variable.value);\n        gl.vertexAttribPointer(variable._pName, variable.value.itemSize, gl.FLOAT, false, 0, 0);\n    }\n};\n\nexport { Program };","'use strict';\n\n/**\n * 2D Rectangle class.\n * @class\n * @param {number} [left] - Left coordinate. 0 - default.\n * @param {number} [top] - Top coordinate. 0 - default.\n * @param {number} [right] - Right coordinate. 0 - default.\n * @param {number} [bottom] - Bottom coordinate. 0 - default.\n*/\nclass Rectangle {\n    constructor(left, top, right, bottom) {\n\n        /**\n         * Left coordinate.\n         * @public\n         * @type {number}\n         */\n        this.left = left || 0;\n\n        /**\n         * Right coordinate.\n         * @public\n         * @type {number}\n         */\n        this.right = right || 0;\n\n        /**\n         * Top coordinate.\n         * @public\n         * @type {number}\n         */\n        this.top = top || 0;\n\n        /**\n         * Top coordinate.\n         * @public\n         * @type {number}\n         */\n        this.bottom = bottom || 0;\n    }\n\n    /**\n     * Clone rectangle object.\n     * @public\n     * @returns {og.Rectangle}\n     */\n    clone() {\n        return new Rectangle(this.left, this.top, this.right, this.bottom);\n    }\n\n    /**\n     * Returns rectangle width.\n     * @public\n     * @type {number}\n     */\n    getWidth() {\n        return Math.abs(this.right - this.left);\n    }\n\n    /**\n     * Returns rectangle height.\n     * @public\n     * @type {number}\n     */\n    getHeight() {\n        return Math.abs(this.bottom - this.top);\n    }\n\n    /**\n     * Returns rectangle area.\n     * @public\n     * @type {number}\n     */\n    getSquare() {\n        return this.getHeight() * this.getWidth();\n    }\n\n    /**\n     * Returns rectangle diagonal size.\n     * @public\n     * @type {number}\n     */\n    getDiagonal() {\n        var w = this.getWidth(),\n            h = this.getHeight();\n        return Math.sqrt(h * h + w * w);\n    }\n\n    /**\n     * Returns true if rectangle fits their size in width and height.\n     * @public\n     * @param {number} width - Width.\n     * @param {number} height - Height.\n     * @type {boolean}\n     */\n    fit(width, height) {\n        return (this.getWidth() == width && this.getHeight() == height);\n    }\n\n    isInside(x, y) {\n        return x >= this.left && x <= this.right && y >= this.top && y <= this.bottom;\n    }\n}\n\nexport { Rectangle };","'use strict';\n\nclass QueueArray {\n    constructor(size) {\n        this._size = size || 2048;\n        this._array = new Array(this._size);\n        this._popIndex = parseInt(this._size * 0.5);\n        this._shiftIndex = this._popIndex;\n        this.length = 0;\n    }\n\n    reset(){\n        this._popIndex = parseInt(this._size * 0.5);\n        this._shiftIndex = this._popIndex;\n        this.length = 0;\n    }\n\n    clear() {\n        this._array.length = 0;\n        this._array = new Array(this._size);\n        this._popIndex = parseInt(this._size * 0.5);\n        this._shiftIndex = this._popIndex;\n        this.length = 0;\n    }\n\n    push(data) {\n        this.length++;\n        this._array[this._popIndex++] = data;\n    }\n\n    pop() {\n        if (this.length) {\n            this.length--;\n            var res = this._array[--this._popIndex]\n            this._array[this._popIndex] = null;\n            if (!this._array[this._popIndex - 1]) {\n                this._popIndex = parseInt(this._size * 0.5);\n                this._shiftIndex = this._popIndex;\n            }\n            return res;\n        }\n        return undefined;\n    }\n\n    unshift(data) {\n        this.length++;\n        this._array[--this._shiftIndex] = data;\n    }\n\n    shift() {\n        if (this.length) {\n            this.length--;\n            var res = this._array[this._shiftIndex];\n            this._array[this._shiftIndex++] = null;\n            if (!this._array[this._shiftIndex]) {\n                this._popIndex = parseInt(this._size * 0.5);\n                this._shiftIndex = this._popIndex;\n            }\n            return res;\n        }\n        return undefined;\n    }\n\n    each(callback) {\n        for (var i = this._shiftIndex; i < this._popIndex; i++) {\n            callback(this._array[i]);\n        }\n    }\n};\n\nexport { QueueArray };","'use strict';\n\nimport { QueueArray } from '../QueueArray.js';\n\nclass ImagesCacheManager {\n    constructor() {\n        this.imagesCache = {};\n\n        this._counter = 0;\n        this._pendingsQueue = new QueueArray();\n        this._imageIndexCounter = 0;\n    }\n\n    load(src, success) {\n        if (this.imagesCache[src]) {\n            success(this.imagesCache[src]);\n        } else {\n            var req = { \"src\": src, \"success\": success };\n            if (this._counter >= 1) {\n                this._pendingsQueue.push(req);\n            } else {\n                this._exec(req);\n            }\n        }\n    }\n\n    _exec(req) {\n        this._counter++;\n        var that = this;\n\n        var img = new Image();\n        img.crossOrigin = '';\n        img.onload = function () {\n            that.imagesCache[req.src] = img;\n            this.__nodeIndex = that._imageIndexCounter++;\n            req.success(this);\n            that._dequeueRequest();\n        };\n\n        img.onerror = function () {\n            that._dequeueRequest();\n        };\n\n        img.src = req.src;\n    }\n\n    _dequeueRequest() {\n        this._counter--;\n        if (this._pendingsQueue.length && this._counter < 1) {\n            while (this._pendingsQueue.length) {\n                var req = this._pendingsQueue.pop();\n                if (req) {\n                    if (this.imagesCache[req.src]) {\n                        if (this._counter <= 0)\n                            this._counter = 0;\n                        else\n                            this._counter--;\n                        req.success(this.imagesCache[req.src]);\n                    } else {\n                        this._exec(req);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport { ImagesCacheManager };","'use strict';\n\nimport { ImageCanvas } from '../ImageCanvas.js';\nimport { Rectangle } from '../Rectangle.js';\nimport { ImagesCacheManager } from './ImagesCacheManager.js';\n\n\n/**\n * Border beetween stored images.\n * @type {number}\n * @const\n */\nconst BORDER_SIZE = 4;\n\n/**\n * Texture atlas stores images in one texture. Each image has its own \n * atlas texture coordinates.\n * @class\n * @param {number} [width] - Texture atlas width, if it hasn't 1024 default.\n * @param {number} [height] - Texture atlas height, if it hasn't 1024 default..\n */\nclass TextureAtlas {\n    constructor(width, height) {\n\n        /**\n         * Atlas nodes where input images store. It can be access by image.__nodeIndex.\n         * @public\n         * @type {Array.<og.utils.TextureAtlasNode >}\n         */\n        this.nodes = [];\n\n        /**\n         * Created gl texture.\n         * @public\n         */\n        this.texture = null;\n\n        /**\n         * Atlas canvas.\n         * @public\n         * @type {canvas}\n         */\n        this.canvas = new ImageCanvas(width || 1024, height || 1024);\n        this.clearCanvas();\n\n        this._handler = null;\n        this._images = [];\n        this._btree = null;\n        this._imagesCacheManager = new ImagesCacheManager();\n        this.borderSize = 4;\n    }\n\n    /**\n     * Returns atlas javascript image object.\n     * @public\n     * @returns {Object} -\n     */\n    getImage() {\n        return this.canvas.getImage();\n    }\n\n    /**\n     * Returns canvas object.\n     * @public\n     * @returns {Object} -\n     */\n    getCanvas() {\n        return this.canvas._canvas;\n    }\n\n    /**\n     * Clear atlas with black.\n     * @public\n     */\n    clearCanvas() {\n        this.canvas.fillEmpty(\"black\");\n    }\n\n    clear() {\n        this.canvas.fillEmpty(\"black\");\n        this.nodes = [];\n        this._images = [];\n        this._btree = null;\n        this.createTexture();\n    }\n\n    /**\n     * Sets openglobus gl handler that creates gl texture.\n     * @public\n     * @param {og.webgl.Handler} handler - WebGL handler.\n     */\n    assignHandler(handler) {\n        this._handler = handler;\n        this.createTexture();\n    }\n\n    /**\n     * Returns image diagonal size.\n     * @param {Object} image - JavaSript image object.\n     * @returns {number} -\n     */\n    getDiagonal(image) {\n        var w = image.atlasWidth || image.width,\n            h = image.atlasHeight || image.height;\n        return Math.sqrt(w * w + h * h);\n    }\n\n    /**\n     * Adds image to the atlas and returns creted node with texture coordinates of the stored image.\n     * @public\n     * @param {Object} image - Input javascript image object.\n     * @param {boolean} [fastInsert] - If it's true atlas doesnt restore all images again \n     * and store image in the curent atlas sheme.\n     * @returns {og.utils.TextureAtlasNode} -\n     */\n    addImage(image, fastInsert) {\n\n        if (!(image.width && image.height)) {\n            return;\n        }\n\n        this._images.push(image);\n\n        this._makeAtlas(fastInsert);\n\n        return this.nodes[image.__nodeIndex];\n    }\n\n    _completeNode(nodes, node) {\n        if (node) {\n            var w = this.canvas.getWidth(),\n                h = this.canvas.getHeight();\n            var im = node.image;\n            var r = node.rect;\n            var bs = Math.round(this.borderSize * 0.5);\n            this.canvas.drawImage(im, r.left + bs, r.top + bs, im.atlasWidth, im.atlasHeight);\n            var tc = node.texCoords;\n\n            tc[0] = (r.left + bs) / w;\n            tc[1] = (r.top + bs) / h;\n\n            tc[2] = (r.left + bs) / w;\n            tc[3] = (r.bottom - bs) / h;\n\n            tc[4] = (r.right - bs) / w;\n            tc[5] = (r.bottom - bs) / h;\n\n            tc[6] = (r.right - bs) / w;\n            tc[7] = (r.bottom - bs) / h;\n\n            tc[8] = (r.right - bs) / w;\n            tc[9] = (r.top + bs) / h;\n\n            tc[10] = (r.left + bs) / w;\n            tc[11] = (r.top + bs) / h;\n\n            nodes[im.__nodeIndex] = node;\n        }\n    }\n\n    /**\n     * Main atlas making function.\n     * @private\n     * @param {boolean} [fastInsert] - If it's true atlas doesnt restore all images again \n     * and store image in the curent atlas sheme.\n     */\n    _makeAtlas(fastInsert) {\n\n        if (fastInsert && this._btree) {\n            let im = this._images[this._images.length - 1];\n            this._completeNode(this.nodes, this._btree.insert(im));\n        } else {\n            let im = this._images.slice(0);\n\n            im.sort(function (b, a) {\n                return ((a.atlasWidth || a.width) - (b.atlasWidth || b.width)) || ((a.atlasHeight || a.height) - (b.atlasHeight || b.height));\n            });\n\n            this._btree = new TextureAtlasNode(new Rectangle(0, 0, this.canvas.getWidth(), this.canvas.getHeight()));\n            this._btree.atlas = this;\n\n            this.clearCanvas();\n\n            var newNodes = [];\n            for (var i = 0; i < im.length; i++) {\n                this._completeNode(newNodes, this._btree.insert(im[i]));\n            }\n            this.nodes = [];\n            this.nodes = newNodes;\n        }\n    }\n\n    /**\n     * Creates atlas gl texture.\n     * @public\n     */\n    createTexture() {\n        if (this._handler) {\n            this._handler.gl.deleteTexture(this.texture);\n            this.texture = this._handler.createTexture_mm(this.canvas._canvas);\n        }\n    }\n\n    /**\n     * Image handler callback. \n     * @callback Object~successCallback\n     * @param {Image} img - Loaded image.\n     */\n\n    /**\n     * Asynchronous function that loads and creates image to the image cache, and call success callback when it's done.\n     * @public\n     * @param {string} src - Image object src string.\n     * @param {Object~successCallback} success - The callback that handles the image loads done.\n     */\n    loadImage(src, success) {\n        this._imagesCacheManager.load(src, success);\n    }\n\n    getImageTexCoordinates(img) {\n        if (img.__nodeIndex != null && this.nodes[img.__nodeIndex]) {\n            return this.nodes[img.__nodeIndex].texCoords;\n        }\n    }\n}\n\n/**\n * Atlas binary tree node.\n * @class\n * @param {og.Rectangle} rect - Node image rectangle.\n */\nclass TextureAtlasNode {\n    constructor(rect) {\n        this.childNodes = null;\n        this.image = null;\n        this.rect = rect;\n        this.texCoords = [];\n        this.atlas = null;\n    }\n\n    insert(img) {\n\n        if (this.childNodes) {\n\n            var newNode = this.childNodes[0].insert(img);\n\n            if (newNode != null)\n                return newNode;\n\n            return this.childNodes[1].insert(img);\n\n        } else {\n\n            if (this.image != null)\n                return null;\n\n            var rc = this.rect;\n            var w = (img.atlasWidth || img.width) + this.atlas.borderSize;\n            var h = (img.atlasHeight || img.height) + this.atlas.borderSize;\n\n            if (w > rc.getWidth() || h > rc.getHeight())\n                return null;\n\n            if (rc.fit(w, h)) {\n                this.image = img;\n                return this;\n            }\n\n            this.childNodes = new Array(2);\n            this.childNodes[0] = new TextureAtlasNode();\n            this.childNodes[0].atlas = this.atlas;\n            this.childNodes[1] = new TextureAtlasNode();\n            this.childNodes[1].atlas = this.atlas;\n\n            var dw = rc.getWidth() - w;\n            var dh = rc.getHeight() - h;\n\n            if (dw > dh) {\n                this.childNodes[0].rect = new Rectangle(rc.left, rc.top, rc.left + w, rc.bottom);\n                this.childNodes[1].rect = new Rectangle(rc.left + w, rc.top, rc.right, rc.bottom);\n            } else {\n                this.childNodes[0].rect = new Rectangle(rc.left, rc.top, rc.right, rc.top + h);\n                this.childNodes[1].rect = new Rectangle(rc.left, rc.top + h, rc.right, rc.bottom);\n            }\n\n            return this.childNodes[0].insert(img);\n        }\n    }\n}\n\nexport { TextureAtlas };"],"names":["ImageCanvas","constructor","width","height","_canvas","document","createElement","_context","getContext","getCanvas","fillEmpty","imgd","getImageData","pixels","data","i","n","length","putImageData","getData","fillColor","color","fillStyle","fillRect","setData","imageData","createImageData","set","resize","drawImage","img","x","y","getImage","Image","getWidth","getHeight","src","toDataURL","getTextWidth","text","metrics","measureText","Math","round","drawText","font","fillText","load","url","callback","that","onload","openImage","dataUrl","windowContent","printWin","window","open","write","close","focus","destroy","Framebuffer","handler","options","_fbo","_isBare","isBare","_depthRenderbuffer","_filter","filter","_internalFormat","internalFormat","_format","format","_type","type","_width","canvas","_height","_depthComponent","depthComponent","undefined","_useDepth","useDepth","_active","_size","size","textures","Array","prototype","gl","deleteTexture","deleteFramebuffer","deleteRenderbuffer","init","createFramebuffer","bindFramebuffer","FRAMEBUFFER","bindOutputTexture","createEmptyTexture2DExt","drawBuffers","COLOR_ATTACHMENT0","colorAttachments","push","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","texture","attachmentIndex","bindTexture","TEXTURE_2D","framebufferTexture2D","setSize","forceDestroy","viewport","isComplete","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","res","nx","ny","index","w","h","readBuffer","RGBA","readAllPixels","activate","c","framebufferStack","current","deactivate","f","popPrev","Uint8Array","imageCanvas","ajax","ReadyState","Uninitialized","Loading","Loaded","Interactive","Complete","Status","OK","Created","Accepted","NoContent","BadRequest","Forbidden","NotFound","Gone","ServerError","Method","Get","Post","Asynchronous","Synchronous","Xhr","xhr","_xhr","abort","aborted","defaultParams","async","sender","responseType","createXMLHttp","XMLHttpRequest","ActiveXObject","ieXMLHttpVersions","e","console","log","request","params","p","customXhr","body","d","key","encodeURIComponent","Object","JSON","stringify","slice","setRequestHeader","tail","overrideMimeType","onreadystatechange","readyState","status","success","call","response","error","send","RADIANS","PI","RADIANS_HALF","HALF_PI","INV_PI_BY_180","INV_PI_BY_360","PI_BY_360","INV_PI_BY_180_HALF_PI","LonLat","lon","lat","isZero","join","arr","ai","createFromArray","forwardMercator","mercator","tan","inverseMercator","atan","exp","copy","lonLat","clone","forwardMercatorEPS01","equal","b","POLE","PI_BY_POLE","POLE_BY_PI","POLE_BY_180","INV_POLE_BY_180","Vec4","z","identity","fromVec","toVec3","Vec3","v","toVec","toArray","addA","subA","scale","affinity","iw","scaleTo","getStep","edge","getFrac","og","math","frac","dot","Mat3","_m","m","a","transposeTo","setIdentity","mulVec","g","toMatrix4","Mat4","left","right","bottom","top","near","far","toMatrix3","mulVec3","mulVec4","toInverseMatrix3","j","k","l","o","inverseTo","r","s","A","B","t","u","C","D","E","q","mul","mx","F","G","translate","translateToPosition","rotate","angle","cos","sin","rot","setRotation","rotateBetweenVectors","Quat","getRotationBetweenVectors","getMat4","setFrustum","setPerspective","aspect","setOrtho","lr","bt","nf","eulerToMatrix","ax","ay","az","ad","bd","mat","IDENTITY","xRotation","yRotation","zRotation","axisAngleToQuat","axis","normal","half_angle","sin_a","getLookRotation","forward","up","negate","cross","normalize","fd","sqrt","getLookAtSourceDest","sourcePoint","destPoint","forwardVector","FORWARD","abs","UP","rotAngle","acos","rotAxis","getRotationBetweenVectorsUp","source","dest","clear","add","sub","setFromSphericalCoords","cos_a","sin_lat","cos_lat","sin_long","cos_long","setLookRotation","toSphericalCoords","tx","ty","tz","asin","atan2","alpha","setFromAxisAngle","getAxisAngle","vl","ivl","setFromEulerAngles","pitch","yaw","roll","ex","ey","ez","cr","cp","cy","sr","sp","sy","cpcy","spsy","getEulerAngles","sqy","setFromMatrix4","tr","nxt","out","xs","ys","zs","wx","wy","wz","xx","xy","xz","yy","yz","zz","getMat3","mulA","conjugate","inverse","magnitude2","magnitude","isEqual","matching","slerp","aw","bx","by","bz","bw","omega","cosom","sinom","scale0","scale1","getRoll","reprojectAxis","fTy","fTz","fTwz","fTxy","fTyy","fTzz","getPitch","fTx","fTwx","fTxx","fTyz","getYaw","fTwy","fTxz","DOWN","RIGHT","LEFT","BACKWARD","ZERO","UNIT_X","UNIT_Y","UNIT_Z","doubleToTwoFloats","high","low","doubleHigh","floor","fround","doubleToTwoFloat32Array","length2","lerp","v1","v2","noncollinear","proj_b_to_plane","def","proj_b_to_a","orthoNormalize","tangent","div","divA","toVec4","toString","projToVec","point3","getQuat","vec","dotArr","normalNegate","normalNegateScale","normalScale","distance","negateTo","projToRay","pos","direction","smerp","one_d","LERP_DELTA","getRotationTo","fallbackAxis","v0","invs","normalise","Vec2","oVec2","norm","toVector3","point2","createImageBitmap","blob","Promise","resolve","reject","addEventListener","URL","createObjectURL","isEmpty","_stampCounter","stamp","obj","_openglobus_id","binarySearch","ar","el","compare_fn","cmp","binaryInsert","splice","Events","eventNames","_eventNames","registerNames","_sender","_stopPropagation","_stampCache","__id","_staticCounter","__counter__","bindSender","_getStamp","name","id","ogid","_stamp","st","on","priority","bind","_openglobus_priority","handlers","off","indexToRemove","hi","dispatch","event","args","active","stopPropagation","SECONDS_PER_MILLISECOND","MILLISECONDS_PER_SECOND","SECONDS_PER_MINUTE","ONE_BY_SECONDS_PER_MINUTE","SECONDS_PER_HOUR","ONE_BY_SECONDS_PER_HOUR","SECONDS_PER_12_HOURS","SECONDS_PER_DAY","MILLISECONDS_PER_DAY","ONE_BY_MILLISECONDS_PER_DAY","ONE_BY_SECONDS_PER_DAY","J2000","getDayNumber","year","month","day","DateToUTC","date","dayNumber","getUTCFullYear","getUTCMonth","getUTCDate","hour","getUTCHours","secondsOfDay","getUTCSeconds","getUTCMinutes","getUTCMilliseconds","extraDays","UTCtoTAI","jd","leapSeconds","leapSecondsTable","offset","UTCtoDate","utc","julianDayNumber","L","N","I","J","remainingSeconds","minute","second","millisecond","Date","UTC","addMilliseconds","milliseconds","__ls","Clock","_counter","_id","events","startDate","endDate","currentDate","multiplier","deltaTicks","_intervalDelay","_intervalStart","_intervalCallback","clearInterval","setInterval","delay","setDate","getDate","reset","_tick","dt","cd","end","tick","clock","ProgramController","program","_program","_handler","_activated","initialize","createProgram","getProgram","activeProgram","enableAttribArrays","use","remove","programs","delete","disableAttribArrays","isActive","drawIndexBuffer","mode","buffer","drawArrays","numItems","Node","next","prev","Stack","_current","_head","pop","MAX_SIZE","vendorPrefixes","Handler","defaultClock","_clocks","deltaTime","_params","anisotropy","context","extensions","_oneByHeight","_lastAnimationFrameTime","_initialized","_frameCallback","transparentTexture","autoActivate","getExtension","ext","CONTEXT_TYPE","contextAttributes","ctx","setFrameCallback","createTexture_n","image","createTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","UNSIGNED_BYTE","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","level","toUpperCase","createEmptyTexture_n","createEmptyTexture_l","LINEAR","createTexture_l","createTexture_mm","generateMipmap","LINEAR_MIPMAP_LINEAR","createTexture_a","texParameterf","EXT_texture_filter_anisotropic","TEXTURE_MAX_ANISOTROPY_EXT","loadCubeMapTexture","TEXTURE_CUBE_MAP","faces","px","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_X","py","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","pz","TEXTURE_CUBE_MAP_POSITIVE_Z","nz","TEXTURE_CUBE_MAP_NEGATIVE_Z","emptyImage","face","crossOrigin","addProgram","notActivate","sc","_initProgramController","removeProgram","addPrograms","programsArr","_initPrograms","initializeExtension","extensionStr","showLog","getElementById","_setDefaults","activateDepthTest","clientWidth","clientHeight","frontFace","CCW","cullFace","BACK","activateFaceCulling","deactivateBlending","createDefaultTexture","enable","DEPTH_TEST","deactivateDepthTest","disable","CULL_FACE","deactivateFaceCulling","activateBlending","BLEND","createArrayBuffer","array","itemSize","usage","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","createElementArrayBuffer","ELEMENT_ARRAY_BUFFER","onCanvasResize","getClientAspect","getCenter","drawFrame","now","getTime","clearFrame","clearColor","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","start","_requestAnimationFrameId","_animationFrameCallback","stop","cancelAnimationFrame","requestAnimationFrame","imgCnv","default","parentNode","removeChild","numAttribs","getParameter","MAX_VERTEX_ATTRIBS","tmp","ii","disableVertexAttribArray","vertexAttribPointer","FLOAT","vertexAttrib1f","deleteBuffer","numTextureUnits","MAX_TEXTlURE_IMAGE_UNITS","activeTexture","TEXTURE0","useProgram","DITHER","SCISSOR_TEST","blendColor","blendEquation","FUNC_ADD","blendFunc","ONE","clearDepth","clearStencil","addClock","__handler","addClocks","clockArr","removeClock","_declarations","types","typeStr","toLowerCase","callbacks","MAT4","variable","uniformMatrix4fv","_pName","value","MAT3","uniformMatrix3fv","uniform1f","INT","uniform1i","VEC2","uniform2fv","VEC3","uniform3fv","VEC4","uniform4fv","SAMPLER2D","pgl","_textureID","SAMPLERCUBE","SAMPLER2DXX","samplerArr","Int32Array","uniform1iv","INTXX","FLOATXX","uniform1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","Cons","_container","classList","style","display","appendChild","_visibility","getVisibility","setVisibility","visibility","show","hide","logErr","str","innerHTML","logWrn","cons","Program","material","attributes","uniforms","_attributes","_uniforms","vertexShader","fragmentShader","_variables","_p","_attribArrays","_callback","apply","drawElements","UNSIGNED_SHORT","_getShaderCompileStatus","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","_createVertexShader","createShader","VERTEX_SHADER","_createFragmentShader","FRAGMENT_SHADER","enableVertexAttribArray","deleteProgram","fs","vs","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","enableArray","trim","getAttribLocation","getUniformLocation","detachShader","deleteShader","Rectangle","getSquare","getDiagonal","fit","isInside","QueueArray","_array","_popIndex","parseInt","_shiftIndex","unshift","shift","each","ImagesCacheManager","imagesCache","_pendingsQueue","_imageIndexCounter","req","_exec","__nodeIndex","_dequeueRequest","onerror","TextureAtlas","nodes","clearCanvas","_images","_btree","_imagesCacheManager","borderSize","assignHandler","atlasWidth","atlasHeight","addImage","fastInsert","_makeAtlas","_completeNode","node","im","rect","bs","tc","texCoords","insert","sort","TextureAtlasNode","atlas","newNodes","loadImage","getImageTexCoordinates","childNodes","newNode","rc","dw","dh"],"mappings":"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"}